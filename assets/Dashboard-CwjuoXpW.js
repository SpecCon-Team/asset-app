import{j as e,R as _e,P as ze,a as Ke,C as Ie,T as Ce,L as He,B as qe,b as Me,X as Fe,Y as Be,c as Ve,A as Je,d as Se}from"./vendor-charts-DVp8BQgJ.js";import{g as Qe,f as Ge,u as ye,r as _}from"./vendor-react-CFQdvhEG.js";import{u as ke}from"./store-Ep1GRCvu.js";import{u as fe}from"./store-B5tGagQy.js";import{l as Ye}from"./api-BKsxc7FO.js";import{c as Xe,g as Ze,a as et,u as Te,L as Re,f as We}from"./index-BJREwX_9.js";import{f as ve,g as De,y as he,w as Pe,t as tt,E as st,I as rt,J as at,N as Ue,o as je,O as we,P as it}from"./vendor-ui-Bhgb65c8.js";import"./api-DZ-iU78O.js";import"./types-D8_qC6eW.js";const Ee=Xe(g=>({users:[],isLoading:!1,error:null,fetchUsers:async()=>{g({isLoading:!0,error:null});try{const m=await Ye();g({users:m,isLoading:!1})}catch(m){g({error:m.message,isLoading:!1})}}}));var $e={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(g,m){((O,k)=>{g.exports=k()})(Ge,function O(){var k=typeof self<"u"?self:typeof window<"u"?window:k!==void 0?k:{},z,y=!k.document&&!!k.postMessage,C=k.IS_PAPA_WORKER||!1,F={},K=0,n={};function H(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var a=be(s);a.chunkSize=parseInt(a.chunkSize),s.step||s.chunk||(a.chunkSize=null),this._handle=new Q(a),(this._handle.streamer=this)._config=a}).call(this,t),this.parseChunk=function(s,a){var o=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<o){let r=this._config.newline;r||(l=this._config.quoteChar||'"',r=this._handle.guessLineEndings(s,l)),s=[...s.split(r).slice(o)].join(r)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&(l=this._config.beforeFirstChunk(s))!==void 0&&(s=l),this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+s,l=(this._partialLine="",this._handle.parse(o,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=l.meta.cursor,o=(this._finished||(this._partialLine=o.substring(s-this._baseIndex),this._baseIndex=s),l&&l.data&&(this._rowCount+=l.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),C)k.postMessage({results:l,workerId:n.WORKER_ID,finished:o});else if(E(this._config.chunk)&&!a){if(this._config.chunk(l,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=l=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(l.data),this._completeResults.errors=this._completeResults.errors.concat(l.errors),this._completeResults.meta=l.meta),this._completed||!o||!E(this._config.complete)||l&&l.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),o||l&&l.meta.paused||this._nextChunk(),l}this._halted=!0},this._sendError=function(s){E(this._config.error)?this._config.error(s):C&&this._config.error&&k.postMessage({workerId:n.WORKER_ID,error:s,finished:!1})}}function B(t){var s;(t=t||{}).chunkSize||(t.chunkSize=n.RemoteChunkSize),H.call(this,t),this._nextChunk=y?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),y||(s.onload=Z(this._chunkLoaded,this),s.onerror=Z(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!y),this._config.downloadRequestHeaders){var a,o=this._config.downloadRequestHeaders;for(a in o)s.setRequestHeader(a,o[a])}var l;this._config.chunkSize&&(l=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+l));try{s.send(this._config.downloadRequestBody)}catch(r){this._chunkError(r.message)}y&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(a=>(a=a.getResponseHeader("Content-Range"))!==null?parseInt(a.substring(a.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(a){a=s.statusText||a,this._sendError(new Error(a))}}function u(t){(t=t||{}).chunkSize||(t.chunkSize=n.LocalChunkSize),H.call(this,t);var s,a,o=typeof FileReader<"u";this.stream=function(l){this._input=l,a=l.slice||l.webkitSlice||l.mozSlice,o?((s=new FileReader).onload=Z(this._chunkLoaded,this),s.onerror=Z(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var l=this._input,r=(this._config.chunkSize&&(r=Math.min(this._start+this._config.chunkSize,this._input.size),l=a.call(l,this._start,r)),s.readAsText(l,this._config.encoding));o||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(l){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(l.target.result)},this._chunkError=function(){this._sendError(s.error)}}function d(t){var s;H.call(this,t=t||{}),this.stream=function(a){return s=a,this._nextChunk()},this._nextChunk=function(){var a,o;if(!this._finished)return a=this._config.chunkSize,s=a?(o=s.substring(0,a),s.substring(a)):(o=s,""),this._finished=!s,this.parseChunk(o)}}function $(t){H.call(this,t=t||{});var s=[],a=!0,o=!1;this.pause=function(){H.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){H.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(l){this._input=l,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):a=!0},this._streamData=Z(function(l){try{s.push(typeof l=="string"?l:l.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(r){this._streamError(r)}},this),this._streamError=Z(function(l){this._streamCleanUp(),this._sendError(l)},this),this._streamEnd=Z(function(){this._streamCleanUp(),o=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Q(t){var s,a,o,l,r=Math.pow(2,53),w=-r,T=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,I=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,p=this,S=0,i=0,L=!1,c=!1,b=[],h={data:[],errors:[],meta:{}};function q(v){return t.skipEmptyLines==="greedy"?v.join("").trim()==="":v.length===1&&v[0].length===0}function V(){if(h&&o&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),o=!1),t.skipEmptyLines&&(h.data=h.data.filter(function(x){return!q(x)})),Y()){let x=function(W,J){E(t.transformHeader)&&(W=t.transformHeader(W,J)),b.push(W)};if(h)if(Array.isArray(h.data[0])){for(var v=0;Y()&&v<h.data.length;v++)h.data[v].forEach(x);h.data.splice(0,1)}else h.data.forEach(x)}function N(x,W){for(var J=t.header?{}:[],R=0;R<x.length;R++){var D=R,j=x[R],j=((se,f)=>(M=>(t.dynamicTypingFunction&&t.dynamicTyping[M]===void 0&&(t.dynamicTyping[M]=t.dynamicTypingFunction(M)),(t.dynamicTyping[M]||t.dynamicTyping)===!0))(se)?f==="true"||f==="TRUE"||f!=="false"&&f!=="FALSE"&&((M=>{if(T.test(M)&&(M=parseFloat(M),w<M&&M<r))return 1})(f)?parseFloat(f):I.test(f)?new Date(f):f===""?null:f):f)(D=t.header?R>=b.length?"__parsed_extra":b[R]:D,j=t.transform?t.transform(j,D):j);D==="__parsed_extra"?(J[D]=J[D]||[],J[D].push(j)):J[D]=j}return t.header&&(R>b.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+b.length+" fields but parsed "+R,i+W):R<b.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+b.length+" fields but parsed "+R,i+W)),J}var U;h&&(t.header||t.dynamicTyping||t.transform)&&(U=1,!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(N),U=h.data.length):h.data=N(h.data,0),t.header&&h.meta&&(h.meta.fields=b),i+=U)}function Y(){return t.header&&b.length===0}function te(v,N,U,x){v={type:v,code:N,message:U},x!==void 0&&(v.row=x),h.errors.push(v)}E(t.step)&&(l=t.step,t.step=function(v){h=v,Y()?V():(V(),h.data.length!==0&&(S+=v.data.length,t.preview&&S>t.preview?a.abort():(h.data=h.data[0],l(h,p))))}),this.parse=function(v,N,U){var x=t.quoteChar||'"',x=(t.newline||(t.newline=this.guessLineEndings(v,x)),o=!1,t.delimiter?E(t.delimiter)&&(t.delimiter=t.delimiter(v),h.meta.delimiter=t.delimiter):((x=((W,J,R,D,j)=>{var se,f,M,le;j=j||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var de=0;de<j.length;de++){for(var re,xe=j[de],X=0,ae=0,G=0,ee=(M=void 0,new P({comments:D,delimiter:xe,newline:J,preview:10}).parse(W)),ne=0;ne<ee.data.length;ne++)R&&q(ee.data[ne])?G++:(re=ee.data[ne].length,ae+=re,M===void 0?M=re:0<re&&(X+=Math.abs(re-M),M=re));0<ee.data.length&&(ae/=ee.data.length-G),(f===void 0||X<=f)&&(le===void 0||le<ae)&&1.99<ae&&(f=X,se=xe,le=ae)}return{successful:!!(t.delimiter=se),bestDelimiter:se}})(v,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=x.bestDelimiter:(o=!0,t.delimiter=n.DefaultDelimiter),h.meta.delimiter=t.delimiter),be(t));return t.preview&&t.header&&x.preview++,s=v,a=new P(x),h=a.parse(s,N,U),V(),L?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,a.abort(),s=E(t.chunk)?"":s.substring(a.getCharIndex())},this.resume=function(){p.streamer._halted?(L=!1,p.streamer.parseChunk(s,!0)):setTimeout(p.resume,3)},this.aborted=function(){return c},this.abort=function(){c=!0,a.abort(),h.meta.aborted=!0,E(t.complete)&&t.complete(h),s=""},this.guessLineEndings=function(W,x){W=W.substring(0,1048576);var x=new RegExp(A(x)+"([^]*?)"+A(x),"gm"),U=(W=W.replace(x,"")).split("\r"),x=W.split(`
`),W=1<x.length&&x[0].length<U[0].length;if(U.length===1||W)return`
`;for(var J=0,R=0;R<U.length;R++)U[R][0]===`
`&&J++;return J>=U.length/2?`\r
`:"\r"}}function A(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(t){var s=(t=t||{}).delimiter,a=t.newline,o=t.comments,l=t.step,r=t.preview,w=t.fastMode,T=null,I=!1,p=t.quoteChar==null?'"':t.quoteChar,S=p;if(t.escapeChar!==void 0&&(S=t.escapeChar),(typeof s!="string"||-1<n.BAD_DELIMITERS.indexOf(s))&&(s=","),o===s)throw new Error("Comment character same as delimiter");o===!0?o="#":(typeof o!="string"||-1<n.BAD_DELIMITERS.indexOf(o))&&(o=!1),a!==`
`&&a!=="\r"&&a!==`\r
`&&(a=`
`);var i=0,L=!1;this.parse=function(c,b,h){if(typeof c!="string")throw new Error("Input must be a string");var q=c.length,V=s.length,Y=a.length,te=o.length,v=E(l),N=[],U=[],x=[],W=i=0;if(!c)return X();if(w||w!==!1&&c.indexOf(p)===-1){for(var J=c.split(a),R=0;R<J.length;R++){if(x=J[R],i+=x.length,R!==J.length-1)i+=a.length;else if(h)return X();if(!o||x.substring(0,te)!==o){if(v){if(N=[],le(x.split(s)),ae(),L)return X()}else le(x.split(s));if(r&&r<=R)return N=N.slice(0,r),X(!0)}}return X()}for(var D=c.indexOf(s,i),j=c.indexOf(a,i),se=new RegExp(A(S)+A(p),"g"),f=c.indexOf(p,i);;)if(c[i]===p)for(f=i,i++;;){if((f=c.indexOf(p,f+1))===-1)return h||U.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:N.length,index:i}),re();if(f===q-1)return re(c.substring(i,f).replace(se,p));if(p===S&&c[f+1]===S)f++;else if(p===S||f===0||c[f-1]!==S){D!==-1&&D<f+1&&(D=c.indexOf(s,f+1));var M=de((j=j!==-1&&j<f+1?c.indexOf(a,f+1):j)===-1?D:Math.min(D,j));if(c.substr(f+1+M,V)===s){x.push(c.substring(i,f).replace(se,p)),c[i=f+1+M+V]!==p&&(f=c.indexOf(p,i)),D=c.indexOf(s,i),j=c.indexOf(a,i);break}if(M=de(j),c.substring(f+1+M,f+1+M+Y)===a){if(x.push(c.substring(i,f).replace(se,p)),xe(f+1+M+Y),D=c.indexOf(s,i),f=c.indexOf(p,i),v&&(ae(),L))return X();if(r&&N.length>=r)return X(!0);break}U.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:N.length,index:i}),f++}}else if(o&&x.length===0&&c.substring(i,i+te)===o){if(j===-1)return X();i=j+Y,j=c.indexOf(a,i),D=c.indexOf(s,i)}else if(D!==-1&&(D<j||j===-1))x.push(c.substring(i,D)),i=D+V,D=c.indexOf(s,i);else{if(j===-1)break;if(x.push(c.substring(i,j)),xe(j+Y),v&&(ae(),L))return X();if(r&&N.length>=r)return X(!0)}return re();function le(G){N.push(G),W=i}function de(G){var ee=0;return ee=G!==-1&&(G=c.substring(f+1,G))&&G.trim()===""?G.length:ee}function re(G){return h||(G===void 0&&(G=c.substring(i)),x.push(G),i=q,le(x),v&&ae()),X()}function xe(G){i=G,le(x),x=[],j=c.indexOf(a,i)}function X(G){if(t.header&&!b&&N.length&&!I){var ee=N[0],ne=Object.create(null),Ne=new Set(ee);let Oe=!1;for(let ce=0;ce<ee.length;ce++){let ie=ee[ce];if(ne[ie=E(t.transformHeader)?t.transformHeader(ie,ce):ie]){let pe,Le=ne[ie];for(;pe=ie+"_"+Le,Le++,Ne.has(pe););Ne.add(pe),ee[ce]=pe,ne[ie]++,Oe=!0,(T=T===null?{}:T)[pe]=ie}else ne[ie]=1,ee[ce]=ie;Ne.add(ie)}Oe&&console.warn("Duplicate headers found and renamed."),I=!0}return{data:N,errors:U,meta:{delimiter:s,linebreak:a,aborted:L,truncated:!!G,cursor:W+(b||0),renamedHeaders:T}}}function ae(){l(X()),N=[],U=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return i}}function ue(t){var s=t.data,a=F[s.workerId],o=!1;if(s.error)a.userError(s.error,s.file);else if(s.results&&s.results.data){var l={abort:function(){o=!0,ge(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:me,resume:me};if(E(a.userStep)){for(var r=0;r<s.results.data.length&&(a.userStep({data:s.results.data[r],errors:s.results.errors,meta:s.results.meta},l),!o);r++);delete s.results}else E(a.userChunk)&&(a.userChunk(s.results,l,s.file),delete s.results)}s.finished&&!o&&ge(s.workerId,s.results)}function ge(t,s){var a=F[t];E(a.userComplete)&&a.userComplete(s),a.terminate(),delete F[t]}function me(){throw new Error("Not implemented.")}function be(t){if(typeof t!="object"||t===null)return t;var s,a=Array.isArray(t)?[]:{};for(s in t)a[s]=be(t[s]);return a}function Z(t,s){return function(){t.apply(s,arguments)}}function E(t){return typeof t=="function"}return n.parse=function(t,s){var a=(s=s||{}).dynamicTyping||!1;if(E(a)&&(s.dynamicTypingFunction=a,a={}),s.dynamicTyping=a,s.transform=!!E(s.transform)&&s.transform,!s.worker||!n.WORKERS_SUPPORTED)return a=null,n.NODE_STREAM_INPUT,typeof t=="string"?(t=(o=>o.charCodeAt(0)!==65279?o:o.slice(1))(t),a=new(s.download?B:d)(s)):t.readable===!0&&E(t.read)&&E(t.on)?a=new $(s):(k.File&&t instanceof File||t instanceof Object)&&(a=new u(s)),a.stream(t);(a=(()=>{var o;return!!n.WORKERS_SUPPORTED&&(o=(()=>{var l=k.URL||k.webkitURL||null,r=O.toString();return n.BLOB_URL||(n.BLOB_URL=l.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(o=new k.Worker(o)).onmessage=ue,o.id=K++,F[o.id]=o)})()).userStep=s.step,a.userChunk=s.chunk,a.userComplete=s.complete,a.userError=s.error,s.step=E(s.step),s.chunk=E(s.chunk),s.complete=E(s.complete),s.error=E(s.error),delete s.worker,a.postMessage({input:t,config:s,workerId:a.id})},n.unparse=function(t,s){var a=!1,o=!0,l=",",r=`\r
`,w='"',T=w+w,I=!1,p=null,S=!1,i=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||n.BAD_DELIMITERS.filter(function(b){return s.delimiter.indexOf(b)!==-1}).length||(l=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(a=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(I=s.skipEmptyLines),typeof s.newline=="string"&&(r=s.newline),typeof s.quoteChar=="string"&&(w=s.quoteChar),typeof s.header=="boolean"&&(o=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");p=s.columns}s.escapeChar!==void 0&&(T=s.escapeChar+w),s.escapeFormulae instanceof RegExp?S=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(S=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(w),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return L(null,t,I);if(typeof t[0]=="object")return L(p||Object.keys(t[0]),t,I)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||p),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),L(t.fields||[],t.data||[],I);throw new Error("Unable to serialize unrecognized input");function L(b,h,q){var V="",Y=(typeof b=="string"&&(b=JSON.parse(b)),typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(b)&&0<b.length),te=!Array.isArray(h[0]);if(Y&&o){for(var v=0;v<b.length;v++)0<v&&(V+=l),V+=c(b[v],v);0<h.length&&(V+=r)}for(var N=0;N<h.length;N++){var U=(Y?b:h[N]).length,x=!1,W=Y?Object.keys(h[N]).length===0:h[N].length===0;if(q&&!Y&&(x=q==="greedy"?h[N].join("").trim()==="":h[N].length===1&&h[N][0].length===0),q==="greedy"&&Y){for(var J=[],R=0;R<U;R++){var D=te?b[R]:R;J.push(h[N][D])}x=J.join("").trim()===""}if(!x){for(var j=0;j<U;j++){0<j&&!W&&(V+=l);var se=Y&&te?b[j]:j;V+=c(h[N][se],j)}N<h.length-1&&(!q||0<U&&!W)&&(V+=r)}}return V}function c(b,h){var q,V;return b==null?"":b.constructor===Date?JSON.stringify(b).slice(1,25):(V=!1,S&&typeof b=="string"&&S.test(b)&&(b="'"+b,V=!0),q=b.toString().replace(i,T),(V=V||a===!0||typeof a=="function"&&a(b,h)||Array.isArray(a)&&a[h]||((Y,te)=>{for(var v=0;v<te.length;v++)if(-1<Y.indexOf(te[v]))return!0;return!1})(q,n.BAD_DELIMITERS)||-1<q.indexOf(l)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?w+q+w:q)}},n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!y&&!!k.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=P,n.ParserHandle=Q,n.NetworkStreamer=B,n.FileStreamer=u,n.StringStreamer=d,n.ReadableStreamStreamer=$,k.jQuery&&((z=k.jQuery).fn.parse=function(t){var s=t.config||{},a=[];return this.each(function(r){if(!(z(this).prop("tagName").toUpperCase()==="INPUT"&&z(this).attr("type").toLowerCase()==="file"&&k.FileReader)||!this.files||this.files.length===0)return!0;for(var w=0;w<this.files.length;w++)a.push({file:this.files[w],inputElem:this,instanceConfig:z.extend({},s)})}),o(),this;function o(){if(a.length===0)E(t.complete)&&t.complete();else{var r,w,T,I,p=a[0];if(E(t.before)){var S=t.before(p.file,p.inputElem);if(typeof S=="object"){if(S.action==="abort")return r="AbortError",w=p.file,T=p.inputElem,I=S.reason,void(E(t.error)&&t.error({name:r},w,T,I));if(S.action==="skip")return void l();typeof S.config=="object"&&(p.instanceConfig=z.extend(p.instanceConfig,S.config))}else if(S==="skip")return void l()}var i=p.instanceConfig.complete;p.instanceConfig.complete=function(L){E(i)&&i(L,p.file,p.inputElem),l()},n.parse(p.file,p.instanceConfig)}}function l(){a.splice(0,1),o()}}),C&&(k.onmessage=function(t){t=t.data,n.WORKER_ID===void 0&&t&&(n.WORKER_ID=t.workerId),typeof t.input=="string"?k.postMessage({workerId:n.WORKER_ID,results:n.parse(t.input,t.config),finished:!0}):(k.File&&t.input instanceof File||t.input instanceof Object)&&(t=n.parse(t.input,t.config))&&k.postMessage({workerId:n.WORKER_ID,results:t,finished:!0})}),(B.prototype=Object.create(H.prototype)).constructor=B,(u.prototype=Object.create(H.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,($.prototype=Object.create(H.prototype)).constructor=$,n})})($e);var nt=$e.exports;const lt=Qe(nt);function ot(){const g=ye(),[m,O]=_.useState(null),[k,z]=_.useState(!0);_.useEffect(()=>{y();const K=setInterval(y,3e4);return()=>clearInterval(K)},[]);const y=async()=>{var K;try{const n=await fetch(`${Ze()}/workflows/sla-stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const H=await n.json();O(H)}catch(n){if((K=n==null?void 0:n.message)!=null&&K.includes("Failed to fetch")||(n==null?void 0:n.code)==="ERR_NETWORK")return;console.error("Failed to fetch SLA stats:",n)}finally{z(!1)}};if(k)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading SLA stats"})]})});if(!m)return null;const C=parseFloat(m.complianceRate),F=()=>C>=95?"text-green-600":C>=80?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SLA Performance"})]}),e.jsx("button",{onClick:()=>g("/sla-policies"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"View Details â†’"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Compliance Rate"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:`text-3xl font-bold ${F()}`,children:[m.complianceRate,"%"]}),e.jsx(De,{className:`w-5 h-5 ${F()}`})]})]}),e.jsx(he,{className:`w-12 h-12 ${F()} opacity-20`})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:m.onTrack}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"On Track"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Pe,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:m.atRisk}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"At Risk"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Pe,{className:"w-5 h-5 text-red-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:m.breached}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Breached"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ve,{className:"w-5 h-5 text-blue-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:m.total}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Tickets"})]})]}),(m.responseBreaches>0||m.resolutionBreaches>0)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-400 mb-2",children:"Breach Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Response:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:m.responseBreaches})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Resolution:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:m.resolutionBreaches})]})]})]})]})]})}function dt(){const g=ye(),[m,O]=_.useState({total:0,active:0,paused:0,recentExecutions:0}),[k,z]=_.useState(!0),[y,C]=_.useState(!1);_.useEffect(()=>{F();const K=setInterval(F,3e4);return()=>clearInterval(K)},[]);const F=async()=>{var K,n,H;try{const u=(await et().get("/workflows/templates")).data;Array.isArray(u)?O({total:u.length,active:u.filter(d=>d.isActive).length,paused:u.filter(d=>!d.isActive).length,recentExecutions:0}):(console.error("API returned non-array data:",u),O({total:0,active:0,paused:0,recentExecutions:0}))}catch(B){if((B==null?void 0:B.code)==="ERR_NETWORK"||(K=B==null?void 0:B.message)!=null&&K.includes("Network Error")||(n=B==null?void 0:B.message)!=null&&n.includes("Failed to fetch")){O({total:0,active:0,paused:0,recentExecutions:0}),z(!1);return}((H=B.response)==null?void 0:H.status)===403?C(!0):console.error("Failed to fetch workflow stats:",B),O({total:0,active:0,paused:0,recentExecutions:0})}finally{z(!1)}};return k?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading workflow stats"})]})}):y?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Automation"})]}),e.jsx("button",{onClick:()=>g("/workflows"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Manage â†’"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:m.total})]}),e.jsx(st,{className:"w-12 h-12 text-purple-600 opacity-20"})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(rt,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:m.active}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(at,{className:"w-5 h-5 text-gray-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:m.paused}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Paused"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>g("/workflows"),className:"flex-1 px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Workflows"}),e.jsx("button",{onClick:()=>g("/sla-policies"),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"SLA"}),e.jsx("button",{onClick:()=>g("/assignment-rules"),className:"flex-1 px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Rules"})]})]})]})}const oe={blue:"#3B82F6",green:"#10B981",yellow:"#F59E0B",red:"#EF4444",purple:"#8B5CF6",gray:"#6B7280"},Ae=({active:g,payload:m,label:O})=>{const k=document.documentElement.classList.contains("dark");return g&&m&&m.length?e.jsxs("div",{style:{backgroundColor:k?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:k?"1px solid #4B5563":"1px solid #e0e0e0",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[O&&e.jsx("p",{style:{fontWeight:"bold",color:k?"#F3F4F6":"#1F2937",marginBottom:"8px",fontSize:"14px"},children:O}),m.map((z,y)=>e.jsxs("p",{style:{color:k?"#D1D5DB":"#4B5563",margin:"4px 0",fontSize:"13px"},children:[e.jsxs("span",{style:{color:z.color,fontWeight:"600"},children:[z.name,":"]})," ",z.value]},`item-${y}`))]}):null};function ct(){const g=ye(),m=ke(r=>r.assets),O=ke(r=>r.fetchAssets),k=ke(r=>r.bulkCreateAssets),z=ke(r=>r.isLoading),y=fe(r=>r.tickets),C=fe(r=>r.fetchTickets),F=fe(r=>r.isLoading),K=Ee(r=>r.users),n=Ee(r=>r.fetchUsers),H=Ee(r=>r.isLoading),u=Te(z||F||H,2e3),d=_.useRef(null),[$,Q]=_.useState(!1),[A,P]=_.useState(null),[ue,ge]=_.useState([]),[me,be]=_.useState(!0),[Z,E]=_.useState(document.documentElement.classList.contains("dark"));_.useEffect(()=>{O(),C(),n()},[O,C,n]),_.useEffect(()=>{const r=new MutationObserver(()=>{E(document.documentElement.classList.contains("dark"))});return r.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()},[]),_.useEffect(()=>{const r=()=>({open:y.filter(c=>c.status==="open").length,in_progress:y.filter(c=>c.status==="in_progress").length,closed:y.filter(c=>c.status==="closed").length}),w=new Date,T=r(),I=Array.from({length:20},(c,b)=>({time:new Date(w.getTime()-(19-b)*18e4).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),open:T.open,in_progress:T.in_progress,closed:T.closed,total:T.open+T.in_progress+T.closed}));ge(I);let p=null;const S=()=>{!document.hidden&&!p&&(p=setInterval(()=>{if(!document.hidden){const c=r(),b=c.open+c.in_progress+c.closed;ge(h=>[...h.slice(1),{time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),...c,total:b}]),C()}},3e5))},i=()=>{p&&(clearInterval(p),p=null)},L=()=>{document.hidden?i():S()};return document.addEventListener("visibilitychange",L),S(),()=>{i(),document.removeEventListener("visibilitychange",L)}},[y,C]);const t=_.useMemo(()=>[{title:"Total Assets",value:m.length,detail:`${m.filter(r=>r.status==="assigned").length} assigned`,color:"theme-primary"},{title:"Open Tickets",value:y.filter(r=>["open","in_progress"].includes(r.status)).length,detail:`${y.filter(r=>r.priority==="high"||r.priority==="critical").length} high priority`,color:"bg-yellow-500"},{title:"Total Users",value:K.length,detail:`${K.filter(r=>r.role==="ADMIN").length} admins`,color:"bg-purple-500"},{title:"Maintenance",value:m.filter(r=>["maintenance","repair"].includes(r.status)).length,detail:"Assets in service",color:"bg-red-500"}],[m,y,K]),s=_.useMemo(()=>[{name:"Open",value:y.filter(r=>r.status==="open").length,color:oe.blue},{name:"In Progress",value:y.filter(r=>r.status==="in_progress").length,color:oe.purple},{name:"Closed",value:y.filter(r=>r.status==="closed").length,color:oe.gray}],[y]),a=_.useMemo(()=>[{name:"Low",value:y.filter(r=>r.priority==="low").length,color:oe.green},{name:"Medium",value:y.filter(r=>r.priority==="medium").length,color:oe.yellow},{name:"High",value:y.filter(r=>r.priority==="high").length,color:oe.red},{name:"Critical",value:y.filter(r=>r.priority==="critical").length,color:oe.red}],[y]);_.useMemo(()=>[{name:"Available",value:m.filter(r=>r.status==="available").length},{name:"Assigned",value:m.filter(r=>r.status==="assigned").length},{name:"Maintenance",value:m.filter(r=>["maintenance","repair"].includes(r.status)).length},{name:"Retired",value:m.filter(r=>r.status==="retired").length}],[m]);const o=()=>{const r=`Name,SerialNumber,RemoteID,AssetType,Condition,AssignedTo,ScannedBy,ScanDateTime,Description,Ownership,Office Location,Extension,Deskphones,Mouse,Keyboard,Department
Dell Laptop,SN123456789,RMT-001,Laptop,Good,john@company.com,admin@company.com,2024-01-15,Dell Latitude 5520,Company,Building A - Floor 2,2501,IP Phone Model X,Wireless Mouse,Mechanical Keyboard,IT
HP Monitor,SN987654321,RMT-002,Monitor,Excellent,jane@company.com,admin@company.com,2024-01-16,HP E24 24 inch,Company,Building A - Floor 3,2502,N/A,Wired Mouse,Wireless Keyboard,Marketing`,w=new Blob([r],{type:"text/csv"}),T=window.URL.createObjectURL(w),I=document.createElement("a");I.href=T,I.download="asset_import_template.csv",I.click(),window.URL.revokeObjectURL(T)},l=async r=>{var T;const w=(T=r.target.files)==null?void 0:T[0];if(w){Q(!0),P(null);try{const S=(await new Promise((i,L)=>{lt.parse(w,{header:!0,skipEmptyLines:!0,complete:c=>i(c.data),error:c=>L(c)})})).map(i=>{const L={name:String(i.Name||i.name||"").trim(),serial_number:String(i.SerialNumber||i.serialnumber||i.serial_number||"").trim(),remote_id:String(i.RemoteID||i.remoteid||i.remote_id||"").trim(),asset_type:String(i.AssetType||i.assettype||"").trim(),condition:String(i.Condition||i.condition||"").trim(),assigned_to:String(i.AssignedTo||i.assignedto||"").trim(),scanned_by:String(i.ScannedBy||i.scannedby||"").trim(),scan_datetime:String(i.ScanDateTime||i.scandatetime||"").trim(),description:String(i.Description||i.description||"").trim(),ownership:String(i.Ownership||i.ownership||i.Onwership||"").trim(),office_location:String(i["Office Location"]||i.office_location||i.officelocation||"").trim(),extension:String(i.Extension||i.extension||"").trim(),deskphones:String(i.Deskphones||i.deskphones||"").trim(),mouse:String(i.Mouse||i.mouse||"").trim(),keyboard:String(i.Keyboard||i.keyboard||"").trim(),department:String(i.Department||i.department||"").trim(),status:"available"},c=String(i.AssetID||i.assetid||"").trim();return c&&(L.asset_code=c),L}).filter(i=>i.name);if(S.length===0)throw new Error("No valid assets found in CSV. Ensure Name column is filled.");await k(S),P({type:"success",message:`Successfully imported ${S.length} assets!`})}catch(I){P({type:"error",message:`Upload failed: ${(I==null?void 0:I.message)??"Unknown error"}`})}finally{Q(!1),d.current&&(d.current.value="")}}};return u?e.jsx(Re,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1 text-gray-900 dark:text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Manage assets, tickets, and users"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:t.map(r=>e.jsxs("div",{className:"admin-stat-card group relative border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm hover:shadow-md dark:hover:shadow-xl transition-all duration-300",role:"article","aria-label":`${r.title}: ${r.value}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 sm:mb-3",children:r.title}),e.jsx("p",{className:"text-2xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1 sm:mb-2",children:r.value}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:r.detail})]}),e.jsx("div",{className:`flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ${r.color==="theme-primary"?"":r.color}`,style:r.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-white dark:bg-gray-900 rounded-full opacity-80"})})]}),e.jsx("style",{children:`
              .admin-stat-card:hover .stat-hover-border {
                border-color: var(--color-primary) !important;
              }
            `}),e.jsx("div",{className:"stat-hover-border absolute inset-0 border-2 border-transparent rounded-xl transition-colors pointer-events-none"})]},r.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(ot,{}),e.jsx(dt,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Status"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-3 sm:mb-4",children:s.map((r,w)=>e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 p-1.5 sm:p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full flex-shrink-0",style:{backgroundColor:r.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:r.name}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white",children:r.value})]})]},w))}),e.jsx(_e,{width:"100%",height:300,children:e.jsxs(ze,{children:[e.jsx(Ke,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,value:w,percent:T})=>`${r}: ${w} (${(T*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:s.map((r,w)=>e.jsx(Ie,{fill:r.color},`cell-${w}`))}),e.jsx(Ce,{content:e.jsx(Ae,{})}),e.jsx(He,{})]})})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Priority"}),e.jsx(_e,{width:"100%",height:300,children:e.jsxs(qe,{data:a,children:[e.jsx(Me,{strokeDasharray:"3 3",stroke:Z?"#374151":"#e5e7eb"}),e.jsx(Fe,{dataKey:"name",stroke:Z?"#9CA3AF":"#6B7280"}),e.jsx(Be,{stroke:Z?"#9CA3AF":"#6B7280"}),e.jsx(Ce,{content:e.jsx(Ae,{})}),e.jsx(Ve,{dataKey:"value",fill:oe.blue,children:a.map((r,w)=>e.jsx(Ie,{fill:r.color},`cell-${w}`))})]})})]}),e.jsxs("div",{className:"relative border dark:border-gray-700 rounded-lg bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20 p-4 sm:p-5 md:p-6 shadow-lg lg:col-span-2 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),e.jsx("div",{className:"absolute bottom-10 left-1/2 w-32 h-32 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"ðŸŽ« Live Ticket Traffic Monitor"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time ticket flow â€¢ Updates every 3 minutes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${me?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:me?"LIVE":"PAUSED"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Open"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-400 to-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Closed"})]})]}),e.jsx(_e,{width:"100%",height:250,children:e.jsxs(Je,{data:ue,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorOpen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorInProgress",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorClosed",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]})]}),e.jsx(Me,{strokeDasharray:"3 3",stroke:Z?"#374151":"#e0e0e0",strokeOpacity:.3}),e.jsx(Fe,{dataKey:"time",stroke:Z?"#9CA3AF":"#6B7280",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:70}),e.jsx(Be,{stroke:Z?"#9CA3AF":"#6B7280",style:{fontSize:"12px"}}),e.jsx(Ce,{content:e.jsx(Ae,{})}),e.jsx(Se,{type:"monotone",dataKey:"open",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorOpen)",animationDuration:1e3,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(Se,{type:"monotone",dataKey:"in_progress",stroke:"#F59E0B",strokeWidth:3,fillOpacity:1,fill:"url(#colorInProgress)",animationDuration:1e3,dot:{fill:"#F59E0B",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(Se,{type:"monotone",dataKey:"closed",stroke:"#10B981",strokeWidth:3,fillOpacity:1,fill:"url(#colorClosed)",animationDuration:1e3,dot:{fill:"#10B981",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}})]})})]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Bulk Asset Import (CSV)"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Asset codes are automatically generated - no need to provide them in the CSV"})]}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[A&&e.jsx("div",{className:`rounded-md border p-2 sm:p-3 text-sm ${A.type==="success"?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-800 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-300"}`,children:A.message}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-md p-2 sm:p-3 text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Asset codes will be automatically generated for all imported assets. You only need to provide the asset name and other details."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("button",{onClick:o,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:"Download Template"}),e.jsx("input",{ref:d,type:"file",accept:".csv",onChange:l,className:"hidden"}),e.jsx("button",{onClick:()=>{var r;return(r=d.current)==null?void 0:r.click()},disabled:$,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 text-sm sm:text-base flex items-center gap-2",children:$?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Uploading"})]}):"Upload CSV File"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Asset Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>g("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Manage All Assets (",m.length,")"]}),e.jsxs("button",{onClick:()=>g("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Assets in Maintenance (",m.filter(r=>["maintenance","repair"].includes(r.status)).length,")"]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Ticket Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>g("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Open Tickets (",y.filter(r=>r.status==="open").length,")"]}),e.jsxs("button",{onClick:()=>g("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["High Priority (",y.filter(r=>r.priority==="high"||r.priority==="critical").length,")"]})]})]})]})]})}function ht(){const g=ye(),{tickets:m,fetchTickets:O,isLoading:k}=fe(),z=Te(k,2e3),y=JSON.parse(localStorage.getItem("user")||"{}");_.useEffect(()=>{O()},[O]);const C=_.useMemo(()=>m.filter(d=>d.assignedToId===y.id),[m,y.id]),F=_.useMemo(()=>m.filter(d=>d.assignedToId===null||d.assignedToId===void 0),[m]),K=_.useMemo(()=>{const d=C.filter(P=>P.status==="open"),$=C.filter(P=>P.status==="in_progress"),Q=C.filter(P=>P.status==="closed"),A=C.filter(P=>P.priority==="high"||P.priority==="critical");return[{title:"Unassigned Tickets",value:F.length,detail:"Available to claim",color:"bg-purple-500",icon:Ue,action:()=>g("/tickets")},{title:"My Open Tickets",value:d.length,detail:"Waiting to start",color:"theme-primary",icon:je,action:()=>g("/my-tasks?status=open")},{title:"In Progress",value:$.length,detail:"Currently working on",color:"bg-yellow-500",icon:ve,action:()=>g("/my-tasks?status=in_progress")},{title:"Completed Today",value:Q.filter(P=>{const ue=new Date().toDateString();return new Date(P.updatedAt||P.createdAt).toDateString()===ue}).length,detail:`${Q.length} total completed`,color:"bg-green-500",icon:he,action:()=>g("/my-tasks?status=closed")},{title:"High Priority",value:A.length,detail:"Needs attention",color:"bg-red-500",icon:we,action:()=>g("/my-tasks?priority=high")}]},[C,F,g]),n=_.useMemo(()=>C.filter(d=>d.status!=="closed").sort((d,$)=>{const Q={critical:0,high:1,medium:2,low:3},A=Q[d.priority]??4,P=Q[$.priority]??4;return A!==P?A-P:new Date($.createdAt).getTime()-new Date(d.createdAt).getTime()}).slice(0,5),[C]),H=d=>{switch(d){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},B=d=>{switch(d){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},u=d=>{if(d==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return z?e.jsx(Re,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",y.name||"Technician","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's your workload overview for today"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:K.map((d,$)=>{const Q=d.icon;return e.jsxs("div",{onClick:d.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${d.color==="theme-primary"?"":d.color}`,style:d.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsx(De,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:d.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:d.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:d.detail})]},$)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>g("/my-tasks"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All â†’"})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No active tickets assigned"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:F.length>0?`There are ${F.length} unassigned ticket${F.length===1?"":"s"} waiting to be claimed.`:"All tickets are currently assigned or completed."}),F.length>0&&e.jsx("button",{onClick:()=>g("/tickets"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"View Unassigned Tickets"})]}):e.jsx("div",{className:"space-y-4",children:n.map(d=>e.jsx("div",{onClick:()=>g(`/tickets/${d.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",d.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${H(d.priority)}`,children:d.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${B(d.status)}`,style:u(d.status),children:d.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:d.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:["Created ",We(d.createdAt)]})]})})},d.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>g("/my-tasks"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(je,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"View My Tasks"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"See all assigned tickets"})]}),e.jsxs("button",{onClick:()=>g("/tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(we,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"All Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Browse all tickets"})]}),e.jsxs("button",{onClick:()=>g("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(he,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function ut(){const g=ye(),{tickets:m,fetchTickets:O,isLoading:k}=fe(),z=Te(k,2e3),y=JSON.parse(localStorage.getItem("user")||"{}");_.useEffect(()=>{O()},[O]);const C=_.useMemo(()=>m.filter(u=>u.createdById===y.id),[m,y.id]),F=_.useMemo(()=>{const u=C.filter(A=>A.status==="open"),d=C.filter(A=>A.status==="in_progress"),$=C.filter(A=>A.status==="closed"),Q=C.filter(A=>(A.priority==="high"||A.priority==="critical")&&A.status!=="closed");return[{title:"My Open Tickets",value:u.length,detail:"Waiting for response",color:"theme-primary",icon:je,action:()=>g("/my-tickets?status=open")},{title:"In Progress",value:d.length,detail:"Being worked on",color:"bg-yellow-500",icon:ve,action:()=>g("/my-tickets?status=in_progress")},{title:"High Priority",value:Q.length,detail:"Needs urgent attention",color:"bg-red-500",icon:we,action:()=>g("/my-tickets?priority=high")},{title:"Resolved",value:$.length,detail:"Issues completed",color:"bg-green-500",icon:he,action:()=>g("/my-tickets?status=closed")}]},[C,g]),K=_.useMemo(()=>C.filter(u=>u.status!=="closed").sort((u,d)=>{const $={critical:0,high:1,medium:2,low:3},Q=$[u.priority]??4,A=$[d.priority]??4;return Q!==A?Q-A:new Date(d.createdAt).getTime()-new Date(u.createdAt).getTime()}).slice(0,5),[C]),n=u=>{switch(u){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},H=u=>{switch(u){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},B=u=>{if(u==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return z?e.jsx(Re,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",y.name||"User","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's an overview of your tickets and assets"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:F.map((u,d)=>{const $=u.icon;return e.jsxs("div",{onClick:u.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${u.color==="theme-primary"?"":u.color}`,style:u.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsx(De,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:u.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:u.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:u.detail})]},d)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>g("/my-tickets"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All â†’"})]})}),e.jsx("div",{className:"p-6",children:K.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"All caught up! ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have no active tickets at the moment."}),e.jsx("button",{onClick:()=>g("/tickets/new"),className:"px-6 py-2 text-white rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:"var(--color-primary)"},children:"Create New Ticket"})]}):e.jsx("div",{className:"space-y-4",children:K.map(u=>e.jsx("div",{onClick:()=>g(`/tickets/${u.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",u.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${n(u.priority)}`,children:u.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${H(u.status)}`,style:B(u.status),children:u.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:u.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:u.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Created ",We(u.createdAt)]}),u.assignedTo&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Assigned to: ",u.assignedTo.name||u.assignedTo.email]})]})]})})},u.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>g("/tickets/new"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(je,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Ticket"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Report a new issue"})]}),e.jsxs("button",{onClick:()=>g("/my-tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(we,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View all your tickets"})]}),e.jsxs("button",{onClick:()=>g("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(it,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function jt(){const g=_.useMemo(()=>{const m=localStorage.getItem("user");if(m)try{return JSON.parse(m).role||"USER"}catch(O){return console.error("Error parsing user data:",O),"USER"}return"USER"},[]);return g==="ADMIN"?e.jsx(ct,{}):g==="TECHNICIAN"?e.jsx(ht,{}):e.jsx(ut,{})}export{jt as default};
