import{u as A,n as L,r as i,i as B,h as n,j as e,L as O,P as h,U as x,C as S,G as I,Z as R,m as _}from"./index-Cg06kDLG.js";import{showError as o,showConfirm as g,showSuccess as u}from"./sweetalert-BCvQYi5m.js";import{A as E}from"./arrow-left-BsT7owLZ.js";import{C as p}from"./circle-alert-Cv1odc8t.js";import{C as y}from"./calendar-Bqhn3QQl.js";import{C as k}from"./circle-check-big-75TKEYX3.js";import{M as j}from"./map-pin-DpWQqZ9k.js";import{S as F}from"./square-pen-CBvzYMF0.js";function G(){const l=A(),{id:c}=L(),[N,m]=i.useState(!0),b=B(N,2e3),[t,w]=i.useState(null);i.useEffect(()=>{c&&f()},[c]);const f=async()=>{try{m(!0);const a=await n().get(`/checkout/${c}`);w(a.data)}catch(s){console.error("Failed to fetch checkout:",s),await o("Error","Failed to load checkout details"),l("/checkout")}finally{m(!1)}},v=async()=>{var a,d;if((await g("Check In Asset","Are you sure you want to check in this asset?","Check In","Cancel")).isConfirmed)try{await n().post(`/checkout/${c}/checkin`,{returnCondition:"good"}),await u("Success!","Asset checked in successfully",1500),l("/checkout")}catch(r){console.error("Failed to check in asset:",r),await o("Error",((d=(a=r.response)==null?void 0:a.data)==null?void 0:d.message)||"Failed to check in asset")}},C=async()=>{var a,d;if((await g("Delete Checkout","Are you sure you want to delete this checkout record? This action cannot be undone.","Delete","Cancel")).isConfirmed)try{await n().delete(`/checkout/${c}`),await u("Success!","Checkout deleted successfully",1500),l("/checkout")}catch(r){console.error("Failed to delete checkout:",r),await o("Error",((d=(a=r.response)==null?void 0:a.data)==null?void 0:d.message)||"Failed to delete checkout")}};if(b||!t)return e.jsx(O,{message:"Loading checkout details"});const D=s=>{switch(s){case"checked_out":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"checked_in":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}};return e.jsxs("div",{className:"flex flex-col p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>l("/checkout"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white mb-4",children:[e.jsx(E,{className:"w-5 h-5"}),"Back to Checkouts"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(h,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Checkout Details"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:[t.asset.name," - ",t.asset.asset_code]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-semibold ${D(t.status)}`,children:t.status.replace("_"," ").toUpperCase()}),t.isOverdue&&e.jsxs("span",{className:"px-4 py-2 rounded-lg text-sm font-semibold bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),t.daysOverdue," ",t.daysOverdue===1?"day":"days"," overdue"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Asset Information"]}),e.jsxs("div",{className:"flex gap-4",children:[t.asset.image_url&&e.jsx("img",{src:t.asset.image_url,alt:t.asset.name,className:"w-32 h-32 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Asset Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.asset.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Asset Code"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.asset.asset_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Asset Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.asset.asset_type})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Checkout Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(x,{className:"w-4 h-4"}),"Checked Out To"]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.user.name||t.user.email}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.user.email}),t.user.phone&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.user.phone})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(x,{className:"w-4 h-4"}),"Checked Out By"]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.checkedOutBy.name||t.checkedOutBy.email}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.checkedOutBy.email})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(y,{className:"w-4 h-4"}),"Checkout Date"]}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(t.checkoutDate).toLocaleString()})]}),t.expectedReturnDate&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(S,{className:"w-4 h-4"}),"Expected Return"]}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(t.expectedReturnDate).toLocaleDateString()})]}),t.actualReturnDate&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(k,{className:"w-4 h-4"}),"Actual Return"]}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(t.actualReturnDate).toLocaleString()})]}),t.checkedInBy&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(x,{className:"w-4 h-4"}),"Checked In By"]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.checkedInBy.name||t.checkedInBy.email}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.checkedInBy.email})]}),t.location&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(j,{className:"w-4 h-4"}),"Location"]}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.location})]}),t.purpose&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-1",children:[e.jsx(I,{className:"w-4 h-4"}),"Purpose"]}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.purpose})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Condition"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.condition&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Checkout Condition"}),e.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:t.condition})]}),t.returnCondition&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Return Condition"}),e.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:t.returnCondition})]}),t.notes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Checkout Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.notes})]}),t.returnNotes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Return Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.returnNotes})]})]})]}),t.locationHistory&&t.locationHistory.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Location History"]}),e.jsx("div",{className:"space-y-4",children:t.locationHistory.map(s=>e.jsxs("div",{className:"border-l-2 border-blue-600 dark:border-blue-400 pl-4 pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),s.location]}),s.previousLocation&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["From: ",s.previousLocation]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(s.movedAt).toLocaleString()})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Moved by: ",s.movedBy.name||s.movedBy.email]}),s.reason&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Reason: ",s.reason]}),s.notes&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:s.notes})]},s.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Actions"}),e.jsxs("div",{className:"space-y-3",children:[t.status==="checked_out"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:v,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Check In Asset"]}),e.jsxs("button",{onClick:()=>l(`/checkout/${c}/edit`),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Edit Checkout"]})]}),e.jsxs("button",{onClick:C,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Delete Record"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium capitalize",children:t.status.replace("_"," ")})]}),t.isOverdue&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-400 font-semibold flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Overdue by ",t.daysOverdue," ",t.daysOverdue===1?"day":"days"]})})]})]})]})]})]})}export{G as default};
