import{j as e}from"./vendor-charts-DVp8BQgJ.js";import{u as b,r}from"./vendor-react-CFQdvhEG.js";import{u as N,a as k,L as C,f as S}from"./index-D9yjAaPu.js";import{showError as i,showConfirm as A}from"./sweetalert-DcBwdyhg.js";import{aJ as m,e as L,av as E,aj as h,au as F,a5 as P,ag as D,af as B,ad as I,ak as O}from"./vendor-ui-Bhgb65c8.js";function R(){const o=b(),[p,c]=r.useState(!0),u=N(p,2e3),[d,y]=r.useState([]),[t,f]=r.useState(""),[l,j]=r.useState("all");r.useEffect(()=>{v()},[l]);const v=async()=>{try{c(!0);const a=k(),n={};l!=="all"&&(n.active=l==="active"?"true":"false");const s=await a.get("/inventory/suppliers/list",{params:n});y(s.data.suppliers||[])}catch(a){console.error("Failed to fetch suppliers:",a),await i("Error","Failed to load suppliers")}finally{c(!1)}},w=async a=>{if((await A("Delete Supplier",`Are you sure you want to delete ${a.name}? This action cannot be undone.`,"Delete","Cancel")).isConfirmed)try{await i("Not Implemented","Delete functionality is not yet available")}catch(s){console.error("Failed to delete supplier:",s),await i("Error","Failed to delete supplier")}},x=d.filter(a=>{var s,g;return a.name.toLowerCase().includes(t.toLowerCase())||a.supplierCode.toLowerCase().includes(t.toLowerCase())||((s=a.contactPerson)==null?void 0:s.toLowerCase().includes(t.toLowerCase()))||((g=a.email)==null?void 0:g.toLowerCase().includes(t.toLowerCase()))});return u&&d.length===0?e.jsx(C,{message:"Loading suppliers"}):e.jsxs("div",{className:"flex flex-col p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(m,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"}),"Suppliers"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage your supplier contacts and information"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search suppliers...",value:t,onChange:a=>f(a.target.value),className:"w-full pl-10 pr-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:l,onChange:a=>j(a.target.value),className:"px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"all",children:"All Suppliers"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),e.jsx("button",{onClick:()=>o("/inventory"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:"Back to Inventory"}),e.jsxs("button",{onClick:()=>o("/inventory/suppliers/new"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(h,{className:"w-5 h-5"}),"Add Supplier"]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:x.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:t?"No suppliers found matching your search":"No suppliers found"}),!t&&e.jsxs("button",{onClick:()=>o("/inventory/suppliers/new"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),"Add First Supplier"]})]}):x.map(a=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.name}),a.isActive?e.jsx(F,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(P,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Code: ",a.supplierCode]}),a.contactPerson&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Contact: ",a.contactPerson]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${a.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:a.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-4",children:[a.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`mailto:${a.email}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`tel:${a.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:a.phone})]}),(a.address||a.city||a.country)&&e.jsxs("div",{className:"flex items-start gap-2 md:col-span-2",children:[e.jsx(I,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:[a.address,a.city,a.country].filter(Boolean).join(", ")})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[a._count&&e.jsxs("span",{children:[e.jsx(O,{className:"w-4 h-4 inline mr-1"}),a._count.purchaseOrders," Purchase Orders"]}),a.createdBy&&e.jsxs("span",{children:["Created by ",a.createdBy.name]}),a.createdAt&&e.jsxs("span",{children:["Added ",S(a.createdAt)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{i("Not Implemented","Edit supplier functionality is not yet available")},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>w(a),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})]})})},a.id))})]})}export{R as default};
