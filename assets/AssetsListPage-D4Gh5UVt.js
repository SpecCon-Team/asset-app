import{c as E,f as V,j as e,M as D,u as M,r as n,i as _,L,D as F,m as O,z as o,h as B}from"./index-Cg06kDLG.js";import{u as P}from"./store-TbCt6Qhf.js";import{B as y,U as $,C as z,g as R,e as U,A as X,d as J,a as Y}from"./exportUtils-DzVwQy5B.js";import{C as q}from"./circle-check-big-75TKEYX3.js";import{I as G}from"./info-DksoVWBp.js";import{C as H}from"./circle-x-Dm9zwRfU.js";import"./index-DS-m1PaO.js";import{F as K}from"./file-spreadsheet-UML9dW8H.js";import{E as Q}from"./eye-DMPBUlz_.js";import"./api-BXunHfQQ.js";import"./types-D8_qC6eW.js";import"./loader-circle-BpqhGAdP.js";import"./circle-alert-Cv1odc8t.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=E("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Z={danger:{icon:H,iconColor:"text-red-600 dark:text-red-400",iconBg:"bg-red-100 dark:bg-red-900/30",confirmVariant:"danger"},warning:{icon:V,iconColor:"text-yellow-600 dark:text-yellow-400",iconBg:"bg-yellow-100 dark:bg-yellow-900/30",confirmVariant:"primary"},info:{icon:G,iconColor:"text-blue-600 dark:text-blue-400",iconBg:"bg-blue-100 dark:bg-blue-900/30",confirmVariant:"primary"},success:{icon:q,iconColor:"text-green-600 dark:text-green-400",iconBg:"bg-green-100 dark:bg-green-900/30",confirmVariant:"primary"}};function ee({open:a,onClose:r,onConfirm:g,title:l,message:p,confirmText:m="Confirm",cancelText:c="Cancel",variant:h="warning",isLoading:i=!1}){const d=Z[h],x=d.icon,t=()=>{g()};return e.jsx(D,{isOpen:a,onClose:r,title:"",size:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`mx-auto flex items-center justify-center w-16 h-16 rounded-full ${d.iconBg} mb-4`,children:e.jsx(x,{className:`w-8 h-8 ${d.iconColor}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:l}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:p}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(y,{variant:"secondary",onClick:r,disabled:i,className:"min-w-[100px]",children:c}),e.jsx(y,{variant:d.confirmVariant,onClick:t,isLoading:i,disabled:i,className:"min-w-[100px]",children:m})]})]})})}function he(){const a=M(),[r,g]=n.useState(""),[l,p]=n.useState(""),[m,c]=n.useState(null),[h,i]=n.useState(!1),[d,x]=n.useState(!1),{assets:t,isLoading:k,error:f,fetchAssets:u,deleteAsset:j}=P(),N=_(k,2e3);n.useEffect(()=>{const s=localStorage.getItem("user");s&&JSON.parse(s).role!=="ADMIN"&&a("/my-assets")},[a]),n.useEffect(()=>{u({search:r,status:l})},[r,l,u]);const w=s=>{c(s)},v=async()=>{if(m){i(!0);try{await j(m),o.success("Asset deleted successfully"),c(null)}catch(s){console.error("Failed to delete asset:",s),o.error("Failed to delete asset")}finally{i(!1)}}},C=s=>{a(`/assets/${s}`)},S=()=>{try{const s=R("assets_export","csv");U(t,X,s),o.success(`Exported ${t.length} assets to CSV`)}catch(s){console.error("Export failed:",s),o.error("Failed to export assets")}},A=()=>{try{J(Y,"asset_import_template.csv"),o.success("Import template downloaded successfully")}catch(s){console.error("Template download failed:",s),o.error("Failed to download template")}},I=async s=>{const b=new FormData;b.append("file",s),localStorage.getItem("token");const T=(await B().post("/assets/import-csv",b,{headers:{"Content-Type":"multipart/form-data"}})).data;return await u({search:r,status:l}),T};return N?e.jsx(L,{message:"Loading assets..."}):f?e.jsxs("div",{className:"p-8 text-red-600 dark:text-red-400 bg-gray-50 dark:bg-gray-900 min-h-screen",children:["Error: ",f]}):e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 lg:p-8 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-1",children:"Asset Management"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Manage, assign, and track all assets"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:flex lg:flex-wrap gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:A,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-purple-600 dark:bg-purple-500 text-white rounded-lg hover:bg-purple-700 dark:hover:bg-purple-600 flex items-center justify-center gap-2 transition-colors text-sm sm:text-base min-h-[44px]",title:"Download CSV template for bulk import",children:[e.jsx(K,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Template"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 flex items-center justify-center gap-2 transition-colors text-sm sm:text-base min-h-[44px]",title:"Import assets from CSV",children:[e.jsx($,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Import CSV"})]}),e.jsxs("button",{onClick:S,disabled:t.length===0,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-green-600 dark:bg-green-500 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm sm:text-base min-h-[44px]",title:"Export assets to CSV",children:[e.jsx(F,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Export CSV"})]}),e.jsxs("button",{onClick:()=>a("/assets/new"),className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 flex items-center justify-center gap-2 transition-colors text-sm sm:text-base min-h-[44px]",children:[e.jsx("span",{children:"+"})," ",e.jsx("span",{className:"truncate",children:"Add Asset"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-4 sm:mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Assets"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 sm:mt-2 text-gray-900 dark:text-white",children:t.length})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Available"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 sm:mt-2 text-green-600 dark:text-green-400",children:t.filter(s=>s.status==="available").length})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Assigned"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 sm:mt-2 text-blue-600 dark:text-blue-400",children:t.filter(s=>s.status==="assigned").length})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"In Service"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1 sm:mt-2 text-orange-600 dark:text-orange-400",children:t.filter(s=>["maintenance","repair"].includes(s.status||"")).length})]})]}),e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search by name, code, or type...",value:r,onChange:s=>g(s.target.value),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base min-h-[44px] dark:bg-gray-800 dark:text-white"}),e.jsxs("select",{value:l,onChange:s=>p(s.target.value),className:"px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm sm:text-base min-h-[44px] dark:bg-gray-800 dark:text-white sm:w-auto w-full",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"repair",children:"Repair"}),e.jsx("option",{value:"retired",children:"Retired"})]})]}),t.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 sm:p-12 rounded-lg shadow text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No assets found"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:t.map(s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-4 sm:p-5 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3 sm:mb-4 gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white truncate",children:s.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate",children:s.asset_code})]}),e.jsx("span",{className:`px-2 sm:px-3 py-1 text-xs rounded-full whitespace-nowrap flex-shrink-0 ${s.status==="available"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":s.status==="assigned"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":s.status==="maintenance"||s.status==="repair"?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:s.status})]}),e.jsxs("div",{className:"space-y-1.5 sm:space-y-2 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 w-20 sm:w-24 flex-shrink-0",children:"Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.asset_type||"-"})]}),e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 w-20 sm:w-24 flex-shrink-0",children:"Condition:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.condition||"-"})]}),e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 w-20 sm:w-24 flex-shrink-0",children:"Assigned to:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.assigned_to||"Unassigned"})]}),s.office_location&&e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 w-20 sm:w-24 flex-shrink-0",children:"Location:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.office_location})]}),s.department&&e.jsxs("div",{className:"flex items-center text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 w-20 sm:w-24 flex-shrink-0",children:"Department:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.department})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 sm:pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>C(s.id),className:"flex-1 px-2 sm:px-3 py-2 text-xs sm:text-sm bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded hover:bg-blue-100 dark:hover:bg-blue-900/50 flex items-center justify-center gap-1 sm:gap-2 transition-colors min-h-[40px]",children:[e.jsx(W,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs("button",{onClick:()=>a(`/assets/${s.id}`),className:"flex-1 px-2 sm:px-3 py-2 text-xs sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-center gap-1 sm:gap-2 transition-colors min-h-[40px]",children:[e.jsx(Q,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden xs:inline",children:"View"})]}),e.jsx("button",{onClick:()=>w(s.id),className:"px-2 sm:px-3 py-2 text-xs sm:text-sm bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/50 flex items-center justify-center gap-1 sm:gap-2 transition-colors min-h-[40px]",children:e.jsx(O,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"})})]})]})},s.id))}),e.jsx(ee,{open:!!m,onClose:()=>c(null),onConfirm:v,title:"Delete Asset?",message:"Are you sure you want to delete this asset? This action cannot be undone.",confirmText:"Yes, delete it",cancelText:"Cancel",variant:"danger",isLoading:h}),e.jsx(z,{isOpen:d,onClose:()=>x(!1),onImport:I,title:"Import Assets from CSV",entityType:"assets"})]})}export{he as default};
