import{u as j,m as v,r as m,f as b,j as e,P as y}from"./index-DkOTuXqf.js";import{showError as h,showSuccess as p}from"./sweetalert-BCvQYi5m.js";import{A as w}from"./arrow-left-kj3U_OKI.js";import{D as N}from"./dollar-sign-Bvb7yeHc.js";import{M as S}from"./map-pin-XCojQ5aO.js";function L(){const c=j(),{id:d}=v(),s=d&&d!=="new",[g,u]=m.useState(!1),[t,x]=m.useState({itemCode:"",name:"",description:"",category:"",subcategory:"",unit:"",unitPrice:"",currentStock:"0",minimumStock:"0",maximumStock:"",reorderPoint:"0",reorderQuantity:"0",location:"",binLocation:"",barcode:"",manufacturer:"",imageUrl:""});m.useEffect(()=>{s&&k()},[s,d]);const k=async()=>{var o,i;try{const r=(await b().get(`/inventory/${d}`)).data;x({itemCode:r.itemCode,name:r.name,description:r.description||"",category:r.category,subcategory:r.subcategory||"",unit:r.unit,unitPrice:((o=r.unitPrice)==null?void 0:o.toString())||"",currentStock:r.currentStock.toString(),minimumStock:r.minimumStock.toString(),maximumStock:((i=r.maximumStock)==null?void 0:i.toString())||"",reorderPoint:r.reorderPoint.toString(),reorderQuantity:r.reorderQuantity.toString(),location:r.location||"",binLocation:r.binLocation||"",barcode:r.barcode||"",manufacturer:r.manufacturer||"",imageUrl:r.imageUrl||""})}catch(l){console.error("Failed to fetch item:",l),await h("Error","Failed to load inventory item")}},f=async o=>{var i,l;o.preventDefault(),u(!0);try{const n=b();s?(await n.put(`/inventory/${d}`,t),await p("Success!","Inventory item updated successfully")):(await n.post("/inventory",t),await p("Success!","Inventory item created successfully")),c("/inventory")}catch(n){console.error("Failed to save item:",n),await h("Error",((l=(i=n.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to save inventory item")}finally{u(!1)}},a=o=>{const{name:i,value:l}=o.target;x(n=>({...n,[i]:l}))};return e.jsxs("div",{className:"flex flex-col p-4 md:p-6 lg:p-8 max-w-4xl mx-auto w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>c("/inventory"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white mb-4",children:[e.jsx(w,{className:"w-5 h-5"}),"Back to Inventory"]}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(y,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),s?"Edit Inventory Item":"Add New Item"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:s?"Update inventory item details":"Create a new inventory item"})]}),e.jsxs("form",{onSubmit:f,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 max-w-4xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Item Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"itemCode",value:t.itemCode,onChange:a,required:!0,disabled:s,placeholder:"e.g., ITM-001",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:a,required:!0,placeholder:"e.g., A4 Paper",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description,onChange:a,rows:3,placeholder:"Item description...",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 mt-4",children:"Category"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",value:t.category,onChange:a,required:!0,className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Office Supplies",children:"Office Supplies"}),e.jsx("option",{value:"IT Equipment",children:"IT Equipment"}),e.jsx("option",{value:"Cleaning Supplies",children:"Cleaning Supplies"}),e.jsx("option",{value:"Safety Equipment",children:"Safety Equipment"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subcategory"}),e.jsx("input",{type:"text",name:"subcategory",value:t.subcategory,onChange:a,placeholder:"e.g., Paper Products",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 mt-4",children:"Stock Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"unit",value:t.unit,onChange:a,required:!0,className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select unit"}),e.jsx("option",{value:"pcs",children:"Pieces"}),e.jsx("option",{value:"box",children:"Boxes"}),e.jsx("option",{value:"pack",children:"Packs"}),e.jsx("option",{value:"kg",children:"Kilograms"}),e.jsx("option",{value:"liter",children:"Liters"}),e.jsx("option",{value:"meter",children:"Meters"}),e.jsx("option",{value:"roll",children:"Rolls"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Unit Price"]}),e.jsx("input",{type:"number",name:"unitPrice",value:t.unitPrice,onChange:a,min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Stock ",!s&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"currentStock",value:t.currentStock,onChange:a,required:!s,disabled:s,min:"0",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-700"}),s&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use transactions to adjust stock"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Minimum Stock ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"minimumStock",value:t.minimumStock,onChange:a,required:!0,min:"0",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Stock"}),e.jsx("input",{type:"number",name:"maximumStock",value:t.maximumStock,onChange:a,min:"0",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Reorder Point ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"reorderPoint",value:t.reorderPoint,onChange:a,required:!0,min:"0",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reorder Quantity"}),e.jsx("input",{type:"number",name:"reorderQuantity",value:t.reorderQuantity,onChange:a,min:"0",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 mt-4",children:"Location & Details"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Location"]}),e.jsx("input",{type:"text",name:"location",value:t.location,onChange:a,placeholder:"e.g., Warehouse A",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bin Location"}),e.jsx("input",{type:"text",name:"binLocation",value:t.binLocation,onChange:a,placeholder:"e.g., A-05",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Barcode"}),e.jsx("input",{type:"text",name:"barcode",value:t.barcode,onChange:a,placeholder:"Barcode number",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Manufacturer"}),e.jsx("input",{type:"text",name:"manufacturer",value:t.manufacturer,onChange:a,placeholder:"Manufacturer name",className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>c("/inventory"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-5 h-5"}),s?"Update Item":"Create Item"]})})]})]})]})}export{L as default};
