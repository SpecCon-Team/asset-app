import{j as e}from"./vendor-charts-DVp8BQgJ.js";import{h as L,u as z,r as t,L as h}from"./vendor-react-CFQdvhEG.js";import{y as A,aB as m,a1 as u,aD as b,z as l}from"./vendor-ui-Bhgb65c8.js";import{B,a as R}from"./index-Cmh6JiNX.js";import{A as w}from"./AnimatedBackground-Bm2kRFGa.js";function G(){const{token:f}=L(),y=z(),[s,p]=t.useState(""),[a,j]=t.useState(""),[n,i]=t.useState(!1),[N,v]=t.useState(!1),[o,k]=t.useState(!1),[d,P]=t.useState(!1),S=async r=>{var c,g;if(r.preventDefault(),s.length<12){l.error("Password must be at least 12 characters long");return}if(s!==a){l.error("Passwords do not match");return}i(!0);try{await R().post(`/auth/reset-password/${f}`,{password:s}),v(!0),l.success("Password reset successful!"),setTimeout(()=>{y("/login")},2e3)}catch(x){const C=((g=(c=x.response)==null?void 0:c.data)==null?void 0:g.message)||x.message||"Failed to reset password. Please try again.";l.error(C)}finally{i(!1)}};return N?e.jsxs("div",{className:"min-h-screen relative flex items-center justify-center p-4 overflow-hidden",children:[e.jsx(w,{}),e.jsx("div",{className:"max-w-md w-full relative z-10",children:e.jsxs("div",{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-xl p-8 text-center border border-white/20",children:[e.jsx("div",{className:"inline-flex w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full items-center justify-center mb-6",children:e.jsx(A,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg mb-4",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-white/90 mb-6",children:"Your password has been changed successfully. Redirecting to login..."}),e.jsx(h,{to:"/login",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Go to Login"})]})})]}):e.jsxs("div",{className:"min-h-screen relative flex items-center justify-center p-4 overflow-hidden",children:[e.jsx(w,{}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex w-16 h-16 rounded-full items-center justify-center mb-4",style:{backgroundColor:"var(--color-primary)"},children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"AT"})}),e.jsx("h1",{className:"text-3xl font-bold text-white drop-shadow-lg",children:"Set New Password"}),e.jsx("p",{className:"text-white/90 mt-2",children:"Enter your new password below"})]}),e.jsxs("div",{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-xl p-8 border border-white/20",children:[e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"password",type:o?"text":"password",value:s,onChange:r=>p(r.target.value),placeholder:"••••••••••••",required:!0,minLength:12,className:"w-full pl-10 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>k(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none",children:o?e.jsx(u,{className:"w-5 h-5"}):e.jsx(b,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:"Must be at least 12 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"confirmPassword",type:d?"text":"password",value:a,onChange:r=>j(r.target.value),placeholder:"••••••••••••",required:!0,minLength:12,className:"w-full pl-10 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>P(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none",children:d?e.jsx(u,{className:"w-5 h-5"}):e.jsx(b,{className:"w-5 h-5"})})]})]}),s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:`h-2 flex-1 rounded ${s.length>=12?"bg-green-500":"bg-gray-200 dark:bg-gray-600"}`}),e.jsx("div",{className:`h-2 flex-1 rounded ${s.length>=16?"bg-green-500":"bg-gray-200 dark:bg-gray-600"}`}),e.jsx("div",{className:`h-2 flex-1 rounded ${/[A-Z]/.test(s)&&/[a-z]/.test(s)&&/[0-9]/.test(s)?"bg-green-500":"bg-gray-200 dark:bg-gray-600"}`})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Password strength: ",s.length>=16&&/[A-Z]/.test(s)&&/[a-z]/.test(s)&&/[0-9]/.test(s)?"Strong":s.length>=12?"Good":"Weak"]})]}),e.jsx("button",{type:"submit",disabled:n||!s||!a||s!==a,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:n?e.jsxs(e.Fragment,{children:[e.jsx(B,{})," Resetting Password..."]}):"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(h,{to:"/login",className:"text-sm text-white/90 hover:text-white transition-colors",children:"Back to Login"})})]})]})]})}export{G as default};
