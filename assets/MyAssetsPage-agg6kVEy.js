import{u as A,i as L,r as i,j as e,L as I,P as h}from"./index-DvknDCE2.js";import{u as M}from"./store-CM1qtz6o.js";import{C as T}from"./circle-alert-DpFPu1UG.js";import"./api-DWLJWDzJ.js";import"./types-D8_qC6eW.js";function R(){const N=A(),{assets:j,isLoading:w,error:p,fetchAssets:y}=M(),u=L(w,2e3),[a]=i.useState(()=>{const t=localStorage.getItem("user");return t?JSON.parse(t):null}),[l,k]=i.useState(""),[o,x]=i.useState(1),c=10;if(i.useEffect(()=>{a&&y({})},[a,y]),i.useEffect(()=>{x(1)},[l]),u)return e.jsx(I,{message:"Loading your assets..."});if(p)return e.jsxs("div",{className:"p-8 text-red-600 dark:text-red-400 bg-gray-50 dark:bg-gray-900 min-h-screen",children:["Error: ",p]});const d=j,n=d.filter(t=>{var s,r;return t.name.toLowerCase().includes(l.toLowerCase())||t.asset_code.toLowerCase().includes(l.toLowerCase())||((s=t.asset_type)==null?void 0:s.toLowerCase().includes(l.toLowerCase()))||((r=t.department)==null?void 0:r.toLowerCase().includes(l.toLowerCase()))}),g=Math.ceil(n.length/c),m=(o-1)*c,b=m+c,f=n.slice(m,b),v=d.filter(t=>{var s,r;return((s=t.condition)==null?void 0:s.toLowerCase())==="good"||((r=t.condition)==null?void 0:r.toLowerCase())==="excellent"}).length,C=d.filter(t=>{var s,r;return((s=t.condition)==null?void 0:s.toLowerCase())==="poor"||((r=t.condition)==null?void 0:r.toLowerCase())==="fair"}).length;return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8 flex flex-col",children:[e.jsxs("div",{className:"mb-8 flex-shrink-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.role)==="ADMIN"?"All Assets":(a==null?void 0:a.role)==="TECHNICIAN"?"Manage Assets":"My Assets"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:(a==null?void 0:a.role)==="ADMIN"?"View and manage all organization assets":(a==null?void 0:a.role)==="TECHNICIAN"?"View and manage all assets":"View all assets assigned to you"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Logged in as: ",e.jsx("span",{className:"font-medium",children:a==null?void 0:a.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 flex-shrink-0",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Assets"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:d.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-full",children:e.jsx(h,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Good Condition"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:v})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-full",children:e.jsx(h,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Need Attention"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:C})]}),e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900 rounded-full",children:e.jsx(T,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})})]}),e.jsx("div",{className:"mb-6 flex-shrink-0",children:e.jsx("input",{type:"text",placeholder:"Search assets by name, code, type, or department...",value:l,onChange:t=>k(t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"flex-1",children:n.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:d.length===0?(a==null?void 0:a.role)==="ADMIN"?"No assets in the system":(a==null?void 0:a.role)==="TECHNICIAN"?"No assets available":"No assets assigned yet":"No assets found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d.length===0?(a==null?void 0:a.role)==="ADMIN"?"Start by adding assets to the system":(a==null?void 0:a.role)==="TECHNICIAN"?"Assets will appear here once they are added to the system":"Contact your admin to get assets assigned to you":"Try adjusting your search terms"}),d.length===0&&(a==null?void 0:a.role)!=="ADMIN"&&(a==null?void 0:a.role)!=="TECHNICIAN"&&e.jsx("button",{onClick:()=>N("/tickets/new"),className:"mt-6 px-6 py-2 min-h-[44px] bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Report an Issue"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden space-y-4 pb-4",children:f.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.asset_code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:t.asset_type||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Condition:"}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${t.condition==="excellent"||t.condition==="good"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":t.condition==="fair"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:t.condition||"Unknown"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-300",children:t.office_location||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Department:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-300",children:t.department||"-"})]})]})]},t.id))}),e.jsx("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-lg shadow",children:e.jsx("div",{children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Asset"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Condition"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Department"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.asset_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.asset_type||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t.condition==="excellent"||t.condition==="good"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":t.condition==="fair"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:t.condition||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.office_location||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.department||"-"})]},t.id))})]})})}),n.length>0&&e.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white dark:bg-gray-800 px-4 py-3 rounded-lg shadow border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:e.jsxs("span",{children:["Showing ",e.jsx("span",{className:"font-semibold",children:m+1})," to"," ",e.jsx("span",{className:"font-semibold",children:Math.min(b,n.length)})," of"," ",e.jsx("span",{className:"font-semibold",children:n.length})," assets"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(t=>Math.max(1,t-1)),disabled:o===1,className:"px-4 py-2 min-h-[44px] bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-400 transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Previous"]}),e.jsx("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Page ",o," of ",g]})}),e.jsxs("button",{onClick:()=>x(t=>Math.min(g,t+1)),disabled:o===g,className:"px-4 py-2 min-h-[44px] bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-400 transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:["Next",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})]})]})})]})})}export{R as default};
