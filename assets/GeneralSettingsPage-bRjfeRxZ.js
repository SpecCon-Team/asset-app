import{j as e}from"./vendor-charts-DVp8BQgJ.js";import{r as u}from"./vendor-react-CFQdvhEG.js";import{g as $,u as L,k as O,L as W,a as E}from"./index-BPHiaStF.js";import{O as T,az as Y,y as z,B as v,z as g,ag as _,aA as q,b as J,am as G,aB as C,aC as K,aw as V}from"./vendor-ui-Bhgb65c8.js";function k(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}function R(){return k()?Notification.permission:"denied"}async function U(){if(!k())throw new Error("Push notifications are not supported in this browser");return await Notification.requestPermission()}async function Q(){if(!("serviceWorker"in navigator))throw new Error("Service workers are not supported");try{const s=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("Service Worker registered successfully:",s),await navigator.serviceWorker.ready,s}catch(s){throw console.error("Service Worker registration failed:",s),s}}async function H(s){if(!k())throw new Error("Push notifications are not supported");try{const t=await Q();if(await U()!=="granted")return console.log("Notification permission denied"),null;const n=(await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ee(s)})).toJSON();if(!n.endpoint||!n.keys)throw new Error("Invalid subscription format");return{endpoint:n.endpoint,keys:{p256dh:n.keys.p256dh||"",auth:n.keys.auth||""}}}catch(t){throw console.error("Failed to subscribe to push notifications:",t),t}}async function X(){if(!k())return!1;try{const t=await(await navigator.serviceWorker.ready).pushManager.getSubscription();if(t){const i=await t.unsubscribe();return console.log("Unsubscribed from push notifications:",i),i}return!1}catch(s){return console.error("Failed to unsubscribe from push notifications:",s),!1}}async function Z(){if(!k())return null;try{const t=await(await navigator.serviceWorker.ready).pushManager.getSubscription();if(!t)return null;const i=t.toJSON();return!i.endpoint||!i.keys?null:{endpoint:i.endpoint,keys:{p256dh:i.keys.p256dh||"",auth:i.keys.auth||""}}}catch(s){return console.error("Failed to get current subscription:",s),null}}async function F(s,t){if(!k())throw new Error("Notifications are not supported");if(await U()!=="granted")throw new Error("Notification permission denied");await(await navigator.serviceWorker.ready).showNotification(s,{icon:"/favicon.ico",badge:"/favicon.ico",...t})}function ee(s){const t="=".repeat((4-s.length%4)%4),i=(s+t).replace(/\-/g,"+").replace(/_/g,"/"),c=window.atob(i),n=new Uint8Array(c.length);for(let h=0;h<c.length;++h)n[h]=c.charCodeAt(h);return n}async function se(s,t){try{const i=localStorage.getItem("token"),c={"Content-Type":"application/json"};if(i&&(c.Authorization=`Bearer ${i}`),!(await fetch(`${$()}/push-subscriptions`,{method:"POST",headers:c,credentials:"include",body:JSON.stringify({userId:t,subscription:s})})).ok)throw new Error("Failed to save push subscription");console.log("Push subscription saved successfully")}catch(i){throw console.error("Failed to save push subscription:",i),i}}async function re(s){try{const t=localStorage.getItem("token"),i={"Content-Type":"application/json"};if(t&&(i.Authorization=`Bearer ${t}`),!(await fetch(`${$()}/push-subscriptions/${s}`,{method:"DELETE",headers:i,credentials:"include"})).ok)throw new Error("Failed to delete push subscription");console.log("Push subscription deleted successfully")}catch(t){throw console.error("Failed to delete push subscription:",t),t}}const te="BMxzS8VxcHQGEyZ_N0YGUwF9rvBa8j_qSqF1R3aw8xYLrKQvLpEyMqJ4zVXN5WKyX8_CZxR0tQGP9Hf0VQC3wE4";function ae(){const[s,t]=u.useState(!1),[i,c]=u.useState("default"),[n,h]=u.useState(!1),[x,r]=u.useState(!1);u.useEffect(()=>{f()},[]);const f=async()=>{const l=k();if(t(l),l){const b=R();c(b);const p=await Z();h(!!p)}},m=async()=>{r(!0);try{const l=localStorage.getItem("user");if(!l){g.error("Please login to enable notifications");return}const b=JSON.parse(l),p=await H(te);if(!p){g.error("Please allow notifications in your browser settings");return}await se(p,b.id),h(!0),c("granted"),g.success("Browser notifications enabled successfully!"),await F("Notifications Enabled!",{body:"You will now receive real-time updates even when the tab is closed.",tag:"welcome",requireInteraction:!1})}catch(l){console.error("Failed to enable notifications:",l),g.error("Failed to enable notifications. Please try again.")}finally{r(!1)}},S=async()=>{r(!0);try{const l=localStorage.getItem("user");if(!l)return;const b=JSON.parse(l);await X(),await re(b.id),h(!1),g.success("Browser notifications disabled successfully")}catch(l){console.error("Failed to disable notifications:",l),g.error("Failed to disable notifications")}finally{r(!1)}},P=async()=>{try{await F("Test Notification",{body:"This is a test notification from Asset Management System",tag:"test",requireInteraction:!1,data:{url:"/"}}),g.success("Test notification sent!")}catch(l){console.error("Failed to send test notification:",l),g.error("Failed to send test notification")}};return s?i==="denied"?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Y,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-1",children:"Notifications Blocked"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 mb-3",children:"You have blocked notifications for this site. To enable them, you need to:"}),e.jsxs("ol",{className:"text-sm text-red-700 dark:text-red-400 list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Click the lock icon in your browser's address bar"}),e.jsx("li",{children:'Find "Notifications" in the permissions list'}),e.jsx("li",{children:'Change the setting to "Allow"'}),e.jsx("li",{children:"Refresh this page"})]})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`border rounded-lg p-4 ${n?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[n?e.jsx(z,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}):e.jsx(v,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold mb-1 ${n?"text-green-800 dark:text-green-300":"text-gray-800 dark:text-gray-300"}`,children:n?"Browser Notifications Enabled":"Browser Notifications"}),e.jsx("p",{className:`text-sm ${n?"text-green-700 dark:text-green-400":"text-gray-600 dark:text-gray-400"}`,children:n?"You will receive real-time notifications even when this tab is closed.":"Enable browser notifications to receive real-time updates about tickets, assets, and comments."})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:P,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Send Test Notification"]}),e.jsxs("button",{onClick:S,disabled:x,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Y,{className:"w-5 h-5"}),x?"Disabling...":"Disable Notifications"]})]}):e.jsxs("button",{onClick:m,disabled:x,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(v,{className:"w-5 h-5"}),x?"Enabling...":"Enable Browser Notifications"]})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How Browser Notifications Work"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"•"}),e.jsx("span",{children:"Receive instant alerts when someone comments on your tickets"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"•"}),e.jsx("span",{children:"Get notified about ticket status changes and assignments"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"•"}),e.jsx("span",{children:"Works even when the browser tab is closed or minimized"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"•"}),e.jsx("span",{children:"Click on notifications to be taken directly to the relevant page"})]})]})]})]})})]}):e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Browser Notifications Not Supported"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"Your browser doesn't support push notifications. Please use a modern browser like Chrome, Firefox, or Edge."})]})]})})}function de(){const[s,t]=u.useState(null),[i,c]=u.useState(!0),n=L(i,2e3),{themeMode:h,setThemeMode:x}=O(),[r,f]=u.useState({emailNotifications:!0,pushNotifications:!0,ticketUpdates:!0,assetUpdates:!0,commentNotifications:!0,weeklyDigest:!1,profileVisibility:"all",showEmail:!0,showPhone:!1,language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",theme:"light"}),[m,S]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[P,l]=u.useState(!1),[b,p]=u.useState(!1);u.useEffect(()=>{const a=localStorage.getItem("user");if(a){const o=JSON.parse(a);t(o);const d=`appSettings_${o.id}`,w=localStorage.getItem(d);if(w){const N=JSON.parse(w);f(N)}const I=`themeMode_${o.role}`,D=localStorage.getItem(I);D==="dark"?f(N=>({...N,theme:"dark"})):D==="light"&&f(N=>({...N,theme:"light"}))}c(!1)},[]);const y=a=>{f(o=>({...o,[a]:!o[a]}))},j=(a,o)=>{if(f(d=>({...d,[a]:o})),a==="theme"){if(o==="dark")x("dark");else if(o==="light")x("light");else if(o==="auto"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches;x(d?"dark":"light")}}},M=a=>{const{name:o,value:d}=a.target;S(w=>({...w,[o]:d}))},A=async()=>{l(!0);try{const a=`appSettings_${s.id}`;if(localStorage.setItem(a,JSON.stringify(r)),r.theme){const o=`themeMode_${s.role}`;let d="light";r.theme==="dark"?d="dark":r.theme==="light"?d="light":r.theme==="auto"&&(d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),localStorage.setItem(o,d),x(d)}await E().patch(`/users/${s.id}/settings`,r),g.success("Settings saved successfully!")}catch(a){console.error("Failed to save settings:",a),g.error("Failed to save settings")}finally{l(!1)}},B=async a=>{var o,d;if(a.preventDefault(),m.newPassword!==m.confirmPassword){g.error("New passwords do not match");return}if(m.newPassword.length<12){g.error("Password must be at least 12 characters");return}p(!0);try{await E().patch(`/users/${s.id}/password`,{currentPassword:m.currentPassword,newPassword:m.newPassword}),g.success("Password changed successfully!"),S({currentPassword:"",newPassword:"",confirmPassword:""})}catch(w){console.error("Failed to change password:",w),g.error(((d=(o=w.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to change password")}finally{p(!1)}};return s?n||!s?e.jsx(W,{message:"Loading settings..."}):e.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"General Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage your account preferences and security"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notification Preferences"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage how you receive notifications"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive notifications via email"})]})]}),e.jsx("button",{onClick:()=>y("emailNotifications"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.emailNotifications?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.emailNotifications?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive push notifications in browser"})]})]}),e.jsx("button",{onClick:()=>y("pushNotifications"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.pushNotifications?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.pushNotifications?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Ticket Updates"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get notified about ticket status changes"})]}),e.jsx("button",{onClick:()=>y("ticketUpdates"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.ticketUpdates?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.ticketUpdates?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Asset Updates"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get notified about asset assignments"})]}),e.jsx("button",{onClick:()=>y("assetUpdates"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.assetUpdates?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.assetUpdates?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Weekly Digest"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive weekly summary emails"})]}),e.jsx("button",{onClick:()=>y("weeklyDigest"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.weeklyDigest?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.weeklyDigest?"translate-x-6":"translate-x-1"}`})})]})]})]}),r.pushNotifications&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Browser Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable real-time browser notifications"})]})]}),e.jsx(ae,{})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Privacy Settings"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Control your privacy preferences"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"py-3 border-b dark:border-gray-700",children:[e.jsx("label",{className:"block font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Profile Visibility"}),e.jsxs("select",{value:r.profileVisibility,onChange:a=>j("profileVisibility",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Everyone"}),e.jsx("option",{value:"team",children:"Team Members Only"}),e.jsx("option",{value:"private",children:"Private"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Show Email Address"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Make your email visible to others"})]}),e.jsx("button",{onClick:()=>y("showEmail"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.showEmail?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.showEmail?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Show Phone Number"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Make your phone visible to others"})]}),e.jsx("button",{onClick:()=>y("showPhone"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.showPhone?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.showPhone?"translate-x-6":"translate-x-1"}`})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(G,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Display Settings"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your viewing preferences"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"py-3 border-b dark:border-gray-700",children:[e.jsx("label",{className:"block font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Language"}),e.jsxs("select",{value:r.language,onChange:a=>j("language",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"})]})]}),e.jsxs("div",{className:"py-3 border-b dark:border-gray-700",children:[e.jsx("label",{className:"block font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Timezone"}),e.jsxs("select",{value:r.timezone,onChange:a=>j("timezone",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"UTC",children:"UTC (Coordinated Universal Time)"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]}),e.jsxs("div",{className:"py-3 border-b dark:border-gray-700",children:[e.jsx("label",{className:"block font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Date Format"}),e.jsxs("select",{value:r.dateFormat,onChange:a=>j("dateFormat",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),e.jsxs("div",{className:"py-3",children:[e.jsx("label",{className:"block font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Theme"}),e.jsxs("select",{value:r.theme,onChange:a=>j("theme",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto (System)"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900 rounded-lg",children:e.jsx(C,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Security"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Update your password"})]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"currentPassword",name:"currentPassword",type:"password",value:m.currentPassword,onChange:M,className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"newPassword",name:"newPassword",type:"password",value:m.newPassword,onChange:M,className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",required:!0,minLength:12})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Must be at least 12 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:m.confirmPassword,onChange:M,className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]})]}),e.jsxs("button",{type:"submit",disabled:b,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 transition-colors",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{children:b?"Changing Password...":"Change Password"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:P,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:P?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Saving"})]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:"Save All Settings"})]})})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-5 h-5 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}export{de as default};
