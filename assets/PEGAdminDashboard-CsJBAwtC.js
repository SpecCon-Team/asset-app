import{r as s,u as y,j as e,L as N,x,T as m,E as j}from"./index-d-W5hbHG.js";import{a as p}from"./api-DxErINRu.js";import{M as k}from"./map-pin-VvKGPs5w.js";const v=[{id:"WC",name:"Western Cape",color:"#3B82F6"},{id:"EC",name:"Eastern Cape",color:"#10B981"},{id:"NC",name:"Northern Cape",color:"#F59E0B"},{id:"FS",name:"Free State",color:"#EF4444"},{id:"KZN",name:"KwaZulu-Natal",color:"#8B5CF6"},{id:"NW",name:"North West",color:"#EC4899"},{id:"GP",name:"Gauteng",color:"#06B6D4"},{id:"MP",name:"Mpumalanga",color:"#84CC16"},{id:"LP",name:"Limpopo",color:"#F97316"}];function E(){var n;const[r,d]=s.useState(null),[g,l]=s.useState(!0),i=y();s.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0);const a=await p.get("/peg-admin/dashboard");d(a.data)}catch{d({totalClients:0,recentClients:0,clientsByProvince:[]})}finally{l(!1)}};return g?e.jsx(N,{message:"Loading dashboard..."}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"PEG Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Overview of all PEG clients and activities"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(x,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:(r==null?void 0:r.totalClients)||0}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Clients"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(m,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:(r==null?void 0:r.recentClients)||0}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New This Week"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(k,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:((n=r==null?void 0:r.clientsByProvince)==null?void 0:n.length)||0}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Provinces"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700 mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Clients by Province"]}),r&&r.totalClients===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'No clients found. Start by adding clients in the "My PEG" section.'})}):e.jsx("div",{className:"space-y-4",children:v.map(a=>{var o;const t=(o=r==null?void 0:r.clientsByProvince)==null?void 0:o.find(u=>u.provinceId===a.id),c=(t==null?void 0:t.count)||0,b=r!=null&&r.totalClients?c/r.totalClients*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a.name}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c," clients"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${b}%`,backgroundColor:a.color}})})]},a.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>i("/my-peg"),className:"flex items-center gap-3 p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[e.jsx(x,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Manage Clients"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and edit all PEG clients"})]})]}),e.jsxs("button",{onClick:()=>i("/support"),className:"flex items-center gap-3 p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:[e.jsx(m,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Support Tickets"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create tickets for clients"})]})]})]})]})]})}export{E as default};
