import{j as e}from"./vendor-charts-DVp8BQgJ.js";import{u as N,r as a,L as b}from"./vendor-react-CFQdvhEG.js";import{u as v,a as w,L as S}from"./index-DLjcbg9-.js";import{showError as L}from"./sweetalert-DcBwdyhg.js";import"./vendor-ui-Bhgb65c8.js";const B=()=>{const g=N(),[i,u]=a.useState([]),[r,h]=a.useState(null),[p,c]=a.useState(!0),f=v(p,2e3),[o,y]=a.useState(""),[d,C]=a.useState("all");a.useEffect(()=>{m()},[o,d]);const m=async()=>{try{c(!0);const t=w(),s=new URLSearchParams;o&&s.append("search",o),d!=="all"&&s.append("categoryId",d);const[n,l]=await Promise.all([t.get(`/documents?${s.toString()}`),t.get("/documents/stats")]);u(n.data.documents||[]),h(l.data)}catch(t){console.error("Error loading documents:",t),await L("Error","Failed to load documents")}finally{c(!1)}},x=t=>{const s=["B","KB","MB","GB"];let n=t,l=0;for(;n>=1024&&l<s.length-1;)n/=1024,l++;return`${n.toFixed(2)} ${s[l]}`},j=t=>t.includes("pdf")?"ðŸ“„":t.includes("word")?"ðŸ“":t.includes("excel")||t.includes("spreadsheet")?"ðŸ“Š":t.includes("image")?"ðŸ–¼ï¸":"ðŸ“Ž";return f?e.jsx(S,{message:"Loading documents"}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage and organize your documents"})]}),e.jsx(b,{to:"/documents/upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Upload Document"})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:r.totalDocuments})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Size"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:x(r.totalSize)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recent Uploads"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:r.recentUploads})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:r.byCategory.length})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:o,onChange:t=>y(t.target.value),placeholder:"Search documents...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Refresh"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-1 gap-4 p-4",children:i.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No documents found"}):i.map(t=>e.jsxs("div",{onClick:()=>g(`/documents/${t.id}`),className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("div",{className:"text-4xl",children:j(t.mimeType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.originalFileName}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[e.jsx("span",{children:x(t.fileSize)}),t.category&&e.jsx("span",{className:"px-2 py-1 rounded-full",style:{backgroundColor:t.category.color+"20"},children:t.category.name}),e.jsxs("span",{children:["by ",t.uploadedBy.name]}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]})]})]},t.id))})})]})};export{B as default};
