import{h as s,g as a}from"./index-CezS3iyn.js";const i=s.create({baseURL:a(),withCredentials:!0});function c(){const e=document.cookie.split(";");for(const t of e){const[o,r]=t.trim().split("=");if(o==="csrfToken")return decodeURIComponent(r)}return null}async function u(){try{return(await s.get(`${a()}/auth/csrf-token`,{withCredentials:!0})).data.csrfToken||null}catch(e){return console.warn("Failed to fetch CSRF token:",e),null}}i.interceptors.request.use(async e=>{var o,r;const t=localStorage.getItem("token");if(t&&(e.headers.Authorization=`Bearer ${t}`),["POST","PUT","DELETE","PATCH"].includes(((o=e.method)==null?void 0:o.toUpperCase())||"")&&!((r=e.url)!=null&&r.includes("/auth/login"))){let n=c();n||(n=await u()),n&&(e.headers["X-CSRF-Token"]=n)}return e});export{i as a};
