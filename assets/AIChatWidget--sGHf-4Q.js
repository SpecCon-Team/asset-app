import{c as p,r as s,a3 as A,j as e,X as E,U as $,m as H,h as R}from"./index-DgA6g9AM.js";import{M as T}from"./message-circle-gkXZ09xH.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=p("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=p("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=p("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=p("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function V(){const[o,b]=s.useState(!1),[l,I]=s.useState(!1),[a,i]=s.useState([]),[h,y]=s.useState(""),[m,w]=s.useState(!1),[v,u]=s.useState(!1),j=s.useRef(null),N=s.useRef(null),r=s.useRef(A()).current,x=`aiChatHistory_${r||"guest"}`,g=`aiChatWelcomeShown_${r||"guest"}`;s.useEffect(()=>{if(!r)return;const t=localStorage.getItem(x),n=localStorage.getItem(g);if(t){const c=JSON.parse(t);i(c.map(d=>({...d,timestamp:new Date(d.timestamp)})))}else i([]);u(!!n)},[]),s.useEffect(()=>{r&&a.length>0&&localStorage.setItem(x,JSON.stringify(a))},[a,r,x]),s.useEffect(()=>{var t;(t=j.current)==null||t.scrollIntoView({behavior:"smooth"})},[a]),s.useEffect(()=>{if(o&&!v&&a.length===0&&r){const t={id:Date.now().toString(),role:"assistant",content:`Hello! I'm your AI assistant for AssetTrack Pro. I can help you with:

• Managing your assets and tickets
• Troubleshooting issues
• Answering questions about the system
• Navigating features
• General support

How can I assist you today?`,timestamp:new Date};i([t]),u(!0),localStorage.setItem(g,"true")}},[o,v,a.length,r,g]),s.useEffect(()=>{var t;o&&!l&&((t=N.current)==null||t.focus())},[o,l]);const k=async()=>{if(!h.trim()||m)return;const t={id:Date.now().toString(),role:"user",content:h.trim(),timestamp:new Date};i(n=>[...n,t]),y(""),w(!0);try{const c=await R().post("/ai-chat",{message:t.content,history:a.slice(-10)}),d={id:(Date.now()+1).toString(),role:"assistant",content:c.data.reply,timestamp:new Date};i(D=>[...D,d])}catch(n){console.error("AI Chat error:",n);const c={id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I'm having trouble connecting right now. Please try again in a moment or contact support if the issue persists.",timestamp:new Date};i(d=>[...d,c])}finally{w(!1)}},M=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),k())},S=()=>{i([]),u(!1),r&&(localStorage.removeItem(x),localStorage.removeItem(g))},C=()=>{b(!1),S()},z=t=>new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs(e.Fragment,{children:[!o&&e.jsxs("button",{onClick:()=>b(!0),className:"fixed bottom-6 right-6 z-50 group","aria-label":"Open AI Chat",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"relative bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-full shadow-2xl transition-all duration-300 transform group-hover:scale-110 p-4",children:e.jsx(T,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold animate-bounce",children:"AI"})]}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap",children:[e.jsx("div",{className:"font-semibold",children:"Live Chat"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Available 24/7"}),e.jsx("div",{className:"absolute top-full right-4 border-4 border-transparent border-t-white dark:border-t-gray-800"})]})]}),o&&e.jsx("div",{className:`fixed z-50 transition-all duration-300 ease-in-out
            ${l?"bottom-6 right-6 w-80":"bottom-6 right-6 w-96 h-[600px] md:w-[420px]"}
            max-w-[calc(100vw-3rem)] max-h-[calc(100vh-3rem)]
          `,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl flex flex-col h-full border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-full",children:e.jsx(f,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"font-semibold text-lg",children:"AI Assistant"}),e.jsxs("div",{className:"text-xs text-white/90 flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Available 24/7"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(!l),className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":l?"Maximize":"Minimize",children:l?e.jsx(K,{className:"w-4 h-4 text-white"}):e.jsx(L,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Close chat",children:e.jsx(E,{className:"w-4 h-4 text-white"})})]})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900",children:[a.map(t=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${t.role==="user"?"bg-blue-600":"bg-gradient-to-r from-purple-600 to-blue-600"}`,children:t.role==="user"?e.jsx($,{className:"w-4 h-4 text-white"}):e.jsx(f,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:`flex-1 max-w-[80%] ${t.role==="user"?"items-end":"items-start"}`,children:[e.jsx("div",{className:`rounded-2xl px-4 py-2 ${t.role==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-bl-sm"}`,children:e.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:t.content})}),e.jsx("div",{className:`text-xs text-gray-500 dark:text-gray-400 mt-1 px-2 ${t.role==="user"?"text-right":"text-left"}`,children:z(t.timestamp)})]})]},t.id)),m&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center",children:e.jsx(f,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl rounded-bl-sm px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),e.jsx("div",{ref:j})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800",children:[a.length>1&&e.jsxs("button",{onClick:S,className:"text-xs text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 mb-2 flex items-center gap-1 transition-colors",children:[e.jsx(H,{className:"w-3 h-3"}),"Clear conversation"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{ref:N,value:h,onChange:t=>y(t.target.value),onKeyPress:M,placeholder:"Type your message...",rows:1,className:"flex-1 resize-none border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white text-sm max-h-32",disabled:m}),e.jsx("button",{onClick:k,disabled:!h.trim()||m,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white p-3 rounded-xl transition-all duration-200 transform hover:scale-105 disabled:hover:scale-100","aria-label":"Send message",children:e.jsx(O,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})]})})]})}export{V as default};
