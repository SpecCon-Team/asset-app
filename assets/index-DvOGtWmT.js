const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIChatWidget-CoxkMgiX.js","assets/react-vendor-DE6j8A-W.js","assets/export-libs-C_ZIqR8y.js","assets/vendor-DIIGlvtc.js","assets/ui-libs-Cv444JcM.js","assets/Dashboard-TfHVeH-a.js","assets/store-LlZh8Vry.js","assets/api-Ha-tW8RE.js","assets/form-libs-D8_qC6eW.js","assets/store-CeOZ-y1X.js","assets/api-Cl7q9IQe.js","assets/charts-GJS9KiVq.js","assets/AssetsListPage-BaYIbSgm.js","assets/exportUtils-D9OHYvjD.js","assets/AssetDetailsPage-GSltiJFY.js","assets/TicketsListPage-DjXk4uU3.js","assets/sweetalert-C-QUKjab.js","assets/TicketDetailsPage-CSVIx9Mu.js","assets/NewTicketPage-CcF8JhYK.js","assets/MyAssetsPage-C4PT6X9B.js","assets/MyTicketsPage-DJqpWojC.js","assets/MyTasksPage-C20gOipM.js","assets/MyClientsPage-CY78sEIJ.js","assets/MyPEGPage-BFVuxzt6.js","assets/ProvinceDetailsPage-B6Rib-zS.js","assets/PEGAdminDashboard-pbycJTyr.js","assets/api-Cu-czdS0.js","assets/TravelPlanPage-DBEkR_xz.js","assets/PegRouteCreatorPage-BpIPt_Sn.js","assets/PegRouteEditorPage-Dqy8Lwas.js","assets/MyProfilePage-DKeImd1_.js","assets/GeneralSettingsPage-DGiahKnO.js","assets/TwoFactorManagementPage-DkZfSF5e.js","assets/WhatsAppSetup-BjOXtXwz.js","assets/AuditLogsPage-KQnlIgkz.js","assets/LoginPage-DI_x4pcR.js","assets/AnimatedBackground-B9FwzDaY.js","assets/SignUpPage-BP3aJJFQ.js","assets/ForgotPasswordPage-CLwrAJ7O.js","assets/ResetPasswordPage-Bl0wFCv4.js","assets/VerifyOTPPage-BAM-fyBT.js","assets/TwoFactorSetupPage-rwN2v1c7.js","assets/PrivacyDashboard-BwkcVRbB.js","assets/AnalyticsPage-Ce2eqSVn.js","assets/WorkflowsPage-CFMZdaya.js","assets/SLAPoliciesPage-C5rQQa9Z.js","assets/AssignmentRulesPage-Ba5LBUe2.js","assets/WorkflowHistoryPage-BDLf7rdA.js","assets/MaintenancePage-CBj426EB.js","assets/MaintenanceFormPage-BlocQUKo.js","assets/MaintenanceDetailPage-C5OnzTvy.js","assets/CheckoutPage-DULxjtaC.js","assets/CheckoutFormPage-RoxJ5cpb.js","assets/CheckoutDetailPage-CFAE9Qf2.js","assets/QRScannerPage-CVINIPpk.js","assets/QRGeneratorPage-DsM34wXj.js","assets/InventoryPage-D9CfaxWy.js","assets/InventoryFormPage-B3tRxhkn.js","assets/InventoryDetailPage-5OQ4Bl4K.js","assets/DepreciationPage-DZeqipDc.js","assets/DepreciationFormPage-DVvfks0x.js","assets/DepreciationDetailPage-Bs4Yt6be.js","assets/DocumentsPage-D0KOtaNF.js","assets/DocumentUploadPage-DfAAE92a.js","assets/DocumentDetailPage-CoduWXml.js","assets/AdvancedAnalyticsPage-C64onxlc.js","assets/DownloadMobileApp-UWGjGJSv.js","assets/HelpAndResources-BZYb6O3w.js"])))=>i.map(i=>d[i]);
var ue=Object.defineProperty;var me=(t,l,n)=>l in t?ue(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n;var V=(t,l,n)=>me(t,typeof l!="symbol"?l+"":l,n);import{r as a,u as U,j as e,z as K,L as ge,N as he,O as pe,d as xe,e as ye,f as fe,g as be,F as ve}from"./react-vendor-DE6j8A-W.js";import{_ as h}from"./export-libs-C_ZIqR8y.js";import{aB as ke,aC as je}from"./vendor-DIIGlvtc.js";import{B as W,C as we,T as Ne,X as z,a as _e,U as Z,S as ee,b as te,L as Ee,K as re,P as ae,c as se,d as oe,e as H,f as ne,g as Ce,h as Ae,i as Ie,H as B,j as Se,k as De,l as Pe,W as Te,Q as Le,A as Re,m as Me,F as Oe,n as $e,o as ze,p as Fe,q as Ue,r as Ve,s as Ge,t as Ke,G as He,u as Be,v as Ye,D as We,M as Je,w as qe,R as Qe}from"./ui-libs-Cv444JcM.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const R=()=>{const t="https://assettrack-api.onrender.com/api";return t.endsWith("/api")?t:`${t}/api`},Xe=ke((t,l)=>({notifications:[],unreadCount:0,isLoading:!1,error:null,fetchNotifications:async(n,s=50)=>{var r;t({isLoading:!0,error:null});try{const i=localStorage.getItem("token"),g={"Content-Type":"application/json"};i&&(g.Authorization=`Bearer ${i}`);const x=`${R()}/notifications/user/${n}?limit=${s}`,c=await fetch(x,{credentials:"include",headers:g});if(c.status===401||c.status===403){t({notifications:[],isLoading:!1,error:null});return}if(!c.ok)throw new Error(`Failed to fetch notifications: ${c.statusText}`);const E=await c.json();t({notifications:E,isLoading:!1})}catch(i){if((r=i==null?void 0:i.message)!=null&&r.includes("Failed to fetch")||(i==null?void 0:i.code)==="ERR_NETWORK"){t({notifications:[],isLoading:!1,error:null});return}console.error("Error fetching notifications:",i),t({error:i.message,isLoading:!1,notifications:[]})}},fetchUnreadCount:async n=>{var s;try{const r=localStorage.getItem("token"),i={"Content-Type":"application/json"};r&&(i.Authorization=`Bearer ${r}`);const g=await fetch(`${R()}/notifications/user/${n}/unread-count`,{credentials:"include",headers:i});if(g.status===401||g.status===403){t({unreadCount:0});return}if(!g.ok)throw new Error(`Failed to fetch unread count: ${g.statusText}`);const x=await g.json();t({unreadCount:x.count})}catch(r){if((s=r==null?void 0:r.message)!=null&&s.includes("Failed to fetch")||(r==null?void 0:r.code)==="ERR_NETWORK"){t({unreadCount:0});return}console.error("Failed to fetch unread count:",r),t({unreadCount:0})}},markAsRead:async n=>{var s;try{const r=localStorage.getItem("token"),i={"Content-Type":"application/json"};if(r&&(i.Authorization=`Bearer ${r}`),!(await fetch(`${R()}/notifications/${n}/read`,{method:"PATCH",credentials:"include",headers:i})).ok)throw new Error("Failed to mark as read");const x=l().notifications.map(c=>c.id===n?{...c,read:!0}:c);t({notifications:x,unreadCount:x.filter(c=>!c.read).length})}catch(r){if((s=r==null?void 0:r.message)!=null&&s.includes("Failed to fetch")||(r==null?void 0:r.code)==="ERR_NETWORK")return;console.error("Failed to mark notification as read:",r)}},markAllAsRead:async n=>{var s;try{const r=localStorage.getItem("token"),i={"Content-Type":"application/json"};if(r&&(i.Authorization=`Bearer ${r}`),!(await fetch(`${R()}/notifications/user/${n}/read-all`,{method:"PATCH",credentials:"include",headers:i})).ok)throw new Error("Failed to mark all as read");const x=l().notifications.map(c=>({...c,read:!0}));t({notifications:x,unreadCount:0})}catch(r){if((s=r==null?void 0:r.message)!=null&&s.includes("Failed to fetch")||(r==null?void 0:r.code)==="ERR_NETWORK")return;console.error("Failed to mark all as read:",r)}},deleteNotification:async n=>{var s;try{const r=localStorage.getItem("token"),i={"Content-Type":"application/json"};if(r&&(i.Authorization=`Bearer ${r}`),!(await fetch(`${R()}/notifications/${n}`,{method:"DELETE",credentials:"include",headers:i})).ok)throw new Error("Failed to delete notification");const x=l().notifications.filter(c=>c.id!==n);t({notifications:x,unreadCount:x.filter(c=>!c.read).length})}catch(r){if((s=r==null?void 0:r.message)!=null&&s.includes("Failed to fetch")||(r==null?void 0:r.code)==="ERR_NETWORK")return;console.error("Failed to delete notification:",r)}},dismissAllNotifications:async n=>{var s;try{const r=localStorage.getItem("token"),i={"Content-Type":"application/json"};if(r&&(i.Authorization=`Bearer ${r}`),!(await fetch(`${R()}/notifications/user/${n}/dismiss-all`,{method:"DELETE",credentials:"include",headers:i})).ok)throw new Error("Failed to dismiss all notifications");t({notifications:[],unreadCount:0})}catch(r){if((s=r==null?void 0:r.message)!=null&&s.includes("Failed to fetch")||(r==null?void 0:r.code)==="ERR_NETWORK")return;console.error("Failed to dismiss all notifications:",r)}}}));function Ze(){const[t,l]=a.useState(null);return a.useEffect(()=>{const n=localStorage.getItem("user");if(n)try{const s=JSON.parse(n);l(s)}catch(s){console.error("Error parsing user from localStorage:",s),l(null)}},[]),t}function fr(){try{const t=localStorage.getItem("user");if(t)return JSON.parse(t).email||null}catch(t){console.error("Error getting user email:",t)}return null}function br(){try{const t=localStorage.getItem("user");if(t)return JSON.parse(t).id||null}catch(t){console.error("Error getting user ID:",t)}return null}function le(){try{const t=localStorage.getItem("user");if(t)return JSON.parse(t).role||null}catch(t){console.error("Error getting user role:",t)}return null}function vr(){return le()==="ADMIN"}function kr(){const t=le();return t==="TECHNICIAN"||t==="ADMIN"}function ie(t){if(!t)return"N/A";const l=typeof t=="string"?new Date(t):t;if(isNaN(l.getTime()))return"Invalid Date";let n="MM/DD/YYYY";try{const g=localStorage.getItem("user");if(g){const c=`appSettings_${JSON.parse(g).id}`,E=localStorage.getItem(c);E&&(n=JSON.parse(E).dateFormat||"MM/DD/YYYY")}}catch(g){console.error("Error parsing settings:",g)}const s=l.getDate().toString().padStart(2,"0"),r=(l.getMonth()+1).toString().padStart(2,"0"),i=l.getFullYear();switch(n){case"DD/MM/YYYY":return`${s}/${r}/${i}`;case"YYYY-MM-DD":return`${i}-${r}-${s}`;case"MM/DD/YYYY":default:return`${r}/${s}/${i}`}}function et(t){if(!t)return"N/A";const l=typeof t=="string"?new Date(t):t;if(isNaN(l.getTime()))return"Invalid Date";const n=ie(l),s=l.getHours().toString().padStart(2,"0"),r=l.getMinutes().toString().padStart(2,"0");return`${n} ${s}:${r}`}function tt(){const[t,l]=a.useState(!1),[n,s]=a.useState(!1),[r,i]=a.useState(null),[g,x]=a.useState(-1),c=Ze(),E=U(),w=a.useRef(null),y=a.useRef([]),{notifications:N,unreadCount:j,fetchNotifications:b,fetchUnreadCount:f,markAsRead:k,markAllAsRead:_,deleteNotification:o,dismissAllNotifications:p}=Xe();a.useEffect(()=>{if(!(c!=null&&c.id))return;b(c.id),f(c.id);const u=setInterval(()=>{c!=null&&c.id&&(b(c.id),f(c.id))},1e4);return()=>clearInterval(u)},[c==null?void 0:c.id,b,f]),a.useEffect(()=>{function u(v){w.current&&!w.current.contains(v.target)&&l(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),a.useEffect(()=>{if(!t){x(-1);return}const u=v=>{var T,d,S;if(v.key==="Escape"){l(!1);const A=(T=w.current)==null?void 0:T.querySelector('button[aria-haspopup="true"]');A==null||A.focus()}else if(v.key==="ArrowDown")v.preventDefault(),x(A=>{var L;const D=A<N.length-1?A+1:A;return(L=y.current[D])==null||L.focus(),D});else if(v.key==="ArrowUp")v.preventDefault(),x(A=>{var L;const D=A>0?A-1:0;return(L=y.current[D])==null||L.focus(),D});else if(v.key==="Home")v.preventDefault(),x(0),(d=y.current[0])==null||d.focus();else if(v.key==="End"){v.preventDefault();const A=N.length-1;x(A),(S=y.current[A])==null||S.focus()}};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t,N.length]);const C=async u=>{if(u.read||k(u.id).catch(v=>{console.error("Failed to mark notification as read:",v)}),u.title.includes("Network Speed Test")){const v=u.message,T=v.match(/Download: ([\d.]+) Mbps/),d=v.match(/Upload: ([\d.]+) Mbps/),S=v.match(/Ping: ([\d.]+) ms/),A=u.title.match(/Network Speed Test - (.+)/),D=v.match(/^(.+) completed a speed test/),L=v.match(/Test completed at (.+)$/m);i({technician:D?D[1]:"Unknown",download:T?parseFloat(T[1]):0,upload:d?parseFloat(d[1]):0,ping:S?parseInt(S[1]):0,quality:A?A[1]:"Unknown",timestamp:L?L[1]:et(u.createdAt)}),s(!0),l(!1);return}if(l(!1),u.ticketId){const v=u.ticketNumber||u.ticketId;E(`/tickets/${v}`)}else if(u.assetId){const v=u.assetCode||u.assetId;E(`/assets/${v}`)}},P=async()=>{c!=null&&c.id&&await _(c.id)},M=async()=>{c!=null&&c.id&&await p(c.id)},O=(u,v)=>{if(v.includes("Network Speed Test"))return"ðŸ“¶";if(v.includes("New ticket created"))return"ðŸ†•";if(v.includes("User replied"))return"ðŸ’­";switch(u){case"system":return"âš™ï¸";case"comment":return"ðŸ’¬";case"ticket_status":return"ðŸŽ«";case"ticket_assigned":return"ðŸ‘¤";case"asset_assigned":return"ðŸ“¦";default:return"ðŸ””"}},I=u=>{const v=new Date(u),d=Math.floor((new Date().getTime()-v.getTime())/1e3);return d<60?"Just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:d<604800?`${Math.floor(d/86400)}d ago`:ie(v)};return c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",ref:w,children:[e.jsxs("button",{onClick:()=>l(!t),className:"relative p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":`Notifications${j>0?`, ${j} unread`:""}`,"aria-expanded":t,"aria-haspopup":"true","aria-controls":"notifications-dropdown",children:[e.jsx(W,{className:"w-6 h-6"}),j>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",role:"status","aria-label":`${j} unread notifications`,children:j>9?"9+":j})]}),t&&e.jsxs("div",{id:"notifications-dropdown",role:"menu","aria-label":"Notifications menu",className:"fixed sm:absolute right-2 sm:right-0 left-2 sm:left-auto mt-2 sm:w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-[9999] max-h-[80vh] sm:max-h-[600px] flex flex-col",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Notifications"}),j>0&&e.jsxs("button",{onClick:P,className:"text-xs sm:text-sm flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg transition-colors",style:{color:"var(--color-primary)",backgroundColor:"rgba(var(--color-primary-rgb), 0.1)"},title:"Mark all as read","aria-label":"Mark all notifications as read",children:[e.jsx(we,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark all read"}),e.jsx("span",{className:"sm:hidden",children:"Read all"})]})]}),N.length>0&&e.jsxs("button",{onClick:M,className:"w-full px-3 sm:px-4 py-2 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white text-sm sm:text-base font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",title:"Dismiss all notifications","aria-label":"Dismiss all notifications",children:[e.jsx(Ne,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Dismiss All"]})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:N.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"No notifications yet"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:N.map((u,v)=>e.jsx("div",{ref:T=>y.current[v]=T,role:"menuitem",tabIndex:0,className:"p-3 sm:p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-inset",style:u.read?void 0:{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",borderLeft:"3px solid var(--color-primary)"},onClick:()=>C(u),onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),C(u))},"aria-label":`${u.title}${u.read?"":", unread"}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:u.sender?e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:u.sender.profilePicture?e.jsx("img",{src:u.sender.profilePicture,alt:u.sender.name||u.sender.email,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-white font-semibold text-lg",children:(u.sender.name||u.sender.email).charAt(0).toUpperCase()})}):e.jsx("div",{className:"text-2xl",children:O(u.type,u.title)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:u.title}),u.sender&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["from ",u.sender.name||u.sender.email]})]}),!u.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0 ml-2 mt-1"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-1",children:u.message}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:I(u.createdAt)})]}),e.jsx("button",{onClick:T=>{T.stopPropagation(),o(u.id)},className:"flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-lg transition-colors",title:"Delete notification","aria-label":`Delete notification: ${u.title}`,children:e.jsx(z,{className:"w-5 h-5"})})]})},u.id))})})]})]}),n&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[9999] overflow-y-auto p-4",onClick:()=>s(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full my-8 relative",onClick:u=>u.stopPropagation(),style:{maxHeight:"90vh",overflow:"auto"},children:[e.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 z-10 bg-white dark:bg-gray-700 bg-opacity-90 hover:bg-opacity-100 rounded-full p-2 shadow-lg transition-all hover:scale-110","aria-label":"Close modal",children:e.jsx(z,{className:"w-6 h-6 text-gray-700 dark:text-gray-200"})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-lg",children:e.jsx("div",{className:"flex justify-between items-start pr-12",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-4xl",children:"ðŸ“¶"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Network Speed Test Report"})]}),e.jsxs("p",{className:"text-blue-100",children:["Technician: ",r.technician]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("div",{className:`inline-block px-6 py-3 rounded-full text-lg font-bold ${r.quality==="Excellent"?"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300":r.quality==="Good"?"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300":r.quality==="Fair"?"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300":"bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300"}`,children:[r.quality," Connection"]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center p-6 bg-green-50 dark:bg-green-900/30 rounded-lg border-2 border-green-200 dark:border-green-700",children:[e.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-2",children:"PING"}),e.jsx("div",{className:"text-4xl font-bold text-green-700 dark:text-green-300 mb-1",children:r.ping}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"milliseconds"}),e.jsx("div",{className:"mt-3 text-xs text-gray-600 dark:text-gray-300",children:r.ping<30?"Excellent":r.ping<50?"Good":r.ping<100?"Fair":"Poor"})]}),e.jsxs("div",{className:"text-center p-6 bg-blue-50 dark:bg-blue-900/30 rounded-lg border-2 border-blue-200 dark:border-blue-700",children:[e.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"DOWNLOAD"}),e.jsx("div",{className:"text-4xl font-bold text-blue-700 dark:text-blue-300 mb-1",children:r.download}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Mbps"}),e.jsx("div",{className:"mt-3 text-xs text-gray-600 dark:text-gray-300",children:r.download>100?"Excellent":r.download>25?"Good":r.download>10?"Fair":"Poor"})]}),e.jsxs("div",{className:"text-center p-6 bg-purple-50 dark:bg-purple-900/30 rounded-lg border-2 border-purple-200 dark:border-purple-700",children:[e.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"UPLOAD"}),e.jsx("div",{className:"text-4xl font-bold text-purple-700 dark:text-purple-300 mb-1",children:r.upload}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Mbps"}),e.jsx("div",{className:"mt-3 text-xs text-gray-600 dark:text-gray-300",children:r.upload>50?"Excellent":r.upload>10?"Good":r.upload>5?"Fair":"Poor"})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Test Date:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-gray-100",children:r.timestamp})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tested By:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-gray-100",children:r.technician})]})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("h3",{className:"font-semibold text-sm text-blue-900 dark:text-blue-300 mb-2",children:"Performance Analysis"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full"}),e.jsx("span",{children:r.ping<50&&r.download>25&&r.upload>10?"Connection is suitable for video calls, streaming, and cloud applications":r.download<10?"Connection may experience issues with heavy tasks":"Connection is adequate for general browsing and light tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full"}),e.jsxs("span",{children:["Latency: ",r.ping<30?"Perfect for real-time applications":r.ping<100?"Acceptable for most uses":"May cause delays in interactive applications"]})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-4 rounded-b-lg flex justify-end",children:e.jsx("button",{onClick:()=>s(!1),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Close Report"})})]})})]}):null}let $=null;function F(){return $||($=je.create({baseURL:R(),withCredentials:!0,timeout:1e4}),$.interceptors.request.use(t=>{const l=localStorage.getItem("token");return l&&(t.headers=t.headers??{},t.headers.Authorization=`Bearer ${l}`),t}),$.interceptors.response.use(t=>t,t=>{if(t.response){const l=t.response.headers["content-type"];if(l&&!l.includes("application/json")){const n=t.response.data;t.response.data={error:"Rate Limit",message:typeof n=="string"?n:"Too many requests. Please try again later."}}}return Promise.reject(t)}),$)}function rt({user:t}){const[l,n]=a.useState(!1),[s,r]=a.useState((t==null?void 0:t.isAvailable)??!0),[i,g]=a.useState(-1),[x,c]=a.useState(t),E=a.useRef(null),w=a.useRef([]),y=U();a.useEffect(()=>{c(t),r((t==null?void 0:t.isAvailable)??!0)},[t]),a.useEffect(()=>{const o=()=>{const p=localStorage.getItem("user");if(p){const C=JSON.parse(p);c(C),r((C==null?void 0:C.isAvailable)??!0)}};return window.addEventListener("userUpdated",o),()=>window.removeEventListener("userUpdated",o)},[]),a.useEffect(()=>{const o=p=>{E.current&&!E.current.contains(p.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),a.useEffect(()=>{if(!l){g(-1);return}const o=p=>{var P,M,O;if(p.key==="Escape"){n(!1);const I=(P=E.current)==null?void 0:P.querySelector("button");I==null||I.focus()}else if(p.key==="ArrowDown")p.preventDefault(),g(I=>{var v;const u=I<5?I+1:I;return(v=w.current[u])==null||v.focus(),u});else if(p.key==="ArrowUp")p.preventDefault(),g(I=>{var v;const u=I>0?I-1:0;return(v=w.current[u])==null||v.focus(),u});else if(p.key==="Home")p.preventDefault(),g(0),(M=w.current[0])==null||M.focus();else if(p.key==="End"){p.preventDefault();const I=5;g(I),(O=w.current[I])==null||O.focus()}};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[l]);const N=async()=>{const o=!s;r(o);try{await F().patch(`/users/${x.id}/availability`,{isAvailable:o});const p={...x,isAvailable:o};localStorage.setItem("user",JSON.stringify(p)),c(p),window.dispatchEvent(new CustomEvent("userUpdated")),K.success(o?"You are now available":"You are now offline")}catch(p){console.error("Failed to update availability:",p),r(!o),K.error("Failed to update availability status")}},j=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),K.success("You have logged out successfully."),y("/login"),n(!1)},b=()=>{var o;return x.name?x.name.split(" ").map(p=>p[0]).join("").toUpperCase().slice(0,2):((o=x.email)==null?void 0:o.slice(0,2).toUpperCase())||"U"},f=()=>x.name||x.email||"User",k=()=>x.role?x.role.charAt(0).toUpperCase()+x.role.slice(1).toLowerCase():"User",_=[{icon:Z,label:"My profile",onClick:()=>{n(!1),y("/my-profile")}},{icon:ee,label:"General settings",onClick:()=>{n(!1),y("/settings")}},{icon:te,label:"Two-Factor Authentication",onClick:()=>{n(!1),y("/2fa-setup")}}];return e.jsxs("div",{className:"relative",ref:E,children:[e.jsxs("button",{onClick:()=>n(!l),className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":`User menu for ${f()}`,"aria-expanded":l,"aria-haspopup":"true","aria-controls":"user-profile-dropdown",children:[e.jsxs("div",{className:"relative",children:[x.profilePicture?e.jsx("img",{src:x.profilePicture,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:b()})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${s?"bg-green-500":"bg-gray-400"}`})]}),e.jsx(_e,{className:`w-4 h-4 text-gray-600 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsxs("div",{id:"user-profile-dropdown",role:"menu","aria-label":"User profile menu",className:"absolute right-0 mt-2 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-[9999] animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[x.profilePicture?e.jsx("img",{src:x.profilePicture,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold",children:b()})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 border-white ${s?"bg-green-500":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:f()}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:x.email||""}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:k()})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center ${s?"bg-green-100 dark:bg-green-900":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${s?"bg-green-500":"bg-gray-400"}`})}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",id:"availability-label",children:"Available"})]}),e.jsx("button",{onClick:N,role:"switch","aria-checked":s,"aria-labelledby":"availability-label",className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${s?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})}),e.jsx("div",{className:"py-2",children:_.map((o,p)=>{const C=o.icon;return e.jsxs("button",{ref:P=>w.current[p]=P,onClick:o.onClick,role:"menuitem",className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-label":o.label,children:[e.jsx(C,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),e.jsx("span",{children:o.label})]},p)})}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2",children:e.jsxs("button",{ref:o=>w.current[_.length]=o,onClick:j,role:"menuitem",className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-red-500","aria-label":"Log out",children:[e.jsx(Ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Log out"})]})})]})]})}const G=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0;function at(){const t=U(),l=[{key:"d",alt:!0,description:"Go to Dashboard",action:()=>t("/")},{key:"a",alt:!0,description:"Go to Assets",action:()=>t("/assets")},{key:"t",alt:!0,description:"Go to Tickets",action:()=>t("/tickets")},{key:"m",alt:!0,description:"Go to My Assets",action:()=>t("/my-assets")},{key:"k",alt:!0,description:"Go to My Tickets",action:()=>t("/my-tickets")},{key:"u",alt:!0,description:"Go to User Management",action:()=>t("/my-clients")},{key:"p",alt:!0,description:"Go to Profile",action:()=>t("/my-profile")},{key:"n",ctrl:!0,alt:!0,description:"Create New (context-aware)",action:()=>{const s=window.location.pathname;s.includes("asset")?t("/assets/new"):s.includes("ticket")&&t("/tickets/new")}},{key:"f",ctrl:!0,description:"Focus Search",action:()=>{const s=document.querySelector('input[type="search"], input[placeholder*="Search"]');s&&(s.focus(),s.select())}},{key:"r",ctrl:!0,shift:!0,description:"Refresh Data",action:()=>{window.location.reload()}}],n=a.useCallback(s=>{const r=s.target;if((r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)&&!(s.ctrlKey&&s.key.toLowerCase()==="f"))return;const i=l.find(g=>{const x=s.key.toLowerCase()===g.key.toLowerCase(),c=g.ctrl?s.ctrlKey||s.metaKey:!s.ctrlKey&&!s.metaKey,E=g.alt?s.altKey:!s.altKey,w=g.shift?s.shiftKey:!s.shiftKey;return x&&c&&E&&w});i&&(s.preventDefault(),i.action())},[l]);return a.useEffect(()=>(window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}),[n]),{shortcuts:l}}function st(t){const l=[];return t.ctrl&&l.push(G?"âŒ˜":"Ctrl"),t.alt&&l.push(G?"âŒ¥":"Alt"),t.shift&&l.push(G?"â‡§":"Shift"),l.push(t.key.toUpperCase()),l.join(G?"":"+")}function ot(){const t=()=>{};return[{category:"Navigation",shortcuts:[{key:"d",alt:!0,description:"Go to Dashboard",action:t},{key:"a",alt:!0,description:"Go to Assets",action:t},{key:"t",alt:!0,description:"Go to Tickets",action:t},{key:"m",alt:!0,description:"Go to My Assets",action:t},{key:"k",alt:!0,description:"Go to My Tickets",action:t},{key:"u",alt:!0,description:"Go to User Management",action:t},{key:"p",alt:!0,description:"Go to Profile",action:t}]},{category:"Actions",shortcuts:[{key:"n",ctrl:!0,alt:!0,description:"Create New",action:t},{key:"f",ctrl:!0,description:"Focus Search",action:t},{key:"r",ctrl:!0,shift:!0,description:"Refresh Data",action:t},{key:"?",shift:!0,description:"Show Keyboard Shortcuts",action:t}]}]}const ce=({isOpen:t,onClose:l,title:n,children:s,footer:r,size:i="md",closeOnBackdropClick:g=!0,closeOnEscape:x=!0,showCloseButton:c=!0,className:E=""})=>{const w=a.useRef(null),y=a.useRef(null),N={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};if(a.useEffect(()=>{if(!t||!x)return;const b=f=>{f.key==="Escape"&&l()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[t,x,l]),a.useEffect(()=>{var k;if(!t)return;y.current=document.activeElement;const b=(k=w.current)==null?void 0:k.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');b&&b.length>0&&b[0].focus();const f=_=>{if(_.key!=="Tab"||!w.current)return;const o=w.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),p=o[0],C=o[o.length-1];_.shiftKey?document.activeElement===p&&(_.preventDefault(),C==null||C.focus()):document.activeElement===C&&(_.preventDefault(),p==null||p.focus())};return document.addEventListener("keydown",f),document.body.style.overflow="hidden",()=>{var _;document.removeEventListener("keydown",f),document.body.style.overflow="unset",(_=y.current)==null||_.focus()}},[t]),!t)return null;const j=b=>{g&&b.target===b.currentTarget&&l()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",onClick:j,role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:e.jsxs("div",{ref:w,className:`relative w-full ${N[i]} bg-white dark:bg-gray-800 rounded-lg shadow-2xl ${E}`.trim(),onClick:b=>b.stopPropagation(),children:[(n||c)&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[n&&e.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-gray-900 dark:text-white",children:n}),c&&e.jsx("button",{onClick:l,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","aria-label":"Close modal",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-16rem)] overflow-y-auto",children:s}),r&&e.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 rounded-b-lg",children:r})]})})};ce.displayName="Modal";function nt({isOpen:t,onClose:l}){const n=ot();return e.jsx(ce,{isOpen:t,onClose:l,title:"Keyboard Shortcuts",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})}),e.jsx("div",{className:"space-y-6",children:n.map(s=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:s.category}),e.jsx("div",{className:"space-y-2",children:s.shortcuts.map((r,i)=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:r.description}),e.jsx("kbd",{className:"px-3 py-1.5 text-xs font-semibold text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm",children:st(r)})]},i))})]},s.category))}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Press ",e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 rounded",children:"?"})," anytime to see this help"]})}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("button",{onClick:l,className:"px-6 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors font-medium",children:"Got it!"})})]})})}function lt({isOpen:t,onClose:l}){const[n,s]=a.useState(""),[r,i]=a.useState([]),[g,x]=a.useState(!1),[c,E]=a.useState(0),[w,y]=a.useState([]),N=U(),j=a.useRef(null),b=a.useRef(null);a.useEffect(()=>{const o=localStorage.getItem("recentSearches");if(o)try{y(JSON.parse(o))}catch(p){console.error("Failed to load recent searches",p)}},[]),a.useEffect(()=>{t&&(setTimeout(()=>{var o;return(o=j.current)==null?void 0:o.focus()},100),s(""),i([]),E(0))},[t]),a.useEffect(()=>{if(!n.trim()){i([]);return}if(n.trim().length<3){i([]);return}const o=setTimeout(async()=>{x(!0);try{const[p,C,P,M]=await Promise.all([F().get("/assets",{params:{limit:10,search:n.trim()}}).then(d=>Array.isArray(d.data)?d.data:[]).catch(()=>[]),F().get("/tickets",{params:{limit:10,search:n.trim()}}).then(d=>Array.isArray(d.data)?d.data:[]).catch(()=>[]),F().get("/users",{params:{limit:10,search:n.trim()}}).then(d=>Array.isArray(d.data)?d.data:[]).catch(()=>[]),F().get("/travel",{params:{limit:10,search:n.trim()}}).then(d=>Array.isArray(d.data)?d.data:[]).catch(()=>[])]),O=p.filter(d=>{var S,A,D;return((S=d.name)==null?void 0:S.toLowerCase().includes(n.toLowerCase()))||((A=d.asset_code)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((D=d.description)==null?void 0:D.toLowerCase().includes(n.toLowerCase()))}),I=C.filter(d=>{var S,A,D;return((S=d.title)==null?void 0:S.toLowerCase().includes(n.toLowerCase()))||((A=d.number)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((D=d.description)==null?void 0:D.toLowerCase().includes(n.toLowerCase()))}),u=P.filter(d=>{var S,A;return((S=d.name)==null?void 0:S.toLowerCase().includes(n.toLowerCase()))||((A=d.email)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))}),v=M.filter(d=>{var S,A,D;return((S=d.destination)==null?void 0:S.toLowerCase().includes(n.toLowerCase()))||((A=d.country)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((D=d.category)==null?void 0:D.toLowerCase().includes(n.toLowerCase()))}),T=[...O.slice(0,10).map(d=>({id:d.id,type:"asset",title:d.name,subtitle:`Code: ${d.asset_code} â€¢ Status: ${d.status}`,link:`/assets/${d.id}`,icon:ae})),...I.slice(0,10).map(d=>({id:d.id,type:"ticket",title:d.title,subtitle:`${d.number} â€¢ ${d.status} â€¢ ${d.priority}`,link:`/tickets/${d.id}`,icon:se})),...v.slice(0,10).map(d=>({id:d.id,type:"trip",title:d.destination,subtitle:`${d.country} â€¢ ${d.category} â€¢ ${d.status}`,link:"/travel-plan",icon:oe})),...u.slice(0,10).map(d=>({id:d.id,type:"user",title:d.name||d.email,subtitle:`${d.email} â€¢ ${d.role}`,link:"/my-clients",icon:Z}))];i(T),E(0)}catch(p){console.error("Search error:",p),i([])}finally{x(!1)}},600);return()=>clearTimeout(o)},[n]),a.useEffect(()=>{if(b.current){const o=b.current.children[c];o&&o.scrollIntoView({block:"nearest",behavior:"smooth"})}},[c]);const f=o=>{const p=[n,...w.filter(C=>C!==n)].slice(0,5);y(p),localStorage.setItem("recentSearches",JSON.stringify(p)),N(o.link),l()},k=o=>{s(o)},_=()=>{y([]),localStorage.removeItem("recentSearches")};return t?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center pt-[10vh] px-4",onMouseDown:o=>o.stopPropagation(),onKeyDown:o=>o.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-2xl overflow-hidden",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(H,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 flex-shrink-0"}),e.jsx("input",{ref:j,type:"text",value:n,onChange:o=>s(o.target.value),onKeyDown:o=>{o.stopPropagation(),["ArrowDown","ArrowUp"].includes(o.key)?(o.preventDefault(),o.key==="ArrowDown"?E(p=>Math.min(p+1,r.length-1)):E(p=>Math.max(p-1,0))):o.key==="Escape"?(o.preventDefault(),l()):o.key==="Enter"&&r[c]&&(o.preventDefault(),f(r[c]))},placeholder:"Search assets, tickets, trips, users... (min 3 chars)",className:"flex-1 bg-transparent text-lg text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none",autoFocus:!0,autoComplete:"off","data-global-search-input":"true"}),n&&e.jsx("button",{onClick:()=>s(""),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),e.jsx("kbd",{className:"hidden sm:block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded border border-gray-300 dark:border-gray-600",children:"ESC"})]}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[g&&e.jsx("div",{className:"p-12 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),!g&&n&&r.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:['No results found for "',n,'"']}),!g&&n&&r.length>0&&e.jsx("div",{ref:b,className:"py-2",children:r.map((o,p)=>{const C=o.icon;return e.jsxs("button",{onClick:()=>f(o),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left",style:p===c?{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)"}:void 0,children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:o.type==="asset"?"rgba(34, 197, 94, 0.1)":o.type==="ticket"?"rgba(var(--color-primary-rgb), 0.1)":o.type==="trip"?"rgba(249, 115, 22, 0.1)":"rgba(168, 85, 247, 0.1)"},children:e.jsx(C,{className:"w-5 h-5",style:{color:o.type==="asset"?"#22c55e":o.type==="ticket"?"var(--color-primary)":o.type==="trip"?"#f97316":"#a855f7"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:o.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:o.subtitle})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded",style:{backgroundColor:o.type==="asset"?"rgba(34, 197, 94, 0.1)":o.type==="ticket"?"rgba(var(--color-primary-rgb), 0.1)":o.type==="trip"?"rgba(249, 115, 22, 0.1)":"rgba(168, 85, 247, 0.1)",color:o.type==="asset"?"#22c55e":o.type==="ticket"?"var(--color-primary)":o.type==="trip"?"#f97316":"#a855f7"},children:o.type})})]},`${o.type}-${o.id}`)})}),!n&&w.length>0&&e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Recent Searches"})]}),e.jsx("button",{onClick:_,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear"})]}),w.map((o,p)=>e.jsxs("button",{onClick:()=>k(o),className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left",children:[e.jsx(Ce,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:o})]},p))]}),!n&&w.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(H,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Start typing to search across assets, tickets, trips, and users"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"â†‘â†“"}),"Navigate"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"Enter"}),"Select"]})]}),e.jsx("span",{children:"Press Ctrl+K to search anytime"})]})]})]}):null}const de=a.createContext(void 0),Y={blue:{name:"Blue",primary:"#3B82F6",primaryDark:"#2563EB",primaryLight:"#60A5FA",gradient:"from-blue-500 to-blue-600"},purple:{name:"Purple",primary:"#9333EA",primaryDark:"#7E22CE",primaryLight:"#A855F7",gradient:"from-purple-500 to-purple-600"},green:{name:"Green",primary:"#10B981",primaryDark:"#059669",primaryLight:"#34D399",gradient:"from-green-500 to-green-600"},orange:{name:"Orange",primary:"#F97316",primaryDark:"#EA580C",primaryLight:"#FB923C",gradient:"from-orange-500 to-orange-600"},red:{name:"Red",primary:"#EF4444",primaryDark:"#DC2626",primaryLight:"#F87171",gradient:"from-red-500 to-red-600"}};function it({children:t}){const[l,n]=a.useState(()=>{try{const y=localStorage.getItem("user");if(y)return JSON.parse(y).role}catch{}return null}),[s,r]=a.useState(()=>{try{const y=localStorage.getItem("user");if(y){const j=`themeColor_${JSON.parse(y).role}`,b=localStorage.getItem(j);if(b)return b}}catch{}return"blue"}),[i,g]=a.useState(()=>{try{const y=localStorage.getItem("user");if(y){const N=JSON.parse(y),j=`themeMode_${N.role}`,b=localStorage.getItem(j);if(b)return b;const f=`appSettings_${N.id}`,k=localStorage.getItem(f);if(k){const _=JSON.parse(k);if(_.theme==="dark")return"dark";if(_.theme==="light")return"light"}}}catch{}return"light"}),x=y=>{r(y);try{const f=localStorage.getItem("user");if(f){const _=`themeColor_${JSON.parse(f).role}`;localStorage.setItem(_,y)}else localStorage.setItem("themeColor",y)}catch{localStorage.setItem("themeColor",y)}const N=document.documentElement,j=Y[y],b=f=>{const k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);return k?`${parseInt(k[1],16)}, ${parseInt(k[2],16)}, ${parseInt(k[3],16)}`:"59, 130, 246"};N.style.setProperty("--color-primary",j.primary),N.style.setProperty("--color-primary-dark",j.primaryDark),N.style.setProperty("--color-primary-light",j.primaryLight),N.style.setProperty("--color-primary-rgb",b(j.primary))},c=y=>{g(y);try{const N=localStorage.getItem("user");if(N){const b=`themeMode_${JSON.parse(N).role}`;localStorage.setItem(b,y)}else localStorage.setItem("themeMode",y)}catch{localStorage.setItem("themeMode",y)}w(s,y)},E=()=>{c(i==="light"?"dark":"light")},w=(y,N)=>{const j=document.documentElement,b=Y[y],f=k=>{const _=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(k);return _?`${parseInt(_[1],16)}, ${parseInt(_[2],16)}, ${parseInt(_[3],16)}`:"59, 130, 246"};j.style.setProperty("--color-primary",b.primary),j.style.setProperty("--color-primary-dark",b.primaryDark),j.style.setProperty("--color-primary-light",b.primaryLight),j.style.setProperty("--color-primary-rgb",f(b.primary)),N==="dark"?j.classList.add("dark"):j.classList.remove("dark")};return a.useEffect(()=>{w(s,i)},[s,i]),a.useEffect(()=>{const y=()=>{try{const b=localStorage.getItem("user"),f=b?JSON.parse(b).role:null;if(f!==l)if(n(f),f){const k=`themeColor_${f}`,_=`themeMode_${f}`,o=localStorage.getItem(k)||"blue",p=localStorage.getItem(_)||"light";r(o),g(p),w(o,p)}else r("blue"),g("light"),w("blue","light")}catch(b){console.error("Error checking user role change:",b)}};y();const N=setInterval(y,500),j=b=>{b.key==="user"&&y()};return window.addEventListener("storage",j),()=>{clearInterval(N),window.removeEventListener("storage",j)}},[l]),e.jsx(de.Provider,{value:{themeColor:s,themeMode:i,setThemeColor:x,setThemeMode:c,toggleThemeMode:E},children:t})}function ct(){const t=a.useContext(de);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function dt(){const{themeColor:t,setThemeColor:l}=ct(),[n,s]=a.useState(!1),r=i=>{l(i),s(!1)};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>s(!n),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Change Theme Color",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Theme Color"}),e.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(z,{className:"w-4 h-4 text-gray-500"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(Y).map(([i,g])=>{const x=i,c=t===x;return e.jsxs("button",{onClick:()=>r(x),className:`w-full flex items-center gap-3 p-3 rounded-lg transition-all ${c?"bg-gray-100 dark:bg-gray-700 ring-2 ring-offset-2":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,style:c?{"--tw-ring-color":g.primary}:void 0,children:[e.jsx("div",{className:"w-10 h-10 rounded-lg shadow-sm flex items-center justify-center",style:{background:`linear-gradient(135deg, ${g.primary} 0%, ${g.primaryDark} 100%)`},children:c&&e.jsx(Ie,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.primary})]}),c&&e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:g.primary}})]},i)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Theme preference is saved automatically"})})]})]})]})}const ut=a.lazy(()=>h(()=>import("./AIChatWidget-CoxkMgiX.js"),__vite__mapDeps([0,1,2,3,4])));function mt(){const t=U(),[l,n]=a.useState(null),[s,r]=a.useState(!1),[i,g]=a.useState(!1),[x,c]=a.useState(!1),[E,w]=a.useState(!1),y=a.useRef(null);at(),a.useEffect(()=>{const f=k=>{(k.ctrlKey||k.metaKey)&&k.key==="k"&&(k.preventDefault(),c(!0))};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[]),a.useEffect(()=>{const f=()=>{const _=localStorage.getItem("user");if(_){const o=JSON.parse(_);n(o),N(o.id)}else t("/login")};f();const k=()=>{f()};return window.addEventListener("userUpdated",k),()=>{window.removeEventListener("userUpdated",k)}},[t]);const N=f=>{};a.useEffect(()=>{const f=k=>{s&&y.current&&!y.current.contains(k.target)&&r(!1)};return s&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[s]),a.useEffect(()=>{r(!1)},[t]);const b=[{label:"Main",links:[{to:"/",label:"Dashboard",icon:B,exact:!0,roles:["ADMIN","TECHNICIAN","USER"]},{to:"/peg-admin-dashboard",label:"PEG Dashboard",icon:B,exact:!0,roles:["PEG"]}]},{label:"Management",links:[{to:"/assets",label:"All Assets",icon:ae,roles:["ADMIN"]},{to:"/tickets",label:"All Tickets",icon:se,roles:["ADMIN","TECHNICIAN"]},{to:"/analytics",label:"Analytics & Reports",icon:Se,roles:["ADMIN","TECHNICIAN"]},{to:"/advanced-analytics",label:"Advanced Analytics",icon:De,roles:["ADMIN"]},{to:"/my-clients",label:"User Management",icon:Pe,roles:["ADMIN"]}]},{label:"Operations",links:[{to:"/maintenance",label:"Maintenance",icon:Te,roles:["ADMIN","TECHNICIAN"]},{to:"/checkout",label:"Asset Check-in/Out",icon:Le,roles:["ADMIN","TECHNICIAN"]},{to:"/inventory",label:"Inventory",icon:Re,roles:["ADMIN","TECHNICIAN"]},{to:"/depreciation",label:"Depreciation",icon:Me,roles:["ADMIN"]},{to:"/documents",label:"Documents",icon:Oe,roles:["ADMIN","TECHNICIAN","USER"]}]},{label:"My Work",links:[{to:"/my-tasks",label:"My Tasks",icon:$e,roles:["TECHNICIAN","ADMIN"]},{to:"/my-tickets",label:"My Tickets",icon:ze,roles:["USER","ADMIN","TECHNICIAN","PEG"]},{to:"/my-assets",label:"My Assets",icon:Fe,roles:["USER","ADMIN","TECHNICIAN","PEG"]},{to:"/my-peg",label:"My PEG",icon:Ue,roles:["ADMIN","TECHNICIAN","PEG"]},{to:"/travel-plan",label:"Travel Plan",icon:oe,roles:["ADMIN","TECHNICIAN","PEG"]}]},{label:"Security & Privacy",links:[{to:"/audit-logs",label:"Audit Logs",icon:te,roles:["ADMIN"]},{to:"/2fa-management",label:"2FA Management",icon:Ve,roles:["ADMIN"]},{to:"/privacy",label:"Privacy & Data",icon:Ge,roles:["USER","ADMIN","TECHNICIAN","PEG"]}]},{label:"Automation",links:[{to:"/workflows",label:"Workflows",icon:Ke,roles:["ADMIN"]},{to:"/sla-policies",label:"SLA Policies",icon:ne,roles:["ADMIN"]},{to:"/assignment-rules",label:"Auto-Assignment",icon:He,roles:["ADMIN"]},{to:"/workflow-history",label:"Execution History",icon:Be,roles:["ADMIN"]}]},{label:"Configuration",links:[{to:"/whatsapp-setup",label:"WhatsApp Setup",icon:ee,roles:["ADMIN"]}]},{label:"Resources",links:[{to:"/help",label:"Help & Resources",icon:Ye,roles:["USER","ADMIN","TECHNICIAN","PEG"]},{to:"/download-mobile-app",label:"Mobile App",icon:We,roles:["USER","ADMIN","TECHNICIAN","PEG"]}]}].map(f=>({...f,links:f.links.filter(k=>!k.roles||k.roles.includes(l==null?void 0:l.role))})).filter(f=>f.links.length>0);return l?e.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-gray-900 overflow-hidden",style:{height:"100dvh"},children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>r(!1)}),e.jsxs("aside",{ref:y,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),style:{height:"100dvh"},className:`
          bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-900
          border-r border-gray-200 dark:border-gray-700
          flex flex-col
          h-screen
          inset-y-0 left-0 z-50
          transition-all duration-300 ease-in-out

          
          fixed w-64 -translate-x-full
          ${s?"translate-x-0":""}

          
          md:translate-x-0 md:w-20

          
          lg:relative
          ${E?"lg:w-64":"lg:w-20"}

          
          shadow-xl md:shadow-none
        `,children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3",children:[e.jsxs(ge,{to:"/",className:`flex items-center transition-all duration-300 flex-1 min-w-0
              
              ${s?"gap-3":""}
              
              md:justify-center md:w-full
              ${E?"lg:justify-start lg:w-auto lg:gap-3":""}
            `,children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform flex-shrink-0",style:{background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%)"},children:e.jsx("span",{className:"text-white font-bold text-lg",children:"AT"})}),e.jsx("span",{className:`font-bold bg-clip-text text-transparent transition-all duration-300 truncate
              text-lg sm:text-xl
              ${s?"inline md:hidden":"hidden"}
              ${E?"lg:inline":"lg:hidden"}
            `,style:{backgroundImage:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:"AssetTrack Pro"})]}),e.jsx("button",{onClick:()=>r(!1),className:"md:hidden p-2.5 min-w-[44px] min-h-[44px] rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center flex-shrink-0","aria-label":"Close menu",children:e.jsx(z,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto overflow-x-hidden px-2 md:px-3 py-3 md:py-4 space-y-4 md:space-y-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600",children:b.map((f,k)=>{const _=s||E;return e.jsxs("div",{className:"space-y-1",children:[_&&e.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 whitespace-nowrap",children:f.label}),f.links.map(o=>{const p=o.icon,C=!E&&!s;return e.jsx(he,{to:o.to,end:o.exact,className:({isActive:P})=>`flex items-center ${C?"justify-center md:justify-center":"gap-3"}
                        px-3 py-2.5 md:py-3 rounded-lg text-sm font-medium
                        transition-all duration-200 group relative
                        min-h-[44px]
                        ${P?"shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 active:bg-gray-200 dark:active:bg-gray-600"}
                        ${C?"":"hover:translate-x-1"}`,style:({isActive:P})=>P?{background:"linear-gradient(to right, rgba(var(--color-primary-rgb, 59, 130, 246), 0.1), rgba(var(--color-primary-rgb, 59, 130, 246), 0.15))",color:"var(--color-primary)"}:void 0,title:C?o.label:void 0,onClick:()=>{window.innerWidth<768&&r(!1)},children:({isActive:P})=>e.jsxs(e.Fragment,{children:[P&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-r-full",style:{backgroundColor:"var(--color-primary)"}}),e.jsx(p,{className:`${C?"w-6 h-6":"w-5 h-5"} flex-shrink-0
                            ${P?"":"text-gray-500 dark:text-gray-400"}
                            transition-colors`,style:P?{color:"var(--color-primary)"}:void 0}),!C&&e.jsx("span",{className:"truncate",children:o.label}),C&&e.jsxs("div",{className:"hidden md:block absolute left-full ml-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-sm rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-lg pointer-events-none",children:[o.label,e.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-gray-900 dark:border-r-gray-700"})]})]})},o.to)})]},k)})})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",style:{height:"100dvh"},children:[e.jsxs("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-3 sm:px-4 lg:px-6 py-3 md:py-4 flex justify-between items-center gap-2 sm:gap-4 flex-shrink-0 z-[50]",children:[e.jsx("button",{onClick:()=>r(!0),className:"md:hidden p-2.5 min-w-[44px] min-h-[44px] rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center flex-shrink-0","aria-label":"Open menu",children:e.jsx(Je,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4 ml-auto",children:[e.jsx("button",{onClick:()=>c(!0),className:"p-2.5 min-w-[44px] min-h-[44px] rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center text-gray-700 dark:text-gray-300 flex-shrink-0",title:"Global Search (Ctrl+K)","aria-label":"Open global search",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>g(!0),className:"hidden sm:flex p-2.5 min-w-[44px] min-h-[44px] rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors items-center justify-center text-gray-700 dark:text-gray-300 flex-shrink-0",title:"Keyboard Shortcuts (Press ?)","aria-label":"Show keyboard shortcuts",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx(dt,{}),e.jsx(tt,{}),e.jsx(rt,{user:l})]})]}),e.jsx("div",{className:"flex-1 p-3 sm:p-4 md:p-6 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:e.jsx(pe,{})})]}),e.jsx(lt,{isOpen:x,onClose:()=>c(!1)}),e.jsx(nt,{isOpen:i,onClose:()=>g(!1)}),e.jsx(a.Suspense,{fallback:null,children:e.jsx(ut,{})})]}):null}function gt({message:t="Loading"}){return e.jsxs("div",{role:"status","aria-live":"polite","aria-busy":"true",className:"fixed inset-0 flex items-center justify-center z-50 bg-gray-50 dark:bg-gray-900 animate-fade-in",children:[e.jsxs("div",{className:"relative w-20 h-20 animate-scale-in",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-200 dark:border-blue-900"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-blue-600 border-r-purple-600 animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-4 border-transparent border-t-purple-500 border-r-blue-500 animate-spin",style:{animationDirection:"reverse",animationDuration:"1s"}})]}),e.jsx("span",{className:"sr-only",children:t})]})}function jr(t,l=2e3){const[n,s]=a.useState(t),r=a.useRef(null),i=a.useRef(!1);return a.useEffect(()=>{if(t&&!r.current)r.current=Date.now(),s(!0),i.current=!0;else if(!t&&r.current&&i.current){const g=Date.now()-r.current,x=l-g;if(x>0){const c=setTimeout(()=>{s(!1),r.current=null},x);return()=>{clearTimeout(c),r.current=null}}else s(!1),r.current=null}},[t,l]),n}function wr(){return e.jsxs("span",{role:"status","aria-live":"polite","aria-busy":"true",className:"inline-flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"sr-only",children:"Loading"})]})}class ht extends a.Component{constructor(){super(...arguments);V(this,"state",{hasError:!1,error:null,errorInfo:null});V(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});V(this,"handleGoHome",()=>{window.location.href="/"})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,s){console.error("ErrorBoundary caught an error:",n,s),this.setState({error:n,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e.jsx(qe,{className:"w-12 h-12 text-red-600 dark:text-red-400"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. Our team has been notified and we're working on a fix."}),!1,e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{onClick:this.handleReset,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Qe,{className:"w-5 h-5"}),"Try Again"]}),e.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center gap-2 px-6 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-medium transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),"Go Home"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 text-center mt-6",children:"If this problem persists, please contact support with the error details."})]})}):this.props.children}}const pt=()=>e.jsx(gt,{message:"Loading page"}),xt=a.lazy(()=>h(()=>import("./Dashboard-TfHVeH-a.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,10,4,11]))),yt=a.lazy(()=>h(()=>import("./AssetsListPage-BaYIbSgm.js"),__vite__mapDeps([12,1,2,3,6,7,8,13,4]))),J=a.lazy(()=>h(()=>import("./AssetDetailsPage-GSltiJFY.js"),__vite__mapDeps([14,1,2,3,6,7,8,10,4]))),ft=a.lazy(()=>h(()=>import("./TicketsListPage-DjXk4uU3.js"),__vite__mapDeps([15,1,2,3,9,8,10,16,4,13]))),bt=a.lazy(()=>h(()=>import("./TicketDetailsPage-CSVIx9Mu.js"),__vite__mapDeps([17,1,2,3,9,8,10,16,4]))),vt=a.lazy(()=>h(()=>import("./NewTicketPage-CcF8JhYK.js"),__vite__mapDeps([18,1,2,3,9,8,10,7,16,4]))),kt=a.lazy(()=>h(()=>import("./MyAssetsPage-C4PT6X9B.js"),__vite__mapDeps([19,1,2,3,6,7,8,4]))),jt=a.lazy(()=>h(()=>import("./MyTicketsPage-DJqpWojC.js"),__vite__mapDeps([20,1,2,3,9,8,4]))),wt=a.lazy(()=>h(()=>import("./MyTasksPage-C20gOipM.js"),__vite__mapDeps([21,1,2,3,9,8,4]))),Nt=a.lazy(()=>h(()=>import("./MyClientsPage-CY78sEIJ.js"),__vite__mapDeps([22,1,2,3,10,8,4]))),_t=a.lazy(()=>h(()=>import("./MyPEGPage-BFVuxzt6.js"),__vite__mapDeps([23,1,2,3,16,4]))),Et=a.lazy(()=>h(()=>import("./ProvinceDetailsPage-B6Rib-zS.js"),__vite__mapDeps([24,1,2,3,16,4]))),Ct=a.lazy(()=>h(()=>import("./PEGAdminDashboard-pbycJTyr.js"),__vite__mapDeps([25,1,2,3,26,4]))),At=a.lazy(()=>h(()=>import("./TravelPlanPage-DBEkR_xz.js"),__vite__mapDeps([27,1,2,3,16,4]))),It=a.lazy(()=>h(()=>import("./PegRouteCreatorPage-BpIPt_Sn.js"),__vite__mapDeps([28,1,2,3,16,4]))),St=a.lazy(()=>h(()=>import("./PegRouteEditorPage-Dqy8Lwas.js"),__vite__mapDeps([29,1,2,3,16,4]))),Dt=a.lazy(()=>h(()=>import("./MyProfilePage-DKeImd1_.js"),__vite__mapDeps([30,1,2,3,4]))),Pt=a.lazy(()=>h(()=>import("./GeneralSettingsPage-DGiahKnO.js"),__vite__mapDeps([31,1,2,3,4]))),Tt=a.lazy(()=>h(()=>import("./TwoFactorManagementPage-DkZfSF5e.js"),__vite__mapDeps([32,1,2,3,16,4]))),Lt=a.lazy(()=>h(()=>import("./WhatsAppSetup-BjOXtXwz.js"),__vite__mapDeps([33,1,2,3,4]))),Rt=a.lazy(()=>h(()=>import("./AuditLogsPage-KQnlIgkz.js"),__vite__mapDeps([34,2,3,1,4]))),Mt=a.lazy(()=>h(()=>import("./LoginPage-DI_x4pcR.js"),__vite__mapDeps([35,1,2,3,26,36,4]))),Ot=a.lazy(()=>h(()=>import("./SignUpPage-BP3aJJFQ.js"),__vite__mapDeps([37,1,2,3,36,4]))),$t=a.lazy(()=>h(()=>import("./ForgotPasswordPage-CLwrAJ7O.js"),__vite__mapDeps([38,1,2,3,36,4]))),zt=a.lazy(()=>h(()=>import("./ResetPasswordPage-Bl0wFCv4.js"),__vite__mapDeps([39,1,2,3,36,4]))),Ft=a.lazy(()=>h(()=>import("./VerifyOTPPage-BAM-fyBT.js"),__vite__mapDeps([40,1,2,3,4]))),Ut=a.lazy(()=>h(()=>import("./TwoFactorSetupPage-rwN2v1c7.js"),__vite__mapDeps([41,1,2,3,16,4]))),Vt=a.lazy(()=>h(()=>import("./PrivacyDashboard-BwkcVRbB.js"),__vite__mapDeps([42,1,2,3,16,4]))),Gt=a.lazy(()=>h(()=>import("./AnalyticsPage-Ce2eqSVn.js"),__vite__mapDeps([43,1,2,3,6,7,8,9,4,11]))),Kt=a.lazy(()=>h(()=>import("./WorkflowsPage-CFMZdaya.js"),__vite__mapDeps([44,1,2,3,16,4]))),Ht=a.lazy(()=>h(()=>import("./SLAPoliciesPage-C5rQQa9Z.js"),__vite__mapDeps([45,2,3,1,16,4]))),Bt=a.lazy(()=>h(()=>import("./AssignmentRulesPage-Ba5LBUe2.js"),__vite__mapDeps([46,2,3,1,16,4]))),Yt=a.lazy(()=>h(()=>import("./WorkflowHistoryPage-BDLf7rdA.js"),__vite__mapDeps([47,1,2,3,4]))),Wt=a.lazy(()=>h(()=>import("./MaintenancePage-CBj426EB.js"),__vite__mapDeps([48,1,2,3,16,4]))),q=a.lazy(()=>h(()=>import("./MaintenanceFormPage-BlocQUKo.js"),__vite__mapDeps([49,1,2,3,16,4]))),Jt=a.lazy(()=>h(()=>import("./MaintenanceDetailPage-C5OnzTvy.js"),__vite__mapDeps([50,1,2,3,16,4]))),qt=a.lazy(()=>h(()=>import("./CheckoutPage-DULxjtaC.js"),__vite__mapDeps([51,1,2,3,16,4]))),Q=a.lazy(()=>h(()=>import("./CheckoutFormPage-RoxJ5cpb.js"),__vite__mapDeps([52,1,2,3,16,4]))),Qt=a.lazy(()=>h(()=>import("./CheckoutDetailPage-CFAE9Qf2.js"),__vite__mapDeps([53,1,2,3,16,4]))),Xt=a.lazy(()=>h(()=>import("./QRScannerPage-CVINIPpk.js"),__vite__mapDeps([54,1,2,3,16,4]))),Zt=a.lazy(()=>h(()=>import("./QRGeneratorPage-DsM34wXj.js"),__vite__mapDeps([55,1,2,3,16,4]))),er=a.lazy(()=>h(()=>import("./InventoryPage-D9CfaxWy.js"),__vite__mapDeps([56,1,2,3,16,4]))),X=a.lazy(()=>h(()=>import("./InventoryFormPage-B3tRxhkn.js"),__vite__mapDeps([57,1,2,3,16,4]))),tr=a.lazy(()=>h(()=>import("./InventoryDetailPage-5OQ4Bl4K.js"),__vite__mapDeps([58,1,2,3,16,4]))),rr=a.lazy(()=>h(()=>import("./DepreciationPage-DZeqipDc.js"),__vite__mapDeps([59,1,2,3,16,4]))),ar=a.lazy(()=>h(()=>import("./DepreciationFormPage-DVvfks0x.js"),__vite__mapDeps([60,1,2,3,16,4]))),sr=a.lazy(()=>h(()=>import("./DepreciationDetailPage-Bs4Yt6be.js"),__vite__mapDeps([61,1,2,3,16,4]))),or=a.lazy(()=>h(()=>import("./DocumentsPage-D0KOtaNF.js"),__vite__mapDeps([62,1,2,3,16,4]))),nr=a.lazy(()=>h(()=>import("./DocumentUploadPage-DfAAE92a.js"),__vite__mapDeps([63,1,2,3,16,4]))),lr=a.lazy(()=>h(()=>import("./DocumentDetailPage-CoduWXml.js"),__vite__mapDeps([64,1,2,3,16,4]))),ir=a.lazy(()=>h(()=>import("./AdvancedAnalyticsPage-C64onxlc.js"),__vite__mapDeps([65,1,2,3,16,4]))),cr=a.lazy(()=>h(()=>import("./DownloadMobileApp-UWGjGJSv.js"),__vite__mapDeps([66,1,2,3,4]))),dr=a.lazy(()=>h(()=>import("./HelpAndResources-BZYb6O3w.js"),__vite__mapDeps([67,1,2,3,4]))),m=({children:t})=>e.jsx(a.Suspense,{fallback:e.jsx(pt,{}),children:t}),ur=xe([{path:"/login",element:e.jsx(m,{children:e.jsx(Mt,{})})},{path:"/signup",element:e.jsx(m,{children:e.jsx(Ot,{})})},{path:"/forgot-password",element:e.jsx(m,{children:e.jsx($t,{})})},{path:"/reset-password/:token",element:e.jsx(m,{children:e.jsx(zt,{})})},{path:"/verify-otp",element:e.jsx(m,{children:e.jsx(Ft,{})})},{path:"/",element:e.jsx(mt,{}),children:[{index:!0,element:e.jsx(m,{children:e.jsx(xt,{})})},{path:"assets",element:e.jsx(m,{children:e.jsx(yt,{})})},{path:"assets/new",element:e.jsx(m,{children:e.jsx(J,{})})},{path:"assets/:id",element:e.jsx(m,{children:e.jsx(J,{})})},{path:"tickets",element:e.jsx(m,{children:e.jsx(ft,{})})},{path:"tickets/new",element:e.jsx(m,{children:e.jsx(vt,{})})},{path:"tickets/:id",element:e.jsx(m,{children:e.jsx(bt,{})})},{path:"my-tasks",element:e.jsx(m,{children:e.jsx(wt,{})})},{path:"my-clients",element:e.jsx(m,{children:e.jsx(Nt,{})})},{path:"my-assets",element:e.jsx(m,{children:e.jsx(kt,{})})},{path:"my-tickets",element:e.jsx(m,{children:e.jsx(jt,{})})},{path:"my-peg",element:e.jsx(m,{children:e.jsx(_t,{})})},{path:"peg-admin-dashboard",element:e.jsx(m,{children:e.jsx(Ct,{})})},{path:"my-peg/:provinceId",element:e.jsx(m,{children:e.jsx(Et,{})})},{path:"travel-plan",element:e.jsx(m,{children:e.jsx(At,{})})},{path:"travel-plan/peg-route-creator",element:e.jsx(m,{children:e.jsx(It,{})})},{path:"travel-plan/peg-route-editor/:tripId?",element:e.jsx(m,{children:e.jsx(St,{})})},{path:"my-profile",element:e.jsx(m,{children:e.jsx(Dt,{})})},{path:"settings",element:e.jsx(m,{children:e.jsx(Pt,{})})},{path:"2fa-setup",element:e.jsx(m,{children:e.jsx(Ut,{})})},{path:"2fa-management",element:e.jsx(m,{children:e.jsx(Tt,{})})},{path:"privacy",element:e.jsx(m,{children:e.jsx(Vt,{})})},{path:"analytics",element:e.jsx(m,{children:e.jsx(Gt,{})})},{path:"audit-logs",element:e.jsx(m,{children:e.jsx(Rt,{})})},{path:"workflows",element:e.jsx(m,{children:e.jsx(Kt,{})})},{path:"sla-policies",element:e.jsx(m,{children:e.jsx(Ht,{})})},{path:"assignment-rules",element:e.jsx(m,{children:e.jsx(Bt,{})})},{path:"workflow-history",element:e.jsx(m,{children:e.jsx(Yt,{})})},{path:"maintenance",element:e.jsx(m,{children:e.jsx(Wt,{})})},{path:"maintenance/new",element:e.jsx(m,{children:e.jsx(q,{})})},{path:"maintenance/:id",element:e.jsx(m,{children:e.jsx(Jt,{})})},{path:"maintenance/:id/edit",element:e.jsx(m,{children:e.jsx(q,{})})},{path:"checkout",element:e.jsx(m,{children:e.jsx(qt,{})})},{path:"checkout/new",element:e.jsx(m,{children:e.jsx(Q,{})})},{path:"checkout/scan",element:e.jsx(m,{children:e.jsx(Xt,{})}),errorElement:e.jsx(ht,{})},{path:"checkout/qr/generate",element:e.jsx(m,{children:e.jsx(Zt,{})})},{path:"checkout/:id",element:e.jsx(m,{children:e.jsx(Qt,{})})},{path:"checkout/:id/edit",element:e.jsx(m,{children:e.jsx(Q,{})})},{path:"inventory",element:e.jsx(m,{children:e.jsx(er,{})})},{path:"inventory/new",element:e.jsx(m,{children:e.jsx(X,{})})},{path:"inventory/:id",element:e.jsx(m,{children:e.jsx(tr,{})})},{path:"inventory/:id/edit",element:e.jsx(m,{children:e.jsx(X,{})})},{path:"depreciation",element:e.jsx(m,{children:e.jsx(rr,{})})},{path:"depreciation/new",element:e.jsx(m,{children:e.jsx(ar,{})})},{path:"depreciation/:id",element:e.jsx(m,{children:e.jsx(sr,{})})},{path:"documents",element:e.jsx(m,{children:e.jsx(or,{})})},{path:"documents/upload",element:e.jsx(m,{children:e.jsx(nr,{})})},{path:"documents/:id",element:e.jsx(m,{children:e.jsx(lr,{})})},{path:"advanced-analytics",element:e.jsx(m,{children:e.jsx(ir,{})})},{path:"whatsapp-setup",element:e.jsx(m,{children:e.jsx(Lt,{})})},{path:"download-mobile-app",element:e.jsx(m,{children:e.jsx(cr,{})})},{path:"help",element:e.jsx(m,{children:e.jsx(dr,{})})},{path:"*",element:e.jsx(ye,{to:"/",replace:!0})}]}]),mr=()=>{try{const t=localStorage.getItem("user");if(t){const n=`themeMode_${JSON.parse(t).role}`;localStorage.getItem(n)==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}else document.documentElement.classList.remove("dark")}catch(t){console.error("Failed to load theme settings:",t)}};mr();fe.createRoot(document.getElementById("root")).render(e.jsxs(it,{children:[e.jsx(be,{router:ur,future:{v7_startTransition:!0}}),e.jsx(ve,{position:"top-center",toastOptions:{style:{background:"var(--toast-bg, #fff)",color:"var(--toast-text, #333)",border:"1px solid var(--toast-border, #e5e7eb)"},success:{style:{background:"var(--toast-success-bg, #f0fdf4)",color:"var(--toast-success-text, #166534)",border:"1px solid var(--toast-success-border, #86efac)"},iconTheme:{primary:"#22c55e",secondary:"#f0fdf4"}},error:{style:{background:"var(--toast-error-bg, #fef2f2)",color:"var(--toast-error-text, #991b1b)",border:"1px solid var(--toast-error-border, #fca5a5)"},iconTheme:{primary:"#ef4444",secondary:"#fef2f2"}},loading:{style:{background:"var(--toast-loading-bg, #eff6ff)",color:"var(--toast-loading-text, #1e40af)",border:"1px solid var(--toast-loading-border, #93c5fd)"},iconTheme:{primary:"#3b82f6",secondary:"#eff6ff"}}}})]}));export{wr as B,gt as L,ce as M,F as a,kr as b,fr as c,et as d,ct as e,ie as f,R as g,br as h,vr as i,jr as u};
