import{c as T,u as A,r as s,f as M,e as h,j as e,L as E,A as u,P as O,T as $,w as R}from"./index-DWcQtK6o.js";import{showError as D}from"./sweetalert-BCvQYi5m.js";import{D as U}from"./dollar-sign-DO42UX1O.js";import{T as m}from"./triangle-alert-CXmQDx7_.js";import{F as V}from"./filter-CgYaD6_z.js";import{P as p}from"./plus-DN8D_XiN.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=T("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);function Q(){const o=A(),[y,i]=s.useState(!0),w=M(y,2e3),[x,j]=s.useState([]),[a,k]=s.useState(null),[c,b]=s.useState(""),[n,f]=s.useState("all"),[d,N]=s.useState("all"),[v,S]=s.useState([]);s.useEffect(()=>{C(),L()},[n,d]);const C=async()=>{try{i(!0);const t=h(),r={};n!=="all"&&(r.category=n),d!=="all"&&(r.status=d);const l=await t.get("/inventory",{params:r});j(l.data.items||[]);const F=[...new Set(l.data.items.map(P=>P.category))];S(F)}catch(t){console.error("Failed to fetch inventory:",t),await D("Error","Failed to load inventory items")}finally{i(!1)}},L=async()=>{try{const r=await h().get("/inventory/stats");k(r.data)}catch(t){console.error("Failed to fetch stats:",t)}},_=t=>{switch(t){case"out_of_stock":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"reorder_now":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";case"low_stock":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";default:return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}},I=t=>{switch(t){case"out_of_stock":return"Out of Stock";case"reorder_now":return"Reorder Now";case"low_stock":return"Low Stock";default:return"In Stock"}},g=x.filter(t=>{var l;return t.name.toLowerCase().includes(c.toLowerCase())||t.itemCode.toLowerCase().includes(c.toLowerCase())||((l=t.description)==null?void 0:l.toLowerCase().includes(c.toLowerCase()))});return w&&x.length===0?e.jsx(E,{message:"Loading inventory"}):e.jsxs("div",{className:"flex flex-col p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(u,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Inventory Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Track consumable items, stock levels, and manage suppliers"})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.totalItems})]}),e.jsx(O,{className:"w-10 h-10 text-blue-600 dark:text-blue-400 opacity-50"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R",Number(a.totalValue).toLocaleString()]})]}),e.jsx(U,{className:"w-10 h-10 text-green-600 dark:text-green-400 opacity-50"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:a.lowStockCount})]}),e.jsx(m,{className:"w-10 h-10 text-yellow-600 dark:text-yellow-400 opacity-50"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:a.outOfStockCount})]}),e.jsx(m,{className:"w-10 h-10 text-red-600 dark:text-red-400 opacity-50"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.recentTransactions})]}),e.jsx($,{className:"w-10 h-10 text-purple-600 dark:text-purple-400 opacity-50"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search items...",value:c,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:n,onChange:t=>f(t.target.value),className:"px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),v.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("select",{value:d,onChange:t=>N(t.target.value),className:"px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"low",children:"Low Stock"}),e.jsx("option",{value:"out",children:"Out of Stock"})]}),e.jsxs("button",{onClick:()=>o("/inventory/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(p,{className:"w-5 h-5"}),"Add Item"]}),e.jsxs("button",{onClick:()=>o("/inventory/suppliers"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(q,{className:"w-5 h-5"}),"Suppliers"]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[e.jsx(u,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"No inventory items found"}),e.jsxs("button",{onClick:()=>o("/inventory/new"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Add First Item"]})]}):g.map(t=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>o(`/inventory/${t.id}`),children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.itemCode," â€¢ ",t.category]}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:t.description})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${_(t.stockStatus)}`,children:I(t.stockStatus)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Current Stock"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.currentStock," ",t.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Min Stock"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[t.minimumStock," ",t.unit]})]}),t.unitPrice&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:["$",t.unitPrice]})]}),t.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.location})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:"Stock Level"}),e.jsxs("span",{children:[Math.round(t.currentStock/(t.reorderPoint*2)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${t.stockStatus==="out_of_stock"?"bg-red-600":t.stockStatus==="reorder_now"?"bg-orange-600":t.stockStatus==="low_stock"?"bg-yellow-600":"bg-green-600"}`,style:{width:`${Math.min(100,t.currentStock/(t.reorderPoint*2)*100)}%`}})})]})]})})},t.id))})]})}export{Q as default};
