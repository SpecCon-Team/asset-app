import{u as N,r as n,j as e}from"./react-vendor-CLiifM8U.js";import{a as m}from"./index-DAo0lhFG.js";import{showError as d,showSuccess as w}from"./sweetalert-eWj-al0E.js";import"./export-libs-CrC4Cruk.js";import"./vendor-FPNzGmdA.js";import"./ui-libs-w2-9rgNc.js";const I=()=>{const c=N(),[g,x]=n.useState([]),[u,p]=n.useState(!1),[r,f]=n.useState(null),[a,o]=n.useState({title:"",description:"",categoryId:"",tags:""});n.useEffect(()=>{y()},[]);const y=async()=>{try{const t=await m().get("/documents/categories/all");x(t.data.categories||[])}catch(t){console.error("Error loading categories:",t)}},b=t=>{var i;const l=(i=t.target.files)==null?void 0:i[0];l&&(f(l),a.title||o({...a,title:l.name}))},h=async t=>{var l,i;if(t.preventDefault(),!r){d("Please select a file to upload");return}if(!a.title){d("Title is required");return}try{p(!0);const s=new FormData;s.append("file",r),s.append("title",a.title),a.description&&s.append("description",a.description),a.categoryId&&s.append("categoryId",a.categoryId),a.tags&&s.append("tags",JSON.stringify(a.tags.split(",").map(v=>v.trim())));const j=await m().post("/documents/upload",s,{headers:{"Content-Type":"multipart/form-data"}});w("Document uploaded successfully"),c(`/documents/${j.data.document.id}`)}catch(s){console.error("Error uploading document:",s),d(((i=(l=s.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to upload document")}finally{p(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Document"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add a new document to the library"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["File ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt,.csv"}),r&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Selected: ",r.name," (",(r.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:t=>o({...a,title:t.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Document title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>o({...a,description:t.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Describe this document..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:a.categoryId,onChange:t=>o({...a,categoryId:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a category"}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx("input",{type:"text",value:a.tags,onChange:t=>o({...a,tags:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., contract, important, 2024 (comma-separated)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>c("/documents"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Uploading...":"Upload Document"})]})]})]})};export{I as default};
