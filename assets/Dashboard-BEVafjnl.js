import{c as Pt,a as It,g as Dt,b as Tt,r as h,d as Lt,u as _e,e as Rt,j as e,C as Ee,T as $e,f as Mt,W as Bt,h as Ke,L as He,i as Ce,k as ht,P as Ft}from"./index-B_IVq7rD.js";import{u as Ae}from"./store-B9ZJt2Yy.js";import{u as Ne}from"./store-COrRbb_B.js";import{l as Wt}from"./api-uVVZuuLu.js";import{C as ve}from"./circle-check-big-BmZzEJ10.js";import{T as Je}from"./triangle-alert-DnVPNnEw.js";import{A as zt}from"./activity-CG7AN6Y0.js";import{P as Ut,a as $t}from"./play-vYJkzMfW.js";import{r as Le,c as mt,a as Kt,S as Ht,b as Vt,u as gt,s as qt,d as Gt,e as Yt,f as Jt,g as Qt,h as Xt,i as pe,j as pt,k as Zt,l as Qe,m as er,n as Ve,o as qe,p as ft,q as xt,t as tr,v as rr,w as Xe,x as ar,y as yt,z as Ze,A as sr,D as ir,B as bt,R as nr,C as lr,E as or,F as dr,G as cr,H as ur,I as vt,J as hr,K as mr,L as gr,M as pr,N as fr,O as xr,Z as yr,P as Oe,Q as br,T as et,U as tt,V as rt,W as vr,X as kr,Y as ye,_ as jr,$ as wr,a0 as Nr,a1 as _r,a2 as kt,a3 as Ar,a4 as Me,a5 as Sr,a6 as Pe,a7 as Er,a8 as Cr,a9 as Be,aa as Or,ab as Pr,ac as at,ad as Fe,ae as Ir,af as st,ag as it,ah as nt,ai as Dr}from"./PieChart-9IvAWL0b.js";import{C as Ie}from"./circle-alert-CtZR6vli.js";import"./api-BguKtNX6.js";import"./types-D8_qC6eW.js";import"./react-redux-BWdY65De.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Pt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),We=It(t=>({users:[],isLoading:!1,error:null,fetchUsers:async()=>{t({isLoading:!0,error:null});try{const r=await Wt();t({users:r,isLoading:!1})}catch(r){t({error:r.message,isLoading:!1})}}}));var jt={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,r){((a,s)=>{t.exports=s()})(Tt,function a(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},u,o=!s.document&&!!s.postMessage,p=s.IS_PAPA_WORKER||!1,g={},f=0,c={};function k(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(i){var d=Y(i);d.chunkSize=parseInt(d.chunkSize),i.step||i.chunk||(d.chunkSize=null),this._handle=new T(d),(this._handle.streamer=this)._config=d}).call(this,n),this.parseChunk=function(i,d){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let l=this._config.newline;l||(b=this._config.quoteChar||'"',l=this._handle.guessLineEndings(i,b)),i=[...i.split(l).slice(v)].join(l)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(b=this._config.beforeFirstChunk(i))!==void 0&&(i=b),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+i,b=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(i=b.meta.cursor,v=(this._finished||(this._partialLine=v.substring(i-this._baseIndex),this._baseIndex=i),b&&b.data&&(this._rowCount+=b.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),p)s.postMessage({results:b,workerId:c.WORKER_ID,finished:v});else if(I(this._config.chunk)&&!d){if(this._config.chunk(b,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=b=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(b.data),this._completeResults.errors=this._completeResults.errors.concat(b.errors),this._completeResults.meta=b.meta),this._completed||!v||!I(this._config.complete)||b&&b.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||b&&b.meta.paused||this._nextChunk(),b}this._halted=!0},this._sendError=function(i){I(this._config.error)?this._config.error(i):p&&this._config.error&&s.postMessage({workerId:c.WORKER_ID,error:i,finished:!1})}}function O(n){var i;(n=n||{}).chunkSize||(n.chunkSize=c.RemoteChunkSize),k.call(this,n),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),o||(i.onload=E(this._chunkLoaded,this),i.onerror=E(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var d,v=this._config.downloadRequestHeaders;for(d in v)i.setRequestHeader(d,v[d])}var b;this._config.chunkSize&&(b=this._start+this._config.chunkSize-1,i.setRequestHeader("Range","bytes="+this._start+"-"+b));try{i.send(this._config.downloadRequestBody)}catch(l){this._chunkError(l.message)}o&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize||i.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(i),this.parseChunk(i.responseText)))},this._chunkError=function(d){d=i.statusText||d,this._sendError(new Error(d))}}function y(n){(n=n||{}).chunkSize||(n.chunkSize=c.LocalChunkSize),k.call(this,n);var i,d,v=typeof FileReader<"u";this.stream=function(b){this._input=b,d=b.slice||b.webkitSlice||b.mozSlice,v?((i=new FileReader).onload=E(this._chunkLoaded,this),i.onerror=E(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var b=this._input,l=(this._config.chunkSize&&(l=Math.min(this._start+this._config.chunkSize,this._input.size),b=d.call(b,this._start,l)),i.readAsText(b,this._config.encoding));v||this._chunkLoaded({target:{result:l}})},this._chunkLoaded=function(b){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(b.target.result)},this._chunkError=function(){this._sendError(i.error)}}function x(n){var i;k.call(this,n=n||{}),this.stream=function(d){return i=d,this._nextChunk()},this._nextChunk=function(){var d,v;if(!this._finished)return d=this._config.chunkSize,i=d?(v=i.substring(0,d),i.substring(d)):(v=i,""),this._finished=!i,this.parseChunk(v)}}function N(n){k.call(this,n=n||{});var i=[],d=!0,v=!1;this.pause=function(){k.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){k.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(b){this._input=b,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):d=!0},this._streamData=E(function(b){try{i.push(typeof b=="string"?b:b.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(l){this._streamError(l)}},this),this._streamError=E(function(b){this._streamCleanUp(),this._sendError(b)},this),this._streamEnd=E(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function T(n){var i,d,v,b,l=Math.pow(2,53),D=-l,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,W=0,m=0,K=!1,j=!1,P=[],w={data:[],errors:[],meta:{}};function J(L){return n.skipEmptyLines==="greedy"?L.join("").trim()==="":L.length===1&&L[0].length===0}function Q(){if(w&&v&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),v=!1),n.skipEmptyLines&&(w.data=w.data.filter(function(A){return!J(A)})),ee()){let A=function(G,X){I(n.transformHeader)&&(G=n.transformHeader(G,X)),P.push(G)};if(w)if(Array.isArray(w.data[0])){for(var L=0;ee()&&L<w.data.length;L++)w.data[L].forEach(A);w.data.splice(0,1)}else w.data.forEach(A)}function F(A,G){for(var X=n.header?{}:[],U=0;U<A.length;U++){var $=U,R=A[U],R=((le,C)=>(V=>(n.dynamicTypingFunction&&n.dynamicTyping[V]===void 0&&(n.dynamicTyping[V]=n.dynamicTypingFunction(V)),(n.dynamicTyping[V]||n.dynamicTyping)===!0))(le)?C==="true"||C==="TRUE"||C!=="false"&&C!=="FALSE"&&((V=>{if(z.test(V)&&(V=parseFloat(V),D<V&&V<l))return 1})(C)?parseFloat(C):H.test(C)?new Date(C):C===""?null:C):C)($=n.header?U>=P.length?"__parsed_extra":P[U]:$,R=n.transform?n.transform(R,$):R);$==="__parsed_extra"?(X[$]=X[$]||[],X[$].push(R)):X[$]=R}return n.header&&(U>P.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+U,m+G):U<P.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+U,m+G)),X}var q;w&&(n.header||n.dynamicTyping||n.transform)&&(q=1,!w.data.length||Array.isArray(w.data[0])?(w.data=w.data.map(F),q=w.data.length):w.data=F(w.data,0),n.header&&w.meta&&(w.meta.fields=P),m+=q)}function ee(){return n.header&&P.length===0}function ie(L,F,q,A){L={type:L,code:F,message:q},A!==void 0&&(L.row=A),w.errors.push(L)}I(n.step)&&(b=n.step,n.step=function(L){w=L,ee()?Q():(Q(),w.data.length!==0&&(W+=L.data.length,n.preview&&W>n.preview?d.abort():(w.data=w.data[0],b(w,S))))}),this.parse=function(L,F,q){var A=n.quoteChar||'"',A=(n.newline||(n.newline=this.guessLineEndings(L,A)),v=!1,n.delimiter?I(n.delimiter)&&(n.delimiter=n.delimiter(L),w.meta.delimiter=n.delimiter):((A=((G,X,U,$,R)=>{var le,C,V,he;R=R||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var fe=0;fe<R.length;fe++){for(var oe,je=R[fe],ae=0,de=0,Z=0,se=(V=void 0,new M({comments:$,delimiter:je,newline:X,preview:10}).parse(G)),ue=0;ue<se.data.length;ue++)U&&J(se.data[ue])?Z++:(oe=se.data[ue].length,de+=oe,V===void 0?V=oe:0<oe&&(ae+=Math.abs(oe-V),V=oe));0<se.data.length&&(de/=se.data.length-Z),(C===void 0||ae<=C)&&(he===void 0||he<de)&&1.99<de&&(C=ae,le=je,he=de)}return{successful:!!(n.delimiter=le),bestDelimiter:le}})(L,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=A.bestDelimiter:(v=!0,n.delimiter=c.DefaultDelimiter),w.meta.delimiter=n.delimiter),Y(n));return n.preview&&n.header&&A.preview++,i=L,d=new M(A),w=d.parse(i,F,q),Q(),K?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return K},this.pause=function(){K=!0,d.abort(),i=I(n.chunk)?"":i.substring(d.getCharIndex())},this.resume=function(){S.streamer._halted?(K=!1,S.streamer.parseChunk(i,!0)):setTimeout(S.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,d.abort(),w.meta.aborted=!0,I(n.complete)&&n.complete(w),i=""},this.guessLineEndings=function(G,A){G=G.substring(0,1048576);var A=new RegExp(_(A)+"([^]*?)"+_(A),"gm"),q=(G=G.replace(A,"")).split("\r"),A=G.split(`
`),G=1<A.length&&A[0].length<q[0].length;if(q.length===1||G)return`
`;for(var X=0,U=0;U<q.length;U++)q[U][0]===`
`&&X++;return X>=q.length/2?`\r
`:"\r"}}function _(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(n){var i=(n=n||{}).delimiter,d=n.newline,v=n.comments,b=n.step,l=n.preview,D=n.fastMode,z=null,H=!1,S=n.quoteChar==null?'"':n.quoteChar,W=S;if(n.escapeChar!==void 0&&(W=n.escapeChar),(typeof i!="string"||-1<c.BAD_DELIMITERS.indexOf(i))&&(i=","),v===i)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<c.BAD_DELIMITERS.indexOf(v))&&(v=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var m=0,K=!1;this.parse=function(j,P,w){if(typeof j!="string")throw new Error("Input must be a string");var J=j.length,Q=i.length,ee=d.length,ie=v.length,L=I(b),F=[],q=[],A=[],G=m=0;if(!j)return ae();if(D||D!==!1&&j.indexOf(S)===-1){for(var X=j.split(d),U=0;U<X.length;U++){if(A=X[U],m+=A.length,U!==X.length-1)m+=d.length;else if(w)return ae();if(!v||A.substring(0,ie)!==v){if(L){if(F=[],he(A.split(i)),de(),K)return ae()}else he(A.split(i));if(l&&l<=U)return F=F.slice(0,l),ae(!0)}}return ae()}for(var $=j.indexOf(i,m),R=j.indexOf(d,m),le=new RegExp(_(W)+_(S),"g"),C=j.indexOf(S,m);;)if(j[m]===S)for(C=m,m++;;){if((C=j.indexOf(S,C+1))===-1)return w||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:F.length,index:m}),oe();if(C===J-1)return oe(j.substring(m,C).replace(le,S));if(S===W&&j[C+1]===W)C++;else if(S===W||C===0||j[C-1]!==W){$!==-1&&$<C+1&&($=j.indexOf(i,C+1));var V=fe((R=R!==-1&&R<C+1?j.indexOf(d,C+1):R)===-1?$:Math.min($,R));if(j.substr(C+1+V,Q)===i){A.push(j.substring(m,C).replace(le,S)),j[m=C+1+V+Q]!==S&&(C=j.indexOf(S,m)),$=j.indexOf(i,m),R=j.indexOf(d,m);break}if(V=fe(R),j.substring(C+1+V,C+1+V+ee)===d){if(A.push(j.substring(m,C).replace(le,S)),je(C+1+V+ee),$=j.indexOf(i,m),C=j.indexOf(S,m),L&&(de(),K))return ae();if(l&&F.length>=l)return ae(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:F.length,index:m}),C++}}else if(v&&A.length===0&&j.substring(m,m+ie)===v){if(R===-1)return ae();m=R+ee,R=j.indexOf(d,m),$=j.indexOf(i,m)}else if($!==-1&&($<R||R===-1))A.push(j.substring(m,$)),m=$+Q,$=j.indexOf(i,m);else{if(R===-1)break;if(A.push(j.substring(m,R)),je(R+ee),L&&(de(),K))return ae();if(l&&F.length>=l)return ae(!0)}return oe();function he(Z){F.push(Z),G=m}function fe(Z){var se=0;return se=Z!==-1&&(Z=j.substring(C+1,Z))&&Z.trim()===""?Z.length:se}function oe(Z){return w||(Z===void 0&&(Z=j.substring(m)),A.push(Z),m=J,he(A),L&&de()),ae()}function je(Z){m=Z,he(A),A=[],R=j.indexOf(d,m)}function ae(Z){if(n.header&&!P&&F.length&&!H){var se=F[0],ue=Object.create(null),Re=new Set(se);let Ge=!1;for(let xe=0;xe<se.length;xe++){let ce=se[xe];if(ue[ce=I(n.transformHeader)?n.transformHeader(ce,xe):ce]){let we,Ye=ue[ce];for(;we=ce+"_"+Ye,Ye++,Re.has(we););Re.add(we),se[xe]=we,ue[ce]++,Ge=!0,(z=z===null?{}:z)[we]=ce}else ue[ce]=1,se[xe]=ce;Re.add(ce)}Ge&&console.warn("Duplicate headers found and renamed."),H=!0}return{data:F,errors:q,meta:{delimiter:i,linebreak:d,aborted:K,truncated:!!Z,cursor:G+(P||0),renamedHeaders:z}}}function de(){b(ae()),F=[],q=[]}},this.abort=function(){K=!0},this.getCharIndex=function(){return m}}function te(n){var i=n.data,d=g[i.workerId],v=!1;if(i.error)d.userError(i.error,i.file);else if(i.results&&i.results.data){var b={abort:function(){v=!0,re(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(I(d.userStep)){for(var l=0;l<i.results.data.length&&(d.userStep({data:i.results.data[l],errors:i.results.errors,meta:i.results.meta},b),!v);l++);delete i.results}else I(d.userChunk)&&(d.userChunk(i.results,b,i.file),delete i.results)}i.finished&&!v&&re(i.workerId,i.results)}function re(n,i){var d=g[n];I(d.userComplete)&&d.userComplete(i),d.terminate(),delete g[n]}function B(){throw new Error("Not implemented.")}function Y(n){if(typeof n!="object"||n===null)return n;var i,d=Array.isArray(n)?[]:{};for(i in n)d[i]=Y(n[i]);return d}function E(n,i){return function(){n.apply(i,arguments)}}function I(n){return typeof n=="function"}return c.parse=function(n,i){var d=(i=i||{}).dynamicTyping||!1;if(I(d)&&(i.dynamicTypingFunction=d,d={}),i.dynamicTyping=d,i.transform=!!I(i.transform)&&i.transform,!i.worker||!c.WORKERS_SUPPORTED)return d=null,c.NODE_STREAM_INPUT,typeof n=="string"?(n=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(n),d=new(i.download?O:x)(i)):n.readable===!0&&I(n.read)&&I(n.on)?d=new N(i):(s.File&&n instanceof File||n instanceof Object)&&(d=new y(i)),d.stream(n);(d=(()=>{var v;return!!c.WORKERS_SUPPORTED&&(v=(()=>{var b=s.URL||s.webkitURL||null,l=a.toString();return c.BLOB_URL||(c.BLOB_URL=b.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",l,")();"],{type:"text/javascript"})))})(),(v=new s.Worker(v)).onmessage=te,v.id=f++,g[v.id]=v)})()).userStep=i.step,d.userChunk=i.chunk,d.userComplete=i.complete,d.userError=i.error,i.step=I(i.step),i.chunk=I(i.chunk),i.complete=I(i.complete),i.error=I(i.error),delete i.worker,d.postMessage({input:n,config:i,workerId:d.id})},c.unparse=function(n,i){var d=!1,v=!0,b=",",l=`\r
`,D='"',z=D+D,H=!1,S=null,W=!1,m=((()=>{if(typeof i=="object"){if(typeof i.delimiter!="string"||c.BAD_DELIMITERS.filter(function(P){return i.delimiter.indexOf(P)!==-1}).length||(b=i.delimiter),typeof i.quotes!="boolean"&&typeof i.quotes!="function"&&!Array.isArray(i.quotes)||(d=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(H=i.skipEmptyLines),typeof i.newline=="string"&&(l=i.newline),typeof i.quoteChar=="string"&&(D=i.quoteChar),typeof i.header=="boolean"&&(v=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");S=i.columns}i.escapeChar!==void 0&&(z=i.escapeChar+D),i.escapeFormulae instanceof RegExp?W=i.escapeFormulae:typeof i.escapeFormulae=="boolean"&&i.escapeFormulae&&(W=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(D),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return K(null,n,H);if(typeof n[0]=="object")return K(S||Object.keys(n[0]),n,H)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||S),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),K(n.fields||[],n.data||[],H);throw new Error("Unable to serialize unrecognized input");function K(P,w,J){var Q="",ee=(typeof P=="string"&&(P=JSON.parse(P)),typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(P)&&0<P.length),ie=!Array.isArray(w[0]);if(ee&&v){for(var L=0;L<P.length;L++)0<L&&(Q+=b),Q+=j(P[L],L);0<w.length&&(Q+=l)}for(var F=0;F<w.length;F++){var q=(ee?P:w[F]).length,A=!1,G=ee?Object.keys(w[F]).length===0:w[F].length===0;if(J&&!ee&&(A=J==="greedy"?w[F].join("").trim()==="":w[F].length===1&&w[F][0].length===0),J==="greedy"&&ee){for(var X=[],U=0;U<q;U++){var $=ie?P[U]:U;X.push(w[F][$])}A=X.join("").trim()===""}if(!A){for(var R=0;R<q;R++){0<R&&!G&&(Q+=b);var le=ee&&ie?P[R]:R;Q+=j(w[F][le],R)}F<w.length-1&&(!J||0<q&&!G)&&(Q+=l)}}return Q}function j(P,w){var J,Q;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(Q=!1,W&&typeof P=="string"&&W.test(P)&&(P="'"+P,Q=!0),J=P.toString().replace(m,z),(Q=Q||d===!0||typeof d=="function"&&d(P,w)||Array.isArray(d)&&d[w]||((ee,ie)=>{for(var L=0;L<ie.length;L++)if(-1<ee.indexOf(ie[L]))return!0;return!1})(J,c.BAD_DELIMITERS)||-1<J.indexOf(b)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?D+J+D:J)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!o&&!!s.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=M,c.ParserHandle=T,c.NetworkStreamer=O,c.FileStreamer=y,c.StringStreamer=x,c.ReadableStreamStreamer=N,s.jQuery&&((u=s.jQuery).fn.parse=function(n){var i=n.config||{},d=[];return this.each(function(l){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var D=0;D<this.files.length;D++)d.push({file:this.files[D],inputElem:this,instanceConfig:u.extend({},i)})}),v(),this;function v(){if(d.length===0)I(n.complete)&&n.complete();else{var l,D,z,H,S=d[0];if(I(n.before)){var W=n.before(S.file,S.inputElem);if(typeof W=="object"){if(W.action==="abort")return l="AbortError",D=S.file,z=S.inputElem,H=W.reason,void(I(n.error)&&n.error({name:l},D,z,H));if(W.action==="skip")return void b();typeof W.config=="object"&&(S.instanceConfig=u.extend(S.instanceConfig,W.config))}else if(W==="skip")return void b()}var m=S.instanceConfig.complete;S.instanceConfig.complete=function(K){I(m)&&m(K,S.file,S.inputElem),b()},c.parse(S.file,S.instanceConfig)}}function b(){d.splice(0,1),v()}}),p&&(s.onmessage=function(n){n=n.data,c.WORKER_ID===void 0&&n&&(c.WORKER_ID=n.workerId),typeof n.input=="string"?s.postMessage({workerId:c.WORKER_ID,results:c.parse(n.input,n.config),finished:!0}):(s.File&&n.input instanceof File||n.input instanceof Object)&&(n=c.parse(n.input,n.config))&&s.postMessage({workerId:c.WORKER_ID,results:n,finished:!0})}),(O.prototype=Object.create(k.prototype)).constructor=O,(y.prototype=Object.create(k.prototype)).constructor=y,(x.prototype=Object.create(x.prototype)).constructor=x,(N.prototype=Object.create(k.prototype)).constructor=N,c})})(jt);var Tr=jt.exports;const Lr=Dt(Tr);function De(){return De=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},De.apply(null,arguments)}function ot(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,s)}return a}function Rr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ot(Object(a),!0).forEach(function(s){Mr(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Mr(t,r,a){return(r=Br(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Br(t){var r=Fr(t,"string");return typeof r=="symbol"?r:r+""}function Fr(t,r){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var ne=32,Wr={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function zr(t){var{data:r,iconType:a,inactiveColor:s}=t,u=ne/2,o=ne/6,p=ne/3,g=r.inactive?s:r.color,f=a??r.type;if(f==="none")return null;if(f==="plainline"){var c;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:g,strokeDasharray:(c=r.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:u,x2:ne,y2:u,className:"recharts-legend-icon"})}if(f==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:g,d:"M0,".concat(u,"h").concat(p,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*p,",").concat(u,`
            H`).concat(ne,"M").concat(2*p,",").concat(u,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(p,",").concat(u),className:"recharts-legend-icon"});if(f==="rect")return h.createElement("path",{stroke:"none",fill:g,d:"M0,".concat(ne/8,"h").concat(ne,"v").concat(ne*3/4,"h").concat(-ne,"z"),className:"recharts-legend-icon"});if(h.isValidElement(r.legendIcon)){var k=Rr({},r);return delete k.legendIcon,h.cloneElement(r.legendIcon,k)}return h.createElement(Vt,{fill:g,cx:u,cy:u,size:ne,sizeType:"diameter",type:f})}function Ur(t){var{payload:r,iconSize:a,layout:s,formatter:u,inactiveColor:o,iconType:p}=t,g={x:0,y:0,width:ne,height:ne},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((k,O)=>{var y=k.formatter||u,x=mt({"recharts-legend-item":!0,["legend-item-".concat(O)]:!0,inactive:k.inactive});if(k.type==="none")return null;var N=k.inactive?o:k.color,T=y?y(k.value,k,O):k.value;return h.createElement("li",De({className:x,style:f,key:"legend-item-".concat(O)},Kt(t,k,O)),h.createElement(Ht,{width:a,height:a,viewBox:g,style:c,"aria-label":"".concat(T," legend icon")},h.createElement(zr,{data:k,iconType:p,inactiveColor:o})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},T))})}var $r=t=>{var r=Le(t,Wr),{payload:a,layout:s,align:u}=r;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?u:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:o},h.createElement(Ur,De({},r,{payload:a})))};function Kr(){return gt(qt)}var Hr=["contextPayload"];function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Ue.apply(null,arguments)}function dt(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,s)}return a}function ke(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?dt(Object(a),!0).forEach(function(s){Vr(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Vr(t,r,a){return(r=qr(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function qr(t){var r=Gr(t,"string");return typeof r=="symbol"?r:r+""}function Gr(t,r){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Yr(t,r){if(t==null)return{};var a,s,u=Jr(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(u[a]=t[a])}return u}function Jr(t,r){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;a[s]=t[s]}return a}function Qr(t){return t.value}function Xr(t){var{contextPayload:r}=t,a=Yr(t,Hr),s=er(r,t.payloadUniqBy,Qr),u=ke(ke({},a),{},{payload:s});return h.isValidElement(t.content)?h.cloneElement(t.content,u):typeof t.content=="function"?h.createElement(t.content,u):h.createElement($r,u)}function Zr(t,r,a,s,u,o){var{layout:p,align:g,verticalAlign:f}=r,c,k;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(g==="center"&&p==="vertical"?c={left:((s||0)-o.width)/2}:c=g==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(f==="middle"?k={top:((u||0)-o.height)/2}:k=f==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),ke(ke({},c),k)}function ea(t){var r=pt();return h.useEffect(()=>{r(Zt(t))},[r,t]),null}function ta(t){var r=pt();return h.useEffect(()=>(r(Qe(t)),()=>{r(Qe({width:0,height:0}))}),[r,t]),null}function ra(t,r,a,s){return t==="vertical"&&pe(r)?{height:r}:t==="horizontal"?{width:a||s}:null}var aa={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function wt(t){var r=Le(t,aa),a=Kr(),s=Gt(),u=Yt(),{width:o,height:p,wrapperStyle:g,portal:f}=r,[c,k]=Jt([a]),O=Qt(),y=Xt();if(O==null||y==null)return null;var x=O-((u==null?void 0:u.left)||0)-((u==null?void 0:u.right)||0),N=ra(r.layout,p,o,x),T=f?g:ke(ke({position:"absolute",width:(N==null?void 0:N.width)||o||"auto",height:(N==null?void 0:N.height)||p||"auto"},Zr(g,r,u,O,y,c)),g),_=f??s;if(_==null||a==null)return null;var M=h.createElement("div",{className:"recharts-legend-wrapper",style:T,ref:k},h.createElement(ea,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),h.createElement(ta,{width:c.width,height:c.height}),h.createElement(Xr,Ue({},r,N,{margin:u,chartWidth:O,chartHeight:y,contextPayload:a})));return Lt.createPortal(M,_)}wt.displayName="Legend";var Nt=(t,r,a,s)=>ft(t,"xAxis",r,s),_t=(t,r,a,s)=>xt(t,"xAxis",r,s),At=(t,r,a,s)=>ft(t,"yAxis",a,s),St=(t,r,a,s)=>xt(t,"yAxis",a,s),sa=Ve([qe,Nt,At,_t,St],(t,r,a,s,u)=>yt(t,"xAxis")?Ze(r,s,!1):Ze(a,u,!1)),ia=(t,r,a,s,u)=>u,Et=Ve([sr,ia],(t,r)=>t.filter(a=>a.type==="area").find(a=>a.id===r)),na=(t,r,a,s,u)=>{var o,p=Et(t,r,a,s,u);if(p!=null){var g=qe(t),f=yt(g,"xAxis"),c;if(f?c=Xe(t,"yAxis",a,s):c=Xe(t,"xAxis",r,s),c!=null){var{stackId:k}=p,O=ar(p);if(!(k==null||O==null)){var y=(o=c[k])===null||o===void 0?void 0:o.stackedData;return y==null?void 0:y.find(x=>x.key===O)}}}},la=Ve([qe,Nt,At,_t,St,na,tr,sa,Et,rr],(t,r,a,s,u,o,p,g,f,c)=>{var{chartData:k,dataStartIndex:O,dataEndIndex:y}=p;if(!(f==null||t!=="horizontal"&&t!=="vertical"||r==null||a==null||s==null||u==null||s.length===0||u.length===0||g==null)){var{data:x}=f,N;if(x&&x.length>0?N=x:N=k==null?void 0:k.slice(O,y+1),N!=null)return Aa({layout:t,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:u,dataStartIndex:O,areaSettings:f,stackedData:o,displayedData:N,chartBaseValue:c,bandSize:g})}}),oa=["id"],da=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ge(){return ge=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ge.apply(null,arguments)}function Ct(t,r){if(t==null)return{};var a,s,u=ca(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)a=o[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(u[a]=t[a])}return u}function ca(t,r){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;a[s]=t[s]}return a}function ct(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,s)}return a}function be(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ct(Object(a),!0).forEach(function(s){ua(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ct(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function ua(t,r,a){return(r=ha(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ha(t){var r=ma(t,"string");return typeof r=="symbol"?r:r+""}function ma(t,r){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Te(t,r){return t&&t!=="none"?t:r}var ga=t=>{var{dataKey:r,name:a,stroke:s,fill:u,legendType:o,hide:p}=t;return[{inactive:p,dataKey:r,type:o,color:Te(s,u),value:vt(a,r),payload:t}]};function pa(t){var{dataKey:r,data:a,stroke:s,strokeWidth:u,fill:o,name:p,hide:g,unit:f}=t;return{dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:u,fill:o,dataKey:r,nameKey:void 0,name:vt(p,r),hide:g,type:t.tooltipType,color:Te(s,o),unit:f}}}function fa(t){var{clipPathId:r,points:a,props:s}=t,{needClip:u,dot:o,dataKey:p}=s,g=kt(s);return h.createElement(Sr,{points:a,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:p,baseProps:g,needClip:u,clipPathId:r})}function xa(t){var{showLabels:r,children:a,points:s}=t,u=s.map(o=>{var p,g,f={x:(p=o.x)!==null&&p!==void 0?p:0,y:(g=o.y)!==null&&g!==void 0?g:0,width:0,lowerWidth:0,upperWidth:0,height:0};return be(be({},f),{},{value:o.value,payload:o.payload,parentViewBox:void 0,viewBox:f,fill:void 0})});return h.createElement(_r,{value:r?u:void 0},a)}function ut(t){var{points:r,baseLine:a,needClip:s,clipPathId:u,props:o}=t,{layout:p,type:g,stroke:f,connectNulls:c,isRange:k}=o,{id:O}=o,y=Ct(o,oa),x=kt(y),N=Ar(y);return h.createElement(h.Fragment,null,(r==null?void 0:r.length)>1&&h.createElement(Oe,{clipPath:s?"url(#clipPath-".concat(u,")"):void 0},h.createElement(Me,ge({},N,{id:O,points:r,connectNulls:c,type:g,baseLine:a,layout:p,stroke:"none",className:"recharts-area-area"})),f!=="none"&&h.createElement(Me,ge({},x,{className:"recharts-area-curve",layout:p,type:g,connectNulls:c,fill:"none",points:r})),f!=="none"&&k&&h.createElement(Me,ge({},x,{className:"recharts-area-curve",layout:p,type:g,connectNulls:c,fill:"none",points:a}))),h.createElement(fa,{points:r,props:y,clipPathId:u}))}function ya(t){var{alpha:r,baseLine:a,points:s,strokeWidth:u}=t,o=s[0].y,p=s[s.length-1].y;if(!Pe(o)||!Pe(p))return null;var g=r*Math.abs(o-p),f=Math.max(...s.map(c=>c.x||0));return pe(a)?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(...a.map(c=>c.x||0),f)),pe(f)?h.createElement("rect",{x:0,y:o<p?o:o-g,width:f+(u?parseInt("".concat(u),10):1),height:Math.floor(g)}):null}function ba(t){var{alpha:r,baseLine:a,points:s,strokeWidth:u}=t,o=s[0].x,p=s[s.length-1].x;if(!Pe(o)||!Pe(p))return null;var g=r*Math.abs(o-p),f=Math.max(...s.map(c=>c.y||0));return pe(a)?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(...a.map(c=>c.y||0),f)),pe(f)?h.createElement("rect",{x:o<p?o:o-g,y:0,width:g,height:Math.floor(f+(u?parseInt("".concat(u),10):1))}):null}function va(t){var{alpha:r,layout:a,points:s,baseLine:u,strokeWidth:o}=t;return a==="vertical"?h.createElement(ya,{alpha:r,points:s,baseLine:u,strokeWidth:o}):h.createElement(ba,{alpha:r,points:s,baseLine:u,strokeWidth:o})}function ka(t){var{needClip:r,clipPathId:a,props:s,previousPointsRef:u,previousBaselineRef:o}=t,{points:p,baseLine:g,isAnimationActive:f,animationBegin:c,animationDuration:k,animationEasing:O,onAnimationStart:y,onAnimationEnd:x}=s,N=vr(s,"recharts-area-"),[T,_]=h.useState(!1),M=!T,te=h.useCallback(()=>{typeof x=="function"&&x(),_(!1)},[x]),re=h.useCallback(()=>{typeof y=="function"&&y(),_(!0)},[y]),B=u.current,Y=o.current;return h.createElement(xa,{showLabels:M,points:p},s.children,h.createElement(kr,{animationId:N,begin:c,duration:k,isActive:f,easing:O,onAnimationEnd:te,onAnimationStart:re,key:N},E=>{if(B){var I=B.length/p.length,n=E===1?p:p.map((d,v)=>{var b=Math.floor(v*I);if(B[b]){var l=B[b];return be(be({},d),{},{x:ye(l.x,d.x,E),y:ye(l.y,d.y,E)})}return d}),i;return pe(g)?i=ye(Y,g,E):jr(g)||wr(g)?i=ye(Y,0,E):i=g.map((d,v)=>{var b=Math.floor(v*I);if(Array.isArray(Y)&&Y[b]){var l=Y[b];return be(be({},d),{},{x:ye(l.x,d.x,E),y:ye(l.y,d.y,E)})}return d}),E>0&&(u.current=n,o.current=i),h.createElement(ut,{points:n,baseLine:i,needClip:r,clipPathId:a,props:s})}return E>0&&(u.current=p,o.current=g),h.createElement(Oe,null,f&&h.createElement("defs",null,h.createElement("clipPath",{id:"animationClipPath-".concat(a)},h.createElement(va,{alpha:E,points:p,baseLine:g,layout:s.layout,strokeWidth:s.strokeWidth}))),h.createElement(Oe,{clipPath:"url(#animationClipPath-".concat(a,")")},h.createElement(ut,{points:p,baseLine:g,needClip:r,clipPathId:a,props:s})))}),h.createElement(Nr,{label:s.label}))}function ja(t){var{needClip:r,clipPathId:a,props:s}=t,u=h.useRef(null),o=h.useRef();return h.createElement(ka,{needClip:r,clipPathId:a,props:s,previousPointsRef:u,previousBaselineRef:o})}class wa extends h.PureComponent{render(){var{hide:r,dot:a,points:s,className:u,top:o,left:p,needClip:g,xAxisId:f,yAxisId:c,width:k,height:O,id:y,baseLine:x,zIndex:N}=this.props;if(r)return null;var T=mt("recharts-area",u),_=y,{r:M,strokeWidth:te}=fr(a),re=xr(a),B=M*2+te;return h.createElement(yr,{zIndex:N},h.createElement(Oe,{className:T},g&&h.createElement("defs",null,h.createElement(br,{clipPathId:_,xAxisId:f,yAxisId:c}),!re&&h.createElement("clipPath",{id:"clipPath-dots-".concat(_)},h.createElement("rect",{x:p-B/2,y:o-B/2,width:k+B,height:O+B}))),h.createElement(ja,{needClip:g,clipPathId:_,props:this.props})),h.createElement(et,{points:s,mainColor:Te(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(x)&&h.createElement(et,{points:x,mainColor:Te(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var Ot={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!ur.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:ir.area};function Na(t){var r,a=Le(t,Ot),{activeDot:s,animationBegin:u,animationDuration:o,animationEasing:p,connectNulls:g,dot:f,fill:c,fillOpacity:k,hide:O,isAnimationActive:y,legendType:x,stroke:N,xAxisId:T,yAxisId:_}=a,M=Ct(a,da),te=hr(),re=mr(),{needClip:B}=gr(T,_),Y=bt(),{points:E,isRange:I,baseLine:n}=(r=gt(D=>la(D,T,_,Y,t.id)))!==null&&r!==void 0?r:{},i=pr();if(te!=="horizontal"&&te!=="vertical"||i==null||re!=="AreaChart"&&re!=="ComposedChart")return null;var{height:d,width:v,x:b,y:l}=i;return!E||!E.length?null:h.createElement(wa,ge({},M,{activeDot:s,animationBegin:u,animationDuration:o,animationEasing:p,baseLine:n,connectNulls:g,dot:f,fill:c,fillOpacity:k,height:d,hide:O,layout:te,isAnimationActive:y,isRange:I,legendType:x,needClip:B,points:E,stroke:N,width:v,left:b,top:l,xAxisId:T,yAxisId:_}))}var _a=(t,r,a,s,u)=>{var o=a??r;if(pe(o))return o;var p=t==="horizontal"?u:s,g=p.scale.domain();if(p.type==="number"){var f=Math.max(g[0],g[1]),c=Math.min(g[0],g[1]);return o==="dataMin"?c:o==="dataMax"||f<0?f:Math.max(Math.min(g[0],g[1]),0)}return o==="dataMin"?g[0]:o==="dataMax"?g[1]:g[0]};function Aa(t){var{areaSettings:{connectNulls:r,baseValue:a,dataKey:s},stackedData:u,layout:o,chartBaseValue:p,xAxis:g,yAxis:f,displayedData:c,dataStartIndex:k,xAxisTicks:O,yAxisTicks:y,bandSize:x}=t,N=u&&u.length,T=_a(o,p,a,g,f),_=o==="horizontal",M=!1,te=c.map((B,Y)=>{var E;N?E=u[k+Y]:(E=tt(B,s),Array.isArray(E)?M=!0:E=[T,E]);var I=E[1]==null||N&&!r&&tt(B,s)==null;return _?{x:rt({axis:g,ticks:O,bandSize:x,entry:B,index:Y}),y:I?null:f.scale(E[1]),value:E,payload:B}:{x:I?null:g.scale(E[1]),y:rt({axis:f,ticks:y,bandSize:x,entry:B,index:Y}),value:E,payload:B}}),re;return N||M?re=te.map(B=>{var Y=Array.isArray(B.value)?B.value[0]:null;return _?{x:B.x,y:Y!=null&&B.y!=null?f.scale(Y):null,payload:B.payload}:{x:Y!=null?g.scale(Y):null,y:B.y,payload:B.payload}}):re=_?f.scale(T):g.scale(T),{points:te,baseLine:re,isRange:M}}function Sa(t){var r=Le(t,Ot),a=bt();return h.createElement(nr,{id:r.id,type:"area"},s=>h.createElement(h.Fragment,null,h.createElement(lr,{legendPayload:ga(r)}),h.createElement(or,{fn:pa,args:r}),h.createElement(dr,{type:"area",id:s,data:r.data,dataKey:r.dataKey,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,stackId:cr(r.stackId),hide:r.hide,barSize:void 0,baseValue:r.baseValue,isPanorama:a,connectNulls:r.connectNulls}),h.createElement(Na,ge({},r,{id:s}))))}var Se=h.memo(Sa);Se.displayName="Area";var Ea=["axis"],Ca=h.forwardRef((t,r)=>h.createElement(Er,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ea,tooltipPayloadSearcher:Cr,categoricalChartProps:t,ref:r}));function Oa(){const t=_e(),[r,a]=h.useState(null),[s,u]=h.useState(!0);h.useEffect(()=>{o();const f=setInterval(o,3e4);return()=>clearInterval(f)},[]);const o=async()=>{var f;try{const c=await fetch(`${Rt()}/workflows/sla-stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const k=await c.json();a(k)}catch(c){if((f=c==null?void 0:c.message)!=null&&f.includes("Failed to fetch")||(c==null?void 0:c.code)==="ERR_NETWORK")return;console.error("Failed to fetch SLA stats:",c)}finally{u(!1)}};if(s)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading SLA stats"})]})});if(!r)return null;const p=parseFloat(r.complianceRate),g=()=>p>=95?"text-green-600":p>=80?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SLA Performance"})]}),e.jsx("button",{onClick:()=>t("/sla-policies"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"View Details →"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Compliance Rate"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:`text-3xl font-bold ${g()}`,children:[r.complianceRate,"%"]}),e.jsx($e,{className:`w-5 h-5 ${g()}`})]})]}),e.jsx(ve,{className:`w-12 h-12 ${g()} opacity-20`})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ve,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.onTrack}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"On Track"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Je,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.atRisk}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"At Risk"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Je,{className:"w-5 h-5 text-red-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.breached}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Breached"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ee,{className:"w-5 h-5 text-blue-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.total}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Tickets"})]})]}),(r.responseBreaches>0||r.resolutionBreaches>0)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-400 mb-2",children:"Breach Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Response:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:r.responseBreaches})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Resolution:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:r.resolutionBreaches})]})]})]})]})]})}function Pa(){const t=_e(),[r,a]=h.useState({total:0,active:0,paused:0,recentExecutions:0}),[s,u]=h.useState(!0),[o,p]=h.useState(!1);h.useEffect(()=>{g();const f=setInterval(g,3e4);return()=>clearInterval(f)},[]);const g=async()=>{var f;try{const k=(await Mt().get("/workflows/templates")).data;Array.isArray(k)?a({total:k.length,active:k.filter(O=>O.isActive).length,paused:k.filter(O=>!O.isActive).length,recentExecutions:0}):(console.error("API returned non-array data:",k),a({total:0,active:0,paused:0,recentExecutions:0}))}catch(c){((f=c.response)==null?void 0:f.status)===403?p(!0):console.error("Failed to fetch workflow stats:",c),a({total:0,active:0,paused:0,recentExecutions:0})}finally{u(!1)}};return s?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading workflow stats"})]})}):o?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Automation"})]}),e.jsx("button",{onClick:()=>t("/workflows"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Manage →"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.total})]}),e.jsx(zt,{className:"w-12 h-12 text-purple-600 opacity-20"})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ut,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.active}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx($t,{className:"w-5 h-5 text-gray-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.paused}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Paused"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>t("/workflows"),className:"flex-1 px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Workflows"}),e.jsx("button",{onClick:()=>t("/sla-policies"),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"SLA"}),e.jsx("button",{onClick:()=>t("/assignment-rules"),className:"flex-1 px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Rules"})]})]})]})}const me={blue:"#3B82F6",green:"#10B981",yellow:"#F59E0B",red:"#EF4444",purple:"#8B5CF6",gray:"#6B7280"},ze=({active:t,payload:r,label:a})=>{const s=document.documentElement.classList.contains("dark");return t&&r&&r.length?e.jsxs("div",{style:{backgroundColor:s?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:s?"1px solid #4B5563":"1px solid #e0e0e0",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[a&&e.jsx("p",{style:{fontWeight:"bold",color:s?"#F3F4F6":"#1F2937",marginBottom:"8px",fontSize:"14px"},children:a}),r.map((u,o)=>e.jsxs("p",{style:{color:s?"#D1D5DB":"#4B5563",margin:"4px 0",fontSize:"13px"},children:[e.jsxs("span",{style:{color:u.color,fontWeight:"600"},children:[u.name,":"]})," ",u.value]},`item-${o}`))]}):null};function Ia(){const t=_e(),r=Ae(l=>l.assets),a=Ae(l=>l.fetchAssets),s=Ae(l=>l.bulkCreateAssets),u=Ae(l=>l.isLoading),o=Ne(l=>l.tickets),p=Ne(l=>l.fetchTickets),g=Ne(l=>l.isLoading),f=We(l=>l.users),c=We(l=>l.fetchUsers),k=We(l=>l.isLoading),y=Ke(u||g||k,2e3),x=h.useRef(null),[N,T]=h.useState(!1),[_,M]=h.useState(null),[te,re]=h.useState([]),[B,Y]=h.useState(!0),[E,I]=h.useState(document.documentElement.classList.contains("dark"));h.useEffect(()=>{a(),p(),c()},[a,p,c]),h.useEffect(()=>{const l=new MutationObserver(()=>{I(document.documentElement.classList.contains("dark"))});return l.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>l.disconnect()},[]),h.useEffect(()=>{const l=()=>({open:o.filter(j=>j.status==="open").length,in_progress:o.filter(j=>j.status==="in_progress").length,closed:o.filter(j=>j.status==="closed").length}),D=new Date,z=l(),H=Array.from({length:20},(j,P)=>({time:new Date(D.getTime()-(19-P)*18e4).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),open:z.open,in_progress:z.in_progress,closed:z.closed,total:z.open+z.in_progress+z.closed}));re(H);let S=null;const W=()=>{!document.hidden&&!S&&(S=setInterval(()=>{if(!document.hidden){const j=l(),P=j.open+j.in_progress+j.closed;re(w=>[...w.slice(1),{time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),...j,total:P}]),p()}},3e5))},m=()=>{S&&(clearInterval(S),S=null)},K=()=>{document.hidden?m():W()};return document.addEventListener("visibilitychange",K),W(),()=>{m(),document.removeEventListener("visibilitychange",K)}},[o,p]);const n=h.useMemo(()=>[{title:"Total Assets",value:r.length,detail:`${r.filter(l=>l.status==="assigned").length} assigned`,color:"theme-primary"},{title:"Open Tickets",value:o.filter(l=>["open","in_progress"].includes(l.status)).length,detail:`${o.filter(l=>l.priority==="high"||l.priority==="critical").length} high priority`,color:"bg-yellow-500"},{title:"Total Users",value:f.length,detail:`${f.filter(l=>l.role==="ADMIN").length} admins`,color:"bg-purple-500"},{title:"Maintenance",value:r.filter(l=>["maintenance","repair"].includes(l.status)).length,detail:"Assets in service",color:"bg-red-500"}],[r,o,f]),i=h.useMemo(()=>[{name:"Open",value:o.filter(l=>l.status==="open").length,color:me.blue},{name:"In Progress",value:o.filter(l=>l.status==="in_progress").length,color:me.purple},{name:"Closed",value:o.filter(l=>l.status==="closed").length,color:me.gray}],[o]),d=h.useMemo(()=>[{name:"Low",value:o.filter(l=>l.priority==="low").length,color:me.green},{name:"Medium",value:o.filter(l=>l.priority==="medium").length,color:me.yellow},{name:"High",value:o.filter(l=>l.priority==="high").length,color:me.red},{name:"Critical",value:o.filter(l=>l.priority==="critical").length,color:me.red}],[o]);h.useMemo(()=>[{name:"Available",value:r.filter(l=>l.status==="available").length},{name:"Assigned",value:r.filter(l=>l.status==="assigned").length},{name:"Maintenance",value:r.filter(l=>["maintenance","repair"].includes(l.status)).length},{name:"Retired",value:r.filter(l=>l.status==="retired").length}],[r]);const v=()=>{const l=`Name,SerialNumber,RemoteID,AssetType,Condition,AssignedTo,ScannedBy,ScanDateTime,Description,Ownership,Office Location,Extension,Deskphones,Mouse,Keyboard,Department
Dell Laptop,SN123456789,RMT-001,Laptop,Good,john@company.com,admin@company.com,2024-01-15,Dell Latitude 5520,Company,Building A - Floor 2,2501,IP Phone Model X,Wireless Mouse,Mechanical Keyboard,IT
HP Monitor,SN987654321,RMT-002,Monitor,Excellent,jane@company.com,admin@company.com,2024-01-16,HP E24 24 inch,Company,Building A - Floor 3,2502,N/A,Wired Mouse,Wireless Keyboard,Marketing`,D=new Blob([l],{type:"text/csv"}),z=window.URL.createObjectURL(D),H=document.createElement("a");H.href=z,H.download="asset_import_template.csv",H.click(),window.URL.revokeObjectURL(z)},b=async l=>{var z;const D=(z=l.target.files)==null?void 0:z[0];if(D){T(!0),M(null);try{const W=(await new Promise((m,K)=>{Lr.parse(D,{header:!0,skipEmptyLines:!0,complete:j=>m(j.data),error:j=>K(j)})})).map(m=>{const K={name:String(m.Name||m.name||"").trim(),serial_number:String(m.SerialNumber||m.serialnumber||m.serial_number||"").trim(),remote_id:String(m.RemoteID||m.remoteid||m.remote_id||"").trim(),asset_type:String(m.AssetType||m.assettype||"").trim(),condition:String(m.Condition||m.condition||"").trim(),assigned_to:String(m.AssignedTo||m.assignedto||"").trim(),scanned_by:String(m.ScannedBy||m.scannedby||"").trim(),scan_datetime:String(m.ScanDateTime||m.scandatetime||"").trim(),description:String(m.Description||m.description||"").trim(),ownership:String(m.Ownership||m.ownership||m.Onwership||"").trim(),office_location:String(m["Office Location"]||m.office_location||m.officelocation||"").trim(),extension:String(m.Extension||m.extension||"").trim(),deskphones:String(m.Deskphones||m.deskphones||"").trim(),mouse:String(m.Mouse||m.mouse||"").trim(),keyboard:String(m.Keyboard||m.keyboard||"").trim(),department:String(m.Department||m.department||"").trim(),status:"available"},j=String(m.AssetID||m.assetid||"").trim();return j&&(K.asset_code=j),K}).filter(m=>m.name);if(W.length===0)throw new Error("No valid assets found in CSV. Ensure Name column is filled.");await s(W),M({type:"success",message:`Successfully imported ${W.length} assets!`})}catch(H){M({type:"error",message:`Upload failed: ${(H==null?void 0:H.message)??"Unknown error"}`})}finally{T(!1),x.current&&(x.current.value="")}}};return y?e.jsx(He,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1 text-gray-900 dark:text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Manage assets, tickets, and users"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:n.map(l=>e.jsxs("div",{className:"admin-stat-card group relative border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm hover:shadow-md dark:hover:shadow-xl transition-all duration-300",role:"article","aria-label":`${l.title}: ${l.value}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 sm:mb-3",children:l.title}),e.jsx("p",{className:"text-2xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1 sm:mb-2",children:l.value}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:l.detail})]}),e.jsx("div",{className:`flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ${l.color==="theme-primary"?"":l.color}`,style:l.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-white dark:bg-gray-900 rounded-full opacity-80"})})]}),e.jsx("style",{children:`
              .admin-stat-card:hover .stat-hover-border {
                border-color: var(--color-primary) !important;
              }
            `}),e.jsx("div",{className:"stat-hover-border absolute inset-0 border-2 border-transparent rounded-xl transition-colors pointer-events-none"})]},l.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(Oa,{}),e.jsx(Pa,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Status"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-3 sm:mb-4",children:i.map((l,D)=>e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 p-1.5 sm:p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full flex-shrink-0",style:{backgroundColor:l.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:l.name}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white",children:l.value})]})]},D))}),e.jsx(Be,{width:"100%",height:300,children:e.jsxs(Or,{children:[e.jsx(Pr,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,value:D,percent:z})=>`${l}: ${D} (${(z*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:i.map((l,D)=>e.jsx(at,{fill:l.color},`cell-${D}`))}),e.jsx(Fe,{content:e.jsx(ze,{})}),e.jsx(wt,{})]})})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Priority"}),e.jsx(Be,{width:"100%",height:300,children:e.jsxs(Ir,{data:d,children:[e.jsx(st,{strokeDasharray:"3 3",stroke:E?"#374151":"#e5e7eb"}),e.jsx(it,{dataKey:"name",stroke:E?"#9CA3AF":"#6B7280"}),e.jsx(nt,{stroke:E?"#9CA3AF":"#6B7280"}),e.jsx(Fe,{content:e.jsx(ze,{})}),e.jsx(Dr,{dataKey:"value",fill:me.blue,children:d.map((l,D)=>e.jsx(at,{fill:l.color},`cell-${D}`))})]})})]}),e.jsxs("div",{className:"relative border dark:border-gray-700 rounded-lg bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20 p-4 sm:p-5 md:p-6 shadow-lg lg:col-span-2 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),e.jsx("div",{className:"absolute bottom-10 left-1/2 w-32 h-32 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"🎫 Live Ticket Traffic Monitor"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time ticket flow • Updates every 3 minutes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${B?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:B?"LIVE":"PAUSED"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Open"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-400 to-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Closed"})]})]}),e.jsx(Be,{width:"100%",height:250,children:e.jsxs(Ca,{data:te,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorOpen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorInProgress",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorClosed",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]})]}),e.jsx(st,{strokeDasharray:"3 3",stroke:E?"#374151":"#e0e0e0",strokeOpacity:.3}),e.jsx(it,{dataKey:"time",stroke:E?"#9CA3AF":"#6B7280",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:70}),e.jsx(nt,{stroke:E?"#9CA3AF":"#6B7280",style:{fontSize:"12px"}}),e.jsx(Fe,{content:e.jsx(ze,{})}),e.jsx(Se,{type:"monotone",dataKey:"open",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorOpen)",animationDuration:1e3,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(Se,{type:"monotone",dataKey:"in_progress",stroke:"#F59E0B",strokeWidth:3,fillOpacity:1,fill:"url(#colorInProgress)",animationDuration:1e3,dot:{fill:"#F59E0B",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(Se,{type:"monotone",dataKey:"closed",stroke:"#10B981",strokeWidth:3,fillOpacity:1,fill:"url(#colorClosed)",animationDuration:1e3,dot:{fill:"#10B981",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}})]})})]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Bulk Asset Import (CSV)"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Asset codes are automatically generated - no need to provide them in the CSV"})]}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[_&&e.jsx("div",{className:`rounded-md border p-2 sm:p-3 text-sm ${_.type==="success"?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-800 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-300"}`,children:_.message}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-md p-2 sm:p-3 text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Asset codes will be automatically generated for all imported assets. You only need to provide the asset name and other details."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("button",{onClick:v,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:"Download Template"}),e.jsx("input",{ref:x,type:"file",accept:".csv",onChange:b,className:"hidden"}),e.jsx("button",{onClick:()=>{var l;return(l=x.current)==null?void 0:l.click()},disabled:N,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 text-sm sm:text-base flex items-center gap-2",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Uploading"})]}):"Upload CSV File"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Asset Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>t("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Manage All Assets (",r.length,")"]}),e.jsxs("button",{onClick:()=>t("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Assets in Maintenance (",r.filter(l=>["maintenance","repair"].includes(l.status)).length,")"]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Ticket Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>t("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Open Tickets (",o.filter(l=>l.status==="open").length,")"]}),e.jsxs("button",{onClick:()=>t("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["High Priority (",o.filter(l=>l.priority==="high"||l.priority==="critical").length,")"]})]})]})]})]})}function Da(){const t=_e(),{tickets:r,fetchTickets:a,isLoading:s}=Ne(),u=Ke(s,2e3),o=JSON.parse(localStorage.getItem("user")||"{}");h.useEffect(()=>{a()},[a]);const p=h.useMemo(()=>r.filter(x=>x.assignedToId===o.id),[r,o.id]),g=h.useMemo(()=>r.filter(x=>x.assignedToId===null||x.assignedToId===void 0),[r]),f=h.useMemo(()=>{const x=p.filter(M=>M.status==="open"),N=p.filter(M=>M.status==="in_progress"),T=p.filter(M=>M.status==="closed"),_=p.filter(M=>M.priority==="high"||M.priority==="critical");return[{title:"Unassigned Tickets",value:g.length,detail:"Available to claim",color:"bg-purple-500",icon:lt,action:()=>t("/tickets")},{title:"My Open Tickets",value:x.length,detail:"Waiting to start",color:"theme-primary",icon:Ce,action:()=>t("/my-tasks?status=open")},{title:"In Progress",value:N.length,detail:"Currently working on",color:"bg-yellow-500",icon:Ee,action:()=>t("/my-tasks?status=in_progress")},{title:"Completed Today",value:T.filter(M=>{const te=new Date().toDateString();return new Date(M.updatedAt||M.createdAt).toDateString()===te}).length,detail:`${T.length} total completed`,color:"bg-green-500",icon:ve,action:()=>t("/my-tasks?status=closed")},{title:"High Priority",value:_.length,detail:"Needs attention",color:"bg-red-500",icon:Ie,action:()=>t("/my-tasks?priority=high")}]},[p,g,t]),c=h.useMemo(()=>p.filter(x=>x.status!=="closed").sort((x,N)=>{const T={critical:0,high:1,medium:2,low:3},_=T[x.priority]??4,M=T[N.priority]??4;return _!==M?_-M:new Date(N.createdAt).getTime()-new Date(x.createdAt).getTime()}).slice(0,5),[p]),k=x=>{switch(x){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},O=x=>{switch(x){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},y=x=>{if(x==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return u?e.jsx(He,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",o.name||"Technician","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's your workload overview for today"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:f.map((x,N)=>{const T=x.icon;return e.jsxs("div",{onClick:x.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${x.color==="theme-primary"?"":x.color}`,style:x.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(T,{className:"w-6 h-6 text-white"})}),e.jsx($e,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:x.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:x.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:x.detail})]},N)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>t("/my-tasks"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All →"})]})}),e.jsx("div",{className:"p-6",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(lt,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No active tickets assigned"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.length>0?`There are ${g.length} unassigned ticket${g.length===1?"":"s"} waiting to be claimed.`:"All tickets are currently assigned or completed."}),g.length>0&&e.jsx("button",{onClick:()=>t("/tickets"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"View Unassigned Tickets"})]}):e.jsx("div",{className:"space-y-4",children:c.map(x=>e.jsx("div",{onClick:()=>t(`/tickets/${x.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",x.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${k(x.priority)}`,children:x.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${O(x.status)}`,style:y(x.status),children:x.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:x.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:["Created ",ht(x.createdAt)]})]})})},x.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>t("/my-tasks"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(Ce,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"View My Tasks"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"See all assigned tickets"})]}),e.jsxs("button",{onClick:()=>t("/tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(Ie,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"All Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Browse all tickets"})]}),e.jsxs("button",{onClick:()=>t("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(ve,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function Ta(){const t=_e(),{tickets:r,fetchTickets:a,isLoading:s}=Ne(),u=Ke(s,2e3),o=JSON.parse(localStorage.getItem("user")||"{}");h.useEffect(()=>{a()},[a]);const p=h.useMemo(()=>r.filter(y=>y.createdById===o.id),[r,o.id]),g=h.useMemo(()=>{const y=p.filter(_=>_.status==="open"),x=p.filter(_=>_.status==="in_progress"),N=p.filter(_=>_.status==="closed"),T=p.filter(_=>(_.priority==="high"||_.priority==="critical")&&_.status!=="closed");return[{title:"My Open Tickets",value:y.length,detail:"Waiting for response",color:"theme-primary",icon:Ce,action:()=>t("/my-tickets?status=open")},{title:"In Progress",value:x.length,detail:"Being worked on",color:"bg-yellow-500",icon:Ee,action:()=>t("/my-tickets?status=in_progress")},{title:"High Priority",value:T.length,detail:"Needs urgent attention",color:"bg-red-500",icon:Ie,action:()=>t("/my-tickets?priority=high")},{title:"Resolved",value:N.length,detail:"Issues completed",color:"bg-green-500",icon:ve,action:()=>t("/my-tickets?status=closed")}]},[p,t]),f=h.useMemo(()=>p.filter(y=>y.status!=="closed").sort((y,x)=>{const N={critical:0,high:1,medium:2,low:3},T=N[y.priority]??4,_=N[x.priority]??4;return T!==_?T-_:new Date(x.createdAt).getTime()-new Date(y.createdAt).getTime()}).slice(0,5),[p]),c=y=>{switch(y){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},k=y=>{switch(y){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},O=y=>{if(y==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return u?e.jsx(He,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",o.name||"User","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's an overview of your tickets and assets"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((y,x)=>{const N=y.icon;return e.jsxs("div",{onClick:y.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${y.color==="theme-primary"?"":y.color}`,style:y.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(N,{className:"w-6 h-6 text-white"})}),e.jsx($e,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:y.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:y.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:y.detail})]},x)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>t("/my-tickets"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All →"})]})}),e.jsx("div",{className:"p-6",children:f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"All caught up! 🎉"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have no active tickets at the moment."}),e.jsx("button",{onClick:()=>t("/tickets/new"),className:"px-6 py-2 text-white rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:"var(--color-primary)"},children:"Create New Ticket"})]}):e.jsx("div",{className:"space-y-4",children:f.map(y=>e.jsx("div",{onClick:()=>t(`/tickets/${y.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",y.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${c(y.priority)}`,children:y.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${k(y.status)}`,style:O(y.status),children:y.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:y.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:y.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Created ",ht(y.createdAt)]}),y.assignedTo&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Assigned to: ",y.assignedTo.name||y.assignedTo.email]})]})]})})},y.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>t("/tickets/new"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(Ce,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Ticket"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Report a new issue"})]}),e.jsxs("button",{onClick:()=>t("/my-tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(Ie,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View all your tickets"})]}),e.jsxs("button",{onClick:()=>t("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(Ft,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function Ga(){const t=h.useMemo(()=>{const r=localStorage.getItem("user");if(r)try{return JSON.parse(r).role||"USER"}catch(a){return console.error("Error parsing user data:",a),"USER"}return"USER"},[]);return t==="ADMIN"?e.jsx(Ia,{}):t==="TECHNICIAN"?e.jsx(Da,{}):e.jsx(Ta,{})}export{Ga as default};
