import{d as c,u as l,c as u,g as d,l as g}from"./api-DlLUGsjR.js";import{c as A}from"./index-BPHiaStF.js";const h=A((e,i)=>({assets:[],currentAsset:null,isLoading:!1,error:null,fetchAssets:async a=>{var s,t;e({isLoading:!0,error:null});try{const r=await g(a);e({assets:r,isLoading:!1})}catch(r){let o="Failed to load assets";r.message==="Network Error"||r.code==="ERR_NETWORK"?o="Network Error: Unable to connect to the server. Please check your connection and ensure the backend is running.":r.response?o=((s=r.response.data)==null?void 0:s.error)||((t=r.response.data)==null?void 0:t.message)||`Server Error: ${r.response.status}`:r.message&&(o=r.message),console.error("Error fetching assets:",r),e({error:o,isLoading:!1})}},fetchAssetById:async a=>{e({isLoading:!0,error:null});try{const s=await d(a);e({currentAsset:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},createAsset:async a=>{e({isLoading:!0,error:null});try{const s=await u(a);return e(t=>({assets:[...t.assets,s],isLoading:!1})),s}catch(s){throw e({error:s.message,isLoading:!1}),s}},updateAsset:async(a,s)=>{e({isLoading:!0,error:null});try{const t=await l(a,s);return e(r=>{var o;return{assets:r.assets.map(n=>n.id===a?t:n),currentAsset:((o=r.currentAsset)==null?void 0:o.id)===a?t:r.currentAsset,isLoading:!1}}),t}catch(t){throw e({error:t.message,isLoading:!1}),t}},deleteAsset:async a=>{e({isLoading:!0,error:null});try{await c(a),e(s=>({assets:s.assets.filter(t=>t.id!==a),isLoading:!1}))}catch(s){throw e({error:s.message,isLoading:!1}),s}},bulkCreateAssets:async a=>{e({isLoading:!0,error:null});try{await bulkCreateAssets(a),await i().fetchAssets()}catch(s){throw e({error:s.message,isLoading:!1}),s}},clearCurrentAsset:()=>e({currentAsset:null})}));export{h as u};
