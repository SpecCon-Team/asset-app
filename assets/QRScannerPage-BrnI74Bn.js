import{u as v,r as n,j as e,Q as i,P as d,f as C}from"./index-Pd9IxwbI.js";import{showError as g,showSuccess as S}from"./sweetalert-BCvQYi5m.js";import{A as Q}from"./arrow-left-f915ZhnO.js";import{C as u}from"./camera-BS8eAStp.js";import{C as b}from"./circle-check-big-CirU2VYT.js";import{C as f}from"./circle-alert-CPwb1hvn.js";function _(){const t=v(),[a,o]=n.useState(""),[x,m]=n.useState(!1),[s,r]=n.useState(null),j=async l=>{var h,p;if(l.preventDefault(),!a.trim()){await g("Error","Please enter a QR code");return}try{m(!0);const w=await C().post("/checkout/qr/scan",{qrCode:a.trim()});r(w.data.asset),await S("Success!","QR code scanned successfully",1500)}catch(c){console.error("Failed to scan QR code:",c),await g("Error",((p=(h=c.response)==null?void 0:h.data)==null?void 0:p.message)||"Failed to scan QR code"),r(null)}finally{m(!1)}},y=()=>{s&&t("/checkout/new",{state:{assetId:s.id}})},N=()=>{s&&t(`/assets/${s.id}`)},k=()=>{o(""),r(null)};return e.jsxs("div",{className:"flex flex-col p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>t("/checkout"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white mb-4",children:[e.jsx(Q,{className:"w-5 h-5"}),"Back to Checkouts"]}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(i,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"}),"QR Code Scanner"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Scan asset QR codes for quick checkout or information"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 mb-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 rounded-2xl flex items-center justify-center",children:e.jsx(i,{className:"w-32 h-32 text-purple-600 dark:text-purple-400"})})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter QR Code Data"}),e.jsx("input",{type:"text",value:a,onChange:l=>o(l.target.value),placeholder:"ASSET:CODE:ID or scan QR code...",className:"w-full px-4 py-3 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 text-center text-lg font-mono",autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:"Format: ASSET:ASSET_CODE:ASSET_ID"})]}),e.jsx("button",{type:"submit",disabled:x||!a.trim(),className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 text-lg",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-5 h-5"}),"Scan QR Code"]})})]})]}),s&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Asset Found!"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[s.image_url&&e.jsx("img",{src:s.image_url,alt:s.name,className:"w-24 h-24 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:s.name}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsxs("span",{children:["Code: ",s.asset_code]})]}),e.jsxs("p",{children:["Type: ",s.asset_type]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.checkoutStatus==="available"?e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 flex items-center gap-1",children:[e.jsx(b,{className:"w-3 h-3"}),"Available"]}):e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3"}),"Checked Out"]})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.checkoutStatus==="available"?e.jsxs("button",{onClick:y,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(d,{className:"w-5 h-5"}),"Check Out This Asset"]}):e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-400 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"This asset is currently checked out"]})}),e.jsxs("button",{onClick:N,className:"w-full px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(d,{className:"w-5 h-5"}),"View Asset Details"]}),e.jsxs("button",{onClick:k,className:"w-full px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(i,{className:"w-5 h-5"}),"Scan Another Code"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-400 mb-3 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"How to Use QR Scanner"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-semibold",children:"1."}),e.jsx("span",{children:"Find the QR code sticker on the asset"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-semibold",children:"2."}),e.jsx("span",{children:"Use a QR code scanner app to scan the code"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-semibold",children:"3."}),e.jsx("span",{children:"Copy the QR code data and paste it in the input field above"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-semibold",children:"4."}),e.jsx("span",{children:'Click "Scan QR Code" to view asset details'})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-semibold",children:"5."}),e.jsx("span",{children:"Proceed to checkout if the asset is available"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:()=>t("/checkout/qr/generate"),className:"text-purple-600 dark:text-purple-400 hover:underline text-sm font-medium",children:"Need to generate QR codes for your assets? Click here"})})]})]})}export{_ as default};
