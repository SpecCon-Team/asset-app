import{j as e}from"./vendor-charts-DVp8BQgJ.js";import{u as T,r as a}from"./vendor-react-CFQdvhEG.js";import{u as P,a as h,L as E}from"./index-CezS3iyn.js";import{showError as M}from"./sweetalert-DcBwdyhg.js";import{A as u,P as O,an as R,w as m,g as $,e as U,av as V,aj as p,aJ as q}from"./vendor-ui-Bhgb65c8.js";function H(){const o=T(),[y,c]=a.useState(!0),w=P(y,2e3),[i,j]=a.useState([]),[r,k]=a.useState(null),[x,b]=a.useState(""),[n,f]=a.useState("all"),[d,N]=a.useState("all"),[v,S]=a.useState([]);a.useEffect(()=>{C(),L()},[n,d]);const C=async()=>{try{c(!0);const t=h(),s={};n!=="all"&&(s.category=n),d!=="all"&&(s.status=d);const l=await t.get("/inventory",{params:s});j(l.data.items||[]);const A=[...new Set(l.data.items.map(F=>F.category))];S(A)}catch(t){console.error("Failed to fetch inventory:",t),await M("Error","Failed to load inventory items")}finally{c(!1)}},L=async()=>{try{const s=await h().get("/inventory/stats");k(s.data)}catch(t){console.error("Failed to fetch stats:",t)}},_=t=>{switch(t){case"out_of_stock":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"reorder_now":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";case"low_stock":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";default:return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}},I=t=>{switch(t){case"out_of_stock":return"Out of Stock";case"reorder_now":return"Reorder Now";case"low_stock":return"Low Stock";default:return"In Stock"}},g=i.filter(t=>{var l;const s=x.toLowerCase();return t.name.toLowerCase().includes(s)||t.itemCode.toLowerCase().includes(s)||((l=t.description)==null?void 0:l.toLowerCase().includes(s))});return w&&i.length===0?e.jsx(E,{message:"Loading inventory"}):e.jsxs("div",{className:"flex flex-col p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(u,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Inventory Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Track consumable items, stock levels, and manage suppliers"})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalItems})]}),e.jsx(O,{className:"w-10 h-10 text-blue-600 dark:text-blue-400 opacity-50"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R",Number(r.totalValue).toLocaleString()]})]}),e.jsx(R,{className:"w-10 h-10 text-green-600 dark:text-green-400 opacity-50"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:r.lowStockCount})]}),e.jsx(m,{className:"w-10 h-10 text-yellow-600 dark:text-yellow-400 opacity-50"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:r.outOfStockCount})]}),e.jsx(m,{className:"w-10 h-10 text-red-600 dark:text-red-400 opacity-50"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.recentTransactions})]}),e.jsx($,{className:"w-10 h-10 text-purple-600 dark:text-purple-400 opacity-50"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search items...",value:x,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:n,onChange:t=>f(t.target.value),className:"w-full px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900",children:[e.jsx("option",{value:"all",children:"All Categories"}),v.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("select",{value:d,onChange:t=>N(t.target.value),className:"w-full sm:w-auto px-4 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"low",children:"Low Stock"}),e.jsx("option",{value:"out",children:"Out of Stock"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>o("/inventory/new"),className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"})," Add Item"]}),e.jsxs("button",{onClick:()=>o("/inventory/suppliers"),className:"w-full sm:w-auto px-4 py-2 bg-purple-600 text-white rounded-lg flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"})," Suppliers"]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[e.jsx(u,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-4",children:"No inventory items found"}),e.jsxs("button",{onClick:()=>o("/inventory/new"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2 mx-auto",children:[e.jsx(p,{className:"w-5 h-5"})," Add First Item"]})]}):g.map(t=>{const s=Math.min(100,t.currentStock/(t.reorderPoint*2)*100);return e.jsx("div",{onClick:()=>o(`/inventory/${t.id}`),className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition cursor-pointer",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.itemCode," â€¢ ",t.category]}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:t.description})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${_(t.stockStatus)}`,children:I(t.stockStatus)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Current Stock"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.currentStock," ",t.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Min Stock"}),e.jsxs("p",{className:"text-base text-gray-900 dark:text-white",children:[t.minimumStock," ",t.unit]})]}),t.unitPrice&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Unit Price"}),e.jsxs("p",{className:"text-base text-gray-900 dark:text-white",children:["R",t.unitPrice]})]}),t.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Location"}),e.jsx("p",{className:"text-base text-gray-900 dark:text-white truncate",children:t.location})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:"Stock Level"}),e.jsxs("span",{children:[Math.round(s),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${t.stockStatus==="out_of_stock"?"bg-red-600":t.stockStatus==="reorder_now"?"bg-orange-600":t.stockStatus==="low_stock"?"bg-yellow-600":"bg-green-600"}`,style:{width:`${s}%`}})})]})]})},t.id)})})]})}export{H as default};
