import{f as ce,u as E,r as o,j as e,n as P,o as z,a7 as M,a0 as Z,J as me,a8 as ge,a9 as xe,aa as he,ab as ee,y as U,ac as O,i as ue}from"./react-vendor-CLiifM8U.js";import{u as I}from"./store-Bg1Ny8j7.js";import{u as B}from"./store-D7fRW5xE.js";import{l as pe}from"./api-Dnj2DG_p.js";import{P as be}from"./export-libs-CrC4Cruk.js";import{g as ye,a as fe,u as G,L as J,f as le}from"./index-DAo0lhFG.js";import{R as F,P as ke,a as je,C as te,T as W,L as ve,B as Ne,b as se,X as re,Y as ae,c as we,A as Ce,d as V}from"./charts-CDUR81No.js";import"./vendor-FPNzGmdA.js";import"./api-RmH4aR9H.js";import"./form-libs-D8_qC6eW.js";const K=ce(a=>({users:[],isLoading:!1,error:null,fetchUsers:async()=>{a({isLoading:!0,error:null});try{const r=await pe();a({users:r,isLoading:!1})}catch(r){a({error:r.message,isLoading:!1})}}}));function Se(){const a=E(),[r,g]=o.useState(null),[f,v]=o.useState(!0);o.useEffect(()=>{n();const x=setInterval(n,3e4);return()=>clearInterval(x)},[]);const n=async()=>{var x;try{const c=await fetch(`${ye()}/workflows/sla-stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const N=await c.json();g(N)}catch(c){if((x=c==null?void 0:c.message)!=null&&x.includes("Failed to fetch")||(c==null?void 0:c.code)==="ERR_NETWORK")return;console.error("Failed to fetch SLA stats:",c)}finally{v(!1)}};if(f)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading SLA stats"})]})});if(!r)return null;const d=parseFloat(r.complianceRate),p=()=>d>=95?"text-green-600":d>=80?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SLA Performance"})]}),e.jsx("button",{onClick:()=>a("/sla-policies"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"View Details â†’"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Compliance Rate"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:`text-3xl font-bold ${p()}`,children:[r.complianceRate,"%"]}),e.jsx(z,{className:`w-5 h-5 ${p()}`})]})]}),e.jsx(M,{className:`w-12 h-12 ${p()} opacity-20`})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(M,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.onTrack}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"On Track"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Z,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.atRisk}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"At Risk"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Z,{className:"w-5 h-5 text-red-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.breached}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Breached"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(P,{className:"w-5 h-5 text-blue-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.total}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Tickets"})]})]}),(r.responseBreaches>0||r.resolutionBreaches>0)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-400 mb-2",children:"Breach Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Response:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:r.responseBreaches})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Resolution:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:r.resolutionBreaches})]})]})]})]})]})}function Ae(){const a=E(),[r,g]=o.useState({total:0,active:0,paused:0,recentExecutions:0}),[f,v]=o.useState(!0),[n,d]=o.useState(!1);o.useEffect(()=>{p();const x=setInterval(p,3e4);return()=>clearInterval(x)},[]);const p=async()=>{var x;try{const N=(await fe().get("/workflows/templates")).data;Array.isArray(N)?g({total:N.length,active:N.filter(C=>C.isActive).length,paused:N.filter(C=>!C.isActive).length,recentExecutions:0}):(console.error("API returned non-array data:",N),g({total:0,active:0,paused:0,recentExecutions:0}))}catch(c){((x=c.response)==null?void 0:x.status)===403?d(!0):console.error("Failed to fetch workflow stats:",c),g({total:0,active:0,paused:0,recentExecutions:0})}finally{v(!1)}};return f?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading workflow stats"})]})}):n?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Automation"})]}),e.jsx("button",{onClick:()=>a("/workflows"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Manage â†’"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.total})]}),e.jsx(ge,{className:"w-12 h-12 text-purple-600 opacity-20"})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(xe,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.active}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(he,{className:"w-5 h-5 text-gray-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r.paused}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Paused"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>a("/workflows"),className:"flex-1 px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Workflows"}),e.jsx("button",{onClick:()=>a("/sla-policies"),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"SLA"}),e.jsx("button",{onClick:()=>a("/assignment-rules"),className:"flex-1 px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Rules"})]})]})]})}const S={blue:"#3B82F6",green:"#10B981",yellow:"#F59E0B",red:"#EF4444",purple:"#8B5CF6",gray:"#6B7280"},H=({active:a,payload:r,label:g})=>{const f=document.documentElement.classList.contains("dark");return a&&r&&r.length?e.jsxs("div",{style:{backgroundColor:f?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:f?"1px solid #4B5563":"1px solid #e0e0e0",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[g&&e.jsx("p",{style:{fontWeight:"bold",color:f?"#F3F4F6":"#1F2937",marginBottom:"8px",fontSize:"14px"},children:g}),r.map((v,n)=>e.jsxs("p",{style:{color:f?"#D1D5DB":"#4B5563",margin:"4px 0",fontSize:"13px"},children:[e.jsxs("span",{style:{color:v.color,fontWeight:"600"},children:[v.name,":"]})," ",v.value]},`item-${n}`))]}):null};function Te(){const a=E(),r=I(t=>t.assets),g=I(t=>t.fetchAssets),f=I(t=>t.bulkCreateAssets),v=I(t=>t.isLoading),n=B(t=>t.tickets),d=B(t=>t.fetchTickets),p=B(t=>t.isLoading),x=K(t=>t.users),c=K(t=>t.fetchUsers),N=K(t=>t.isLoading),i=G(v||p||N,2e3),s=o.useRef(null),[b,y]=o.useState(!1),[m,h]=o.useState(null),[R,Y]=o.useState([]),[X,Me]=o.useState(!0),[T,ie]=o.useState(document.documentElement.classList.contains("dark"));o.useEffect(()=>{g(),d(),c()},[g,d,c]),o.useEffect(()=>{const t=new MutationObserver(()=>{ie(document.documentElement.classList.contains("dark"))});return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),o.useEffect(()=>{const t=()=>({open:n.filter(u=>u.status==="open").length,in_progress:n.filter(u=>u.status==="in_progress").length,closed:n.filter(u=>u.status==="closed").length}),k=new Date,j=t(),w=Array.from({length:20},(u,_)=>({time:new Date(k.getTime()-(19-_)*18e4).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),open:j.open,in_progress:j.in_progress,closed:j.closed,total:j.open+j.in_progress+j.closed}));Y(w);let D=null;const L=()=>{!document.hidden&&!D&&(D=setInterval(()=>{if(!document.hidden){const u=t(),_=u.open+u.in_progress+u.closed;Y(q=>[...q.slice(1),{time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),...u,total:_}]),d()}},3e5))},l=()=>{D&&(clearInterval(D),D=null)},A=()=>{document.hidden?l():L()};return document.addEventListener("visibilitychange",A),L(),()=>{l(),document.removeEventListener("visibilitychange",A)}},[n,d]);const ne=o.useMemo(()=>[{title:"Total Assets",value:r.length,detail:`${r.filter(t=>t.status==="assigned").length} assigned`,color:"theme-primary"},{title:"Open Tickets",value:n.filter(t=>["open","in_progress"].includes(t.status)).length,detail:`${n.filter(t=>t.priority==="high"||t.priority==="critical").length} high priority`,color:"bg-yellow-500"},{title:"Total Users",value:x.length,detail:`${x.filter(t=>t.role==="ADMIN").length} admins`,color:"bg-purple-500"},{title:"Maintenance",value:r.filter(t=>["maintenance","repair"].includes(t.status)).length,detail:"Assets in service",color:"bg-red-500"}],[r,n,x]),$=o.useMemo(()=>[{name:"Open",value:n.filter(t=>t.status==="open").length,color:S.blue},{name:"In Progress",value:n.filter(t=>t.status==="in_progress").length,color:S.purple},{name:"Closed",value:n.filter(t=>t.status==="closed").length,color:S.gray}],[n]),Q=o.useMemo(()=>[{name:"Low",value:n.filter(t=>t.priority==="low").length,color:S.green},{name:"Medium",value:n.filter(t=>t.priority==="medium").length,color:S.yellow},{name:"High",value:n.filter(t=>t.priority==="high").length,color:S.red},{name:"Critical",value:n.filter(t=>t.priority==="critical").length,color:S.red}],[n]);o.useMemo(()=>[{name:"Available",value:r.filter(t=>t.status==="available").length},{name:"Assigned",value:r.filter(t=>t.status==="assigned").length},{name:"Maintenance",value:r.filter(t=>["maintenance","repair"].includes(t.status)).length},{name:"Retired",value:r.filter(t=>t.status==="retired").length}],[r]);const oe=()=>{const t=`Name,SerialNumber,RemoteID,AssetType,Condition,AssignedTo,ScannedBy,ScanDateTime,Description,Ownership,Office Location,Extension,Deskphones,Mouse,Keyboard,Department
Dell Laptop,SN123456789,RMT-001,Laptop,Good,john@company.com,admin@company.com,2024-01-15,Dell Latitude 5520,Company,Building A - Floor 2,2501,IP Phone Model X,Wireless Mouse,Mechanical Keyboard,IT
HP Monitor,SN987654321,RMT-002,Monitor,Excellent,jane@company.com,admin@company.com,2024-01-16,HP E24 24 inch,Company,Building A - Floor 3,2502,N/A,Wired Mouse,Wireless Keyboard,Marketing`,k=new Blob([t],{type:"text/csv"}),j=window.URL.createObjectURL(k),w=document.createElement("a");w.href=j,w.download="asset_import_template.csv",w.click(),window.URL.revokeObjectURL(j)},de=async t=>{var j;const k=(j=t.target.files)==null?void 0:j[0];if(k){y(!0),h(null);try{const L=(await new Promise((l,A)=>{be.parse(k,{header:!0,skipEmptyLines:!0,complete:u=>l(u.data),error:u=>A(u)})})).map(l=>{const A={name:String(l.Name||l.name||"").trim(),serial_number:String(l.SerialNumber||l.serialnumber||l.serial_number||"").trim(),remote_id:String(l.RemoteID||l.remoteid||l.remote_id||"").trim(),asset_type:String(l.AssetType||l.assettype||"").trim(),condition:String(l.Condition||l.condition||"").trim(),assigned_to:String(l.AssignedTo||l.assignedto||"").trim(),scanned_by:String(l.ScannedBy||l.scannedby||"").trim(),scan_datetime:String(l.ScanDateTime||l.scandatetime||"").trim(),description:String(l.Description||l.description||"").trim(),ownership:String(l.Ownership||l.ownership||l.Onwership||"").trim(),office_location:String(l["Office Location"]||l.office_location||l.officelocation||"").trim(),extension:String(l.Extension||l.extension||"").trim(),deskphones:String(l.Deskphones||l.deskphones||"").trim(),mouse:String(l.Mouse||l.mouse||"").trim(),keyboard:String(l.Keyboard||l.keyboard||"").trim(),department:String(l.Department||l.department||"").trim(),status:"available"},u=String(l.AssetID||l.assetid||"").trim();return u&&(A.asset_code=u),A}).filter(l=>l.name);if(L.length===0)throw new Error("No valid assets found in CSV. Ensure Name column is filled.");await f(L),h({type:"success",message:`Successfully imported ${L.length} assets!`})}catch(w){h({type:"error",message:`Upload failed: ${(w==null?void 0:w.message)??"Unknown error"}`})}finally{y(!1),s.current&&(s.current.value="")}}};return i?e.jsx(J,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1 text-gray-900 dark:text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Manage assets, tickets, and users"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:ne.map(t=>e.jsxs("div",{className:"admin-stat-card group relative border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm hover:shadow-md dark:hover:shadow-xl transition-all duration-300",role:"article","aria-label":`${t.title}: ${t.value}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 sm:mb-3",children:t.title}),e.jsx("p",{className:"text-2xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1 sm:mb-2",children:t.value}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:t.detail})]}),e.jsx("div",{className:`flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ${t.color==="theme-primary"?"":t.color}`,style:t.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-white dark:bg-gray-900 rounded-full opacity-80"})})]}),e.jsx("style",{children:`
              .admin-stat-card:hover .stat-hover-border {
                border-color: var(--color-primary) !important;
              }
            `}),e.jsx("div",{className:"stat-hover-border absolute inset-0 border-2 border-transparent rounded-xl transition-colors pointer-events-none"})]},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(Se,{}),e.jsx(Ae,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Status"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-3 sm:mb-4",children:$.map((t,k)=>e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 p-1.5 sm:p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:t.name}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white",children:t.value})]})]},k))}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(ke,{children:[e.jsx(je,{data:$,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,value:k,percent:j})=>`${t}: ${k} (${(j*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:$.map((t,k)=>e.jsx(te,{fill:t.color},`cell-${k}`))}),e.jsx(W,{content:e.jsx(H,{})}),e.jsx(ve,{})]})})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Priority"}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(Ne,{data:Q,children:[e.jsx(se,{strokeDasharray:"3 3",stroke:T?"#374151":"#e5e7eb"}),e.jsx(re,{dataKey:"name",stroke:T?"#9CA3AF":"#6B7280"}),e.jsx(ae,{stroke:T?"#9CA3AF":"#6B7280"}),e.jsx(W,{content:e.jsx(H,{})}),e.jsx(we,{dataKey:"value",fill:S.blue,children:Q.map((t,k)=>e.jsx(te,{fill:t.color},`cell-${k}`))})]})})]}),e.jsxs("div",{className:"relative border dark:border-gray-700 rounded-lg bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20 p-4 sm:p-5 md:p-6 shadow-lg lg:col-span-2 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),e.jsx("div",{className:"absolute bottom-10 left-1/2 w-32 h-32 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"ðŸŽ« Live Ticket Traffic Monitor"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time ticket flow â€¢ Updates every 3 minutes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${X?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:X?"LIVE":"PAUSED"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Open"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-400 to-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Closed"})]})]}),e.jsx(F,{width:"100%",height:250,children:e.jsxs(Ce,{data:R,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorOpen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorInProgress",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorClosed",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]})]}),e.jsx(se,{strokeDasharray:"3 3",stroke:T?"#374151":"#e0e0e0",strokeOpacity:.3}),e.jsx(re,{dataKey:"time",stroke:T?"#9CA3AF":"#6B7280",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:70}),e.jsx(ae,{stroke:T?"#9CA3AF":"#6B7280",style:{fontSize:"12px"}}),e.jsx(W,{content:e.jsx(H,{})}),e.jsx(V,{type:"monotone",dataKey:"open",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorOpen)",animationDuration:1e3,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(V,{type:"monotone",dataKey:"in_progress",stroke:"#F59E0B",strokeWidth:3,fillOpacity:1,fill:"url(#colorInProgress)",animationDuration:1e3,dot:{fill:"#F59E0B",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(V,{type:"monotone",dataKey:"closed",stroke:"#10B981",strokeWidth:3,fillOpacity:1,fill:"url(#colorClosed)",animationDuration:1e3,dot:{fill:"#10B981",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}})]})})]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Bulk Asset Import (CSV)"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Asset codes are automatically generated - no need to provide them in the CSV"})]}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[m&&e.jsx("div",{className:`rounded-md border p-2 sm:p-3 text-sm ${m.type==="success"?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-800 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-300"}`,children:m.message}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-md p-2 sm:p-3 text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Asset codes will be automatically generated for all imported assets. You only need to provide the asset name and other details."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("button",{onClick:oe,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:"Download Template"}),e.jsx("input",{ref:s,type:"file",accept:".csv",onChange:de,className:"hidden"}),e.jsx("button",{onClick:()=>{var t;return(t=s.current)==null?void 0:t.click()},disabled:b,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 text-sm sm:text-base flex items-center gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Uploading"})]}):"Upload CSV File"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Asset Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>a("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Manage All Assets (",r.length,")"]}),e.jsxs("button",{onClick:()=>a("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Assets in Maintenance (",r.filter(t=>["maintenance","repair"].includes(t.status)).length,")"]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Ticket Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>a("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Open Tickets (",n.filter(t=>t.status==="open").length,")"]}),e.jsxs("button",{onClick:()=>a("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["High Priority (",n.filter(t=>t.priority==="high"||t.priority==="critical").length,")"]})]})]})]})]})}function De(){const a=E(),{tickets:r,fetchTickets:g,isLoading:f}=B(),v=G(f,2e3),n=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{g()},[g]);const d=o.useMemo(()=>r.filter(s=>s.assignedToId===n.id),[r,n.id]),p=o.useMemo(()=>r.filter(s=>s.assignedToId===null||s.assignedToId===void 0),[r]),x=o.useMemo(()=>{const s=d.filter(h=>h.status==="open"),b=d.filter(h=>h.status==="in_progress"),y=d.filter(h=>h.status==="closed"),m=d.filter(h=>h.priority==="high"||h.priority==="critical");return[{title:"Unassigned Tickets",value:p.length,detail:"Available to claim",color:"bg-purple-500",icon:ee,action:()=>a("/tickets")},{title:"My Open Tickets",value:s.length,detail:"Waiting to start",color:"theme-primary",icon:U,action:()=>a("/my-tasks?status=open")},{title:"In Progress",value:b.length,detail:"Currently working on",color:"bg-yellow-500",icon:P,action:()=>a("/my-tasks?status=in_progress")},{title:"Completed Today",value:y.filter(h=>{const R=new Date().toDateString();return new Date(h.updatedAt||h.createdAt).toDateString()===R}).length,detail:`${y.length} total completed`,color:"bg-green-500",icon:M,action:()=>a("/my-tasks?status=closed")},{title:"High Priority",value:m.length,detail:"Needs attention",color:"bg-red-500",icon:O,action:()=>a("/my-tasks?priority=high")}]},[d,p,a]),c=o.useMemo(()=>d.filter(s=>s.status!=="closed").sort((s,b)=>{const y={critical:0,high:1,medium:2,low:3},m=y[s.priority]??4,h=y[b.priority]??4;return m!==h?m-h:new Date(b.createdAt).getTime()-new Date(s.createdAt).getTime()}).slice(0,5),[d]),N=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},C=s=>{switch(s){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},i=s=>{if(s==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return v?e.jsx(J,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",n.name||"Technician","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's your workload overview for today"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:x.map((s,b)=>{const y=s.icon;return e.jsxs("div",{onClick:s.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.color==="theme-primary"?"":s.color}`,style:s.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(y,{className:"w-6 h-6 text-white"})}),e.jsx(z,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:s.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:s.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:s.detail})]},b)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>a("/my-tasks"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All â†’"})]})}),e.jsx("div",{className:"p-6",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No active tickets assigned"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:p.length>0?`There are ${p.length} unassigned ticket${p.length===1?"":"s"} waiting to be claimed.`:"All tickets are currently assigned or completed."}),p.length>0&&e.jsx("button",{onClick:()=>a("/tickets"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"View Unassigned Tickets"})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsx("div",{onClick:()=>a(`/tickets/${s.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",s.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${N(s.priority)}`,children:s.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C(s.status)}`,style:i(s.status),children:s.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:["Created ",le(s.createdAt)]})]})})},s.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>a("/my-tasks"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(U,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"View My Tasks"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"See all assigned tickets"})]}),e.jsxs("button",{onClick:()=>a("/tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(O,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"All Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Browse all tickets"})]}),e.jsxs("button",{onClick:()=>a("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(M,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function Le(){const a=E(),{tickets:r,fetchTickets:g,isLoading:f}=B(),v=G(f,2e3),n=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{g()},[g]);const d=o.useMemo(()=>r.filter(i=>i.createdById===n.id),[r,n.id]),p=o.useMemo(()=>{const i=d.filter(m=>m.status==="open"),s=d.filter(m=>m.status==="in_progress"),b=d.filter(m=>m.status==="closed"),y=d.filter(m=>(m.priority==="high"||m.priority==="critical")&&m.status!=="closed");return[{title:"My Open Tickets",value:i.length,detail:"Waiting for response",color:"theme-primary",icon:U,action:()=>a("/my-tickets?status=open")},{title:"In Progress",value:s.length,detail:"Being worked on",color:"bg-yellow-500",icon:P,action:()=>a("/my-tickets?status=in_progress")},{title:"High Priority",value:y.length,detail:"Needs urgent attention",color:"bg-red-500",icon:O,action:()=>a("/my-tickets?priority=high")},{title:"Resolved",value:b.length,detail:"Issues completed",color:"bg-green-500",icon:M,action:()=>a("/my-tickets?status=closed")}]},[d,a]),x=o.useMemo(()=>d.filter(i=>i.status!=="closed").sort((i,s)=>{const b={critical:0,high:1,medium:2,low:3},y=b[i.priority]??4,m=b[s.priority]??4;return y!==m?y-m:new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()}).slice(0,5),[d]),c=i=>{switch(i){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},N=i=>{switch(i){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},C=i=>{if(i==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return v?e.jsx(J,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",n.name||"User","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's an overview of your tickets and assets"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((i,s)=>{const b=i.icon;return e.jsxs("div",{onClick:i.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${i.color==="theme-primary"?"":i.color}`,style:i.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsx(z,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:i.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:i.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:i.detail})]},s)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>a("/my-tickets"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All â†’"})]})}),e.jsx("div",{className:"p-6",children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"All caught up! ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have no active tickets at the moment."}),e.jsx("button",{onClick:()=>a("/tickets/new"),className:"px-6 py-2 text-white rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:"var(--color-primary)"},children:"Create New Ticket"})]}):e.jsx("div",{className:"space-y-4",children:x.map(i=>e.jsx("div",{onClick:()=>a(`/tickets/${i.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",i.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${c(i.priority)}`,children:i.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${N(i.status)}`,style:C(i.status),children:i.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Created ",le(i.createdAt)]}),i.assignedTo&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Assigned to: ",i.assignedTo.name||i.assignedTo.email]})]})]})})},i.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>a("/tickets/new"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(U,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Ticket"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Report a new issue"})]}),e.jsxs("button",{onClick:()=>a("/my-tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(O,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View all your tickets"})]}),e.jsxs("button",{onClick:()=>a("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(ue,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function Ve(){const a=o.useMemo(()=>{const r=localStorage.getItem("user");if(r)try{return JSON.parse(r).role||"USER"}catch(g){return console.error("Error parsing user data:",g),"USER"}return"USER"},[]);return a==="ADMIN"?e.jsx(Te,{}):a==="TECHNICIAN"?e.jsx(De,{}):e.jsx(Le,{})}export{Ve as default};
