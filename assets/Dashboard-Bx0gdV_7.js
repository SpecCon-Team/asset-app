import{r as o,j as e}from"./react-vendor-CGeGxK2Z.js";import{u as I}from"./store-B5HQj8se.js";import{u as M}from"./store-SoO7QIpB.js";import{l as ce}from"./api-rDdjcoD9.js";import{ax as me}from"./vendor-U4Kn3po4.js";import{P as ge}from"./export-libs-_UL_8v9K.js";import{g as xe,a as he,u as z,L as G,f as le}from"./index-C4sdeoft.js";import{u as B}from"./react-router-vendor-DDwJJgaM.js";import{f as P,g as J,x as E,w as Z,t as ue,y as pe,z as be,E as ye,I as ee,o as R,J as O,P as fe}from"./ui-libs-t3PztYli.js";import{R as F,P as ke,a as je,C as te,T as W,L as ve,B as Ne,b as se,X as re,Y as ae,c as we,A as Ce,d as V}from"./charts-D5o42zpp.js";import"./api-DY_2S_vd.js";import"./form-libs-D8_qC6eW.js";const K=me(l=>({users:[],isLoading:!1,error:null,fetchUsers:async()=>{l({isLoading:!0,error:null});try{const a=await ce();l({users:a,isLoading:!1})}catch(a){l({error:a.message,isLoading:!1})}}}));function Se(){const l=B(),[a,m]=o.useState(null),[k,j]=o.useState(!0);o.useEffect(()=>{n();const x=setInterval(n,3e4);return()=>clearInterval(x)},[]);const n=async()=>{var x;try{const c=await fetch(`${xe()}/workflows/sla-stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const w=await c.json();m(w)}catch(c){if((x=c==null?void 0:c.message)!=null&&x.includes("Failed to fetch")||(c==null?void 0:c.code)==="ERR_NETWORK")return;console.error("Failed to fetch SLA stats:",c)}finally{j(!1)}};if(k)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading SLA stats"})]})});if(!a)return null;const d=parseFloat(a.complianceRate),p=()=>d>=95?"text-green-600":d>=80?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SLA Performance"})]}),e.jsx("button",{onClick:()=>l("/sla-policies"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"View Details â†’"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Compliance Rate"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:`text-3xl font-bold ${p()}`,children:[a.complianceRate,"%"]}),e.jsx(J,{className:`w-5 h-5 ${p()}`})]})]}),e.jsx(E,{className:`w-12 h-12 ${p()} opacity-20`})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(E,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a.onTrack}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"On Track"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Z,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a.atRisk}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"At Risk"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Z,{className:"w-5 h-5 text-red-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a.breached}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Breached"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(P,{className:"w-5 h-5 text-blue-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a.total}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Tickets"})]})]}),(a.responseBreaches>0||a.resolutionBreaches>0)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-400 mb-2",children:"Breach Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Response:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:a.responseBreaches})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700 dark:text-red-400",children:"Resolution:"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-300",children:a.resolutionBreaches})]})]})]})]})]})}function Ae(){const l=B(),[a,m]=o.useState({total:0,active:0,paused:0,recentExecutions:0}),[k,j]=o.useState(!0),[n,d]=o.useState(!1);o.useEffect(()=>{p();const x=setInterval(p,3e4);return()=>clearInterval(x)},[]);const p=async()=>{var x,c,w;try{const r=(await he().get("/workflows/templates")).data;Array.isArray(r)?m({total:r.length,active:r.filter(s=>s.isActive).length,paused:r.filter(s=>!s.isActive).length,recentExecutions:0}):(console.error("API returned non-array data:",r),m({total:0,active:0,paused:0,recentExecutions:0}))}catch(b){if((b==null?void 0:b.code)==="ERR_NETWORK"||(x=b==null?void 0:b.message)!=null&&x.includes("Network Error")||(c=b==null?void 0:b.message)!=null&&c.includes("Failed to fetch")){m({total:0,active:0,paused:0,recentExecutions:0}),j(!1);return}((w=b.response)==null?void 0:w.status)===403?d(!0):console.error("Failed to fetch workflow stats:",b),m({total:0,active:0,paused:0,recentExecutions:0})}finally{j(!1)}};return k?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Loading workflow stats"})]})}):n?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Automation"})]}),e.jsx("button",{onClick:()=>l("/workflows"),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Manage â†’"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a.total})]}),e.jsx(pe,{className:"w-12 h-12 text-purple-600 opacity-20"})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a.active}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ye,{className:"w-5 h-5 text-gray-600"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a.paused}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Paused"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>l("/workflows"),className:"flex-1 px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Workflows"}),e.jsx("button",{onClick:()=>l("/sla-policies"),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"SLA"}),e.jsx("button",{onClick:()=>l("/assignment-rules"),className:"flex-1 px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Rules"})]})]})]})}const S={blue:"#3B82F6",green:"#10B981",yellow:"#F59E0B",red:"#EF4444",purple:"#8B5CF6",gray:"#6B7280"},H=({active:l,payload:a,label:m})=>{const k=document.documentElement.classList.contains("dark");return l&&a&&a.length?e.jsxs("div",{style:{backgroundColor:k?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:k?"1px solid #4B5563":"1px solid #e0e0e0",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[m&&e.jsx("p",{style:{fontWeight:"bold",color:k?"#F3F4F6":"#1F2937",marginBottom:"8px",fontSize:"14px"},children:m}),a.map((j,n)=>e.jsxs("p",{style:{color:k?"#D1D5DB":"#4B5563",margin:"4px 0",fontSize:"13px"},children:[e.jsxs("span",{style:{color:j.color,fontWeight:"600"},children:[j.name,":"]})," ",j.value]},`item-${n}`))]}):null};function Te(){const l=B(),a=I(t=>t.assets),m=I(t=>t.fetchAssets),k=I(t=>t.bulkCreateAssets),j=I(t=>t.isLoading),n=M(t=>t.tickets),d=M(t=>t.fetchTickets),p=M(t=>t.isLoading),x=K(t=>t.users),c=K(t=>t.fetchUsers),w=K(t=>t.isLoading),r=z(j||p||w,2e3),s=o.useRef(null),[y,f]=o.useState(!1),[g,h]=o.useState(null),[U,Y]=o.useState([]),[X,Ee]=o.useState(!0),[T,ie]=o.useState(document.documentElement.classList.contains("dark"));o.useEffect(()=>{m(),d(),c()},[m,d,c]),o.useEffect(()=>{const t=new MutationObserver(()=>{ie(document.documentElement.classList.contains("dark"))});return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),o.useEffect(()=>{const t=()=>({open:n.filter(u=>u.status==="open").length,in_progress:n.filter(u=>u.status==="in_progress").length,closed:n.filter(u=>u.status==="closed").length}),v=new Date,N=t(),C=Array.from({length:20},(u,$)=>({time:new Date(v.getTime()-(19-$)*18e4).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),open:N.open,in_progress:N.in_progress,closed:N.closed,total:N.open+N.in_progress+N.closed}));Y(C);let D=null;const L=()=>{!document.hidden&&!D&&(D=setInterval(()=>{if(!document.hidden){const u=t(),$=u.open+u.in_progress+u.closed;Y(q=>[...q.slice(1),{time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),...u,total:$}]),d()}},3e5))},i=()=>{D&&(clearInterval(D),D=null)},A=()=>{document.hidden?i():L()};return document.addEventListener("visibilitychange",A),L(),()=>{i(),document.removeEventListener("visibilitychange",A)}},[n,d]);const ne=o.useMemo(()=>[{title:"Total Assets",value:a.length,detail:`${a.filter(t=>t.status==="assigned").length} assigned`,color:"theme-primary"},{title:"Open Tickets",value:n.filter(t=>["open","in_progress"].includes(t.status)).length,detail:`${n.filter(t=>t.priority==="high"||t.priority==="critical").length} high priority`,color:"bg-yellow-500"},{title:"Total Users",value:x.length,detail:`${x.filter(t=>t.role==="ADMIN").length} admins`,color:"bg-purple-500"},{title:"Maintenance",value:a.filter(t=>["maintenance","repair"].includes(t.status)).length,detail:"Assets in service",color:"bg-red-500"}],[a,n,x]),_=o.useMemo(()=>[{name:"Open",value:n.filter(t=>t.status==="open").length,color:S.blue},{name:"In Progress",value:n.filter(t=>t.status==="in_progress").length,color:S.purple},{name:"Closed",value:n.filter(t=>t.status==="closed").length,color:S.gray}],[n]),Q=o.useMemo(()=>[{name:"Low",value:n.filter(t=>t.priority==="low").length,color:S.green},{name:"Medium",value:n.filter(t=>t.priority==="medium").length,color:S.yellow},{name:"High",value:n.filter(t=>t.priority==="high").length,color:S.red},{name:"Critical",value:n.filter(t=>t.priority==="critical").length,color:S.red}],[n]);o.useMemo(()=>[{name:"Available",value:a.filter(t=>t.status==="available").length},{name:"Assigned",value:a.filter(t=>t.status==="assigned").length},{name:"Maintenance",value:a.filter(t=>["maintenance","repair"].includes(t.status)).length},{name:"Retired",value:a.filter(t=>t.status==="retired").length}],[a]);const oe=()=>{const t=`Name,SerialNumber,RemoteID,AssetType,Condition,AssignedTo,ScannedBy,ScanDateTime,Description,Ownership,Office Location,Extension,Deskphones,Mouse,Keyboard,Department
Dell Laptop,SN123456789,RMT-001,Laptop,Good,john@company.com,admin@company.com,2024-01-15,Dell Latitude 5520,Company,Building A - Floor 2,2501,IP Phone Model X,Wireless Mouse,Mechanical Keyboard,IT
HP Monitor,SN987654321,RMT-002,Monitor,Excellent,jane@company.com,admin@company.com,2024-01-16,HP E24 24 inch,Company,Building A - Floor 3,2502,N/A,Wired Mouse,Wireless Keyboard,Marketing`,v=new Blob([t],{type:"text/csv"}),N=window.URL.createObjectURL(v),C=document.createElement("a");C.href=N,C.download="asset_import_template.csv",C.click(),window.URL.revokeObjectURL(N)},de=async t=>{var N;const v=(N=t.target.files)==null?void 0:N[0];if(v){f(!0),h(null);try{const L=(await new Promise((i,A)=>{ge.parse(v,{header:!0,skipEmptyLines:!0,complete:u=>i(u.data),error:u=>A(u)})})).map(i=>{const A={name:String(i.Name||i.name||"").trim(),serial_number:String(i.SerialNumber||i.serialnumber||i.serial_number||"").trim(),remote_id:String(i.RemoteID||i.remoteid||i.remote_id||"").trim(),asset_type:String(i.AssetType||i.assettype||"").trim(),condition:String(i.Condition||i.condition||"").trim(),assigned_to:String(i.AssignedTo||i.assignedto||"").trim(),scanned_by:String(i.ScannedBy||i.scannedby||"").trim(),scan_datetime:String(i.ScanDateTime||i.scandatetime||"").trim(),description:String(i.Description||i.description||"").trim(),ownership:String(i.Ownership||i.ownership||i.Onwership||"").trim(),office_location:String(i["Office Location"]||i.office_location||i.officelocation||"").trim(),extension:String(i.Extension||i.extension||"").trim(),deskphones:String(i.Deskphones||i.deskphones||"").trim(),mouse:String(i.Mouse||i.mouse||"").trim(),keyboard:String(i.Keyboard||i.keyboard||"").trim(),department:String(i.Department||i.department||"").trim(),status:"available"},u=String(i.AssetID||i.assetid||"").trim();return u&&(A.asset_code=u),A}).filter(i=>i.name);if(L.length===0)throw new Error("No valid assets found in CSV. Ensure Name column is filled.");await k(L),h({type:"success",message:`Successfully imported ${L.length} assets!`})}catch(C){h({type:"error",message:`Upload failed: ${(C==null?void 0:C.message)??"Unknown error"}`})}finally{f(!1),s.current&&(s.current.value="")}}};return r?e.jsx(G,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1 text-gray-900 dark:text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Manage assets, tickets, and users"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:ne.map(t=>e.jsxs("div",{className:"admin-stat-card group relative border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm hover:shadow-md dark:hover:shadow-xl transition-all duration-300",role:"article","aria-label":`${t.title}: ${t.value}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 sm:mb-3",children:t.title}),e.jsx("p",{className:"text-2xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1 sm:mb-2",children:t.value}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:t.detail})]}),e.jsx("div",{className:`flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ${t.color==="theme-primary"?"":t.color}`,style:t.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-white dark:bg-gray-900 rounded-full opacity-80"})})]}),e.jsx("style",{children:`
              .admin-stat-card:hover .stat-hover-border {
                border-color: var(--color-primary) !important;
              }
            `}),e.jsx("div",{className:"stat-hover-border absolute inset-0 border-2 border-transparent rounded-xl transition-colors pointer-events-none"})]},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(Se,{}),e.jsx(Ae,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Status"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-3 sm:mb-4",children:_.map((t,v)=>e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 p-1.5 sm:p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:t.name}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white",children:t.value})]})]},v))}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(ke,{children:[e.jsx(je,{data:_,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,value:v,percent:N})=>`${t}: ${v} (${(N*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:_.map((t,v)=>e.jsx(te,{fill:t.color},`cell-${v}`))}),e.jsx(W,{content:e.jsx(H,{})}),e.jsx(ve,{})]})})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-4 sm:p-5 md:p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-3 sm:mb-4 text-base sm:text-lg text-gray-900 dark:text-white",children:"Tickets by Priority"}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(Ne,{data:Q,children:[e.jsx(se,{strokeDasharray:"3 3",stroke:T?"#374151":"#e5e7eb"}),e.jsx(re,{dataKey:"name",stroke:T?"#9CA3AF":"#6B7280"}),e.jsx(ae,{stroke:T?"#9CA3AF":"#6B7280"}),e.jsx(W,{content:e.jsx(H,{})}),e.jsx(we,{dataKey:"value",fill:S.blue,children:Q.map((t,v)=>e.jsx(te,{fill:t.color},`cell-${v}`))})]})})]}),e.jsxs("div",{className:"relative border dark:border-gray-700 rounded-lg bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20 p-4 sm:p-5 md:p-6 shadow-lg lg:col-span-2 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),e.jsx("div",{className:"absolute bottom-10 left-1/2 w-32 h-32 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"ðŸŽ« Live Ticket Traffic Monitor"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time ticket flow â€¢ Updates every 3 minutes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${X?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:X?"LIVE":"PAUSED"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Open"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-400 to-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Closed"})]})]}),e.jsx(F,{width:"100%",height:250,children:e.jsxs(Ce,{data:U,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorOpen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorInProgress",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorClosed",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]})]}),e.jsx(se,{strokeDasharray:"3 3",stroke:T?"#374151":"#e0e0e0",strokeOpacity:.3}),e.jsx(re,{dataKey:"time",stroke:T?"#9CA3AF":"#6B7280",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:70}),e.jsx(ae,{stroke:T?"#9CA3AF":"#6B7280",style:{fontSize:"12px"}}),e.jsx(W,{content:e.jsx(H,{})}),e.jsx(V,{type:"monotone",dataKey:"open",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorOpen)",animationDuration:1e3,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(V,{type:"monotone",dataKey:"in_progress",stroke:"#F59E0B",strokeWidth:3,fillOpacity:1,fill:"url(#colorInProgress)",animationDuration:1e3,dot:{fill:"#F59E0B",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}}),e.jsx(V,{type:"monotone",dataKey:"closed",stroke:"#10B981",strokeWidth:3,fillOpacity:1,fill:"url(#colorClosed)",animationDuration:1e3,dot:{fill:"#10B981",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:2}})]})})]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Bulk Asset Import (CSV)"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Asset codes are automatically generated - no need to provide them in the CSV"})]}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[g&&e.jsx("div",{className:`rounded-md border p-2 sm:p-3 text-sm ${g.type==="success"?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-800 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-300"}`,children:g.message}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-md p-2 sm:p-3 text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Asset codes will be automatically generated for all imported assets. You only need to provide the asset name and other details."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("button",{onClick:oe,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:"Download Template"}),e.jsx("input",{ref:s,type:"file",accept:".csv",onChange:de,className:"hidden"}),e.jsx("button",{onClick:()=>{var t;return(t=s.current)==null?void 0:t.click()},disabled:y,className:"px-3 sm:px-4 py-2 min-h-[44px] rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 text-sm sm:text-base flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"sr-only",children:"Uploading"})]}):"Upload CSV File"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Asset Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>l("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Manage All Assets (",a.length,")"]}),e.jsxs("button",{onClick:()=>l("/assets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Assets in Maintenance (",a.filter(t=>["maintenance","repair"].includes(t.status)).length,")"]})]})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-gray-700",children:e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 dark:text-white",children:"Ticket Management"})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsxs("button",{onClick:()=>l("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["Open Tickets (",n.filter(t=>t.status==="open").length,")"]}),e.jsxs("button",{onClick:()=>l("/tickets"),className:"w-full text-left px-3 sm:px-4 py-2 min-h-[44px] rounded-md border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm sm:text-base text-gray-900 dark:text-gray-100",children:["High Priority (",n.filter(t=>t.priority==="high"||t.priority==="critical").length,")"]})]})]})]})]})}function De(){const l=B(),{tickets:a,fetchTickets:m,isLoading:k}=M(),j=z(k,2e3),n=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{m()},[m]);const d=o.useMemo(()=>a.filter(s=>s.assignedToId===n.id),[a,n.id]),p=o.useMemo(()=>a.filter(s=>s.assignedToId===null||s.assignedToId===void 0),[a]),x=o.useMemo(()=>{const s=d.filter(h=>h.status==="open"),y=d.filter(h=>h.status==="in_progress"),f=d.filter(h=>h.status==="closed"),g=d.filter(h=>h.priority==="high"||h.priority==="critical");return[{title:"Unassigned Tickets",value:p.length,detail:"Available to claim",color:"bg-purple-500",icon:ee,action:()=>l("/tickets")},{title:"My Open Tickets",value:s.length,detail:"Waiting to start",color:"theme-primary",icon:R,action:()=>l("/my-tasks?status=open")},{title:"In Progress",value:y.length,detail:"Currently working on",color:"bg-yellow-500",icon:P,action:()=>l("/my-tasks?status=in_progress")},{title:"Completed Today",value:f.filter(h=>{const U=new Date().toDateString();return new Date(h.updatedAt||h.createdAt).toDateString()===U}).length,detail:`${f.length} total completed`,color:"bg-green-500",icon:E,action:()=>l("/my-tasks?status=closed")},{title:"High Priority",value:g.length,detail:"Needs attention",color:"bg-red-500",icon:O,action:()=>l("/my-tasks?priority=high")}]},[d,p,l]),c=o.useMemo(()=>d.filter(s=>s.status!=="closed").sort((s,y)=>{const f={critical:0,high:1,medium:2,low:3},g=f[s.priority]??4,h=f[y.priority]??4;return g!==h?g-h:new Date(y.createdAt).getTime()-new Date(s.createdAt).getTime()}).slice(0,5),[d]),w=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},b=s=>{switch(s){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},r=s=>{if(s==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return j?e.jsx(G,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",n.name||"Technician","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's your workload overview for today"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:x.map((s,y)=>{const f=s.icon;return e.jsxs("div",{onClick:s.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.color==="theme-primary"?"":s.color}`,style:s.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsx(J,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:s.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:s.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:s.detail})]},y)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>l("/my-tasks"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All â†’"})]})}),e.jsx("div",{className:"p-6",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No active tickets assigned"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:p.length>0?`There are ${p.length} unassigned ticket${p.length===1?"":"s"} waiting to be claimed.`:"All tickets are currently assigned or completed."}),p.length>0&&e.jsx("button",{onClick:()=>l("/tickets"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"View Unassigned Tickets"})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsx("div",{onClick:()=>l(`/tickets/${s.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",s.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${w(s.priority)}`,children:s.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${b(s.status)}`,style:r(s.status),children:s.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:["Created ",le(s.createdAt)]})]})})},s.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>l("/my-tasks"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(R,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"View My Tasks"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"See all assigned tickets"})]}),e.jsxs("button",{onClick:()=>l("/tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(O,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"All Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Browse all tickets"})]}),e.jsxs("button",{onClick:()=>l("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(E,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function Le(){const l=B(),{tickets:a,fetchTickets:m,isLoading:k}=M(),j=z(k,2e3),n=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{m()},[m]);const d=o.useMemo(()=>a.filter(r=>r.createdById===n.id),[a,n.id]),p=o.useMemo(()=>{const r=d.filter(g=>g.status==="open"),s=d.filter(g=>g.status==="in_progress"),y=d.filter(g=>g.status==="closed"),f=d.filter(g=>(g.priority==="high"||g.priority==="critical")&&g.status!=="closed");return[{title:"My Open Tickets",value:r.length,detail:"Waiting for response",color:"theme-primary",icon:R,action:()=>l("/my-tickets?status=open")},{title:"In Progress",value:s.length,detail:"Being worked on",color:"bg-yellow-500",icon:P,action:()=>l("/my-tickets?status=in_progress")},{title:"High Priority",value:f.length,detail:"Needs urgent attention",color:"bg-red-500",icon:O,action:()=>l("/my-tickets?priority=high")},{title:"Resolved",value:y.length,detail:"Issues completed",color:"bg-green-500",icon:E,action:()=>l("/my-tickets?status=closed")}]},[d,l]),x=o.useMemo(()=>d.filter(r=>r.status!=="closed").sort((r,s)=>{const y={critical:0,high:1,medium:2,low:3},f=y[r.priority]??4,g=y[s.priority]??4;return f!==g?f-g:new Date(s.createdAt).getTime()-new Date(r.createdAt).getTime()}).slice(0,5),[d]),c=r=>{switch(r){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},w=r=>{switch(r){case"open":return"theme-status-open";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},b=r=>{if(r==="open")return{backgroundColor:"rgba(var(--color-primary-rgb), 0.1)",color:"var(--color-primary)"}};return j?e.jsx(G,{message:"Loading dashboard..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 text-white",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primary-dark))"},children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",n.name||"User","!"]}),e.jsx("p",{className:"text-white/90",children:"Here's an overview of your tickets and assets"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((r,s)=>{const y=r.icon;return e.jsxs("div",{onClick:r.action,className:"bg-white dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-750 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md dark:shadow-xl p-6 hover:shadow-lg dark:hover:shadow-2xl transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${r.color==="theme-primary"?"":r.color}`,style:r.color==="theme-primary"?{backgroundColor:"var(--color-primary)"}:void 0,children:e.jsx(y,{className:"w-6 h-6 text-white"})}),e.jsx(J,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:r.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:r.value}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mt-1",children:r.detail})]},s)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Active Tickets"}),e.jsx("button",{onClick:()=>l("/my-tickets"),className:"text-sm font-medium transition-opacity hover:opacity-80",style:{color:"var(--color-primary)"},children:"View All â†’"})]})}),e.jsx("div",{className:"p-6",children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"All caught up! ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have no active tickets at the moment."}),e.jsx("button",{onClick:()=>l("/tickets/new"),className:"px-6 py-2 text-white rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:"var(--color-primary)"},children:"Create New Ticket"})]}):e.jsx("div",{className:"space-y-4",children:x.map(r=>e.jsx("div",{onClick:()=>l(`/tickets/${r.id}`),className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:["#",r.number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${c(r.priority)}`,children:r.priority.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${w(r.status)}`,style:b(r.status),children:r.status.replace("_"," ").toUpperCase()})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Created ",le(r.createdAt)]}),r.assignedTo&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Assigned to: ",r.assignedTo.name||r.assignedTo.email]})]})]})})},r.id))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>l("/tickets/new"),className:"p-4 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-left",children:[e.jsx(R,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Ticket"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Report a new issue"})]}),e.jsxs("button",{onClick:()=>l("/my-tickets"),className:"p-4 border-2 border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left",children:[e.jsx(O,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Tickets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View all your tickets"})]}),e.jsxs("button",{onClick:()=>l("/my-assets"),className:"p-4 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors text-left",children:[e.jsx(fe,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"My Assets"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View assigned assets"})]})]})]})]})}function He(){const l=o.useMemo(()=>{const a=localStorage.getItem("user");if(a)try{return JSON.parse(a).role||"USER"}catch(m){return console.error("Error parsing user data:",m),"USER"}return"USER"},[]);return l==="ADMIN"?e.jsx(Te,{}):l==="TECHNICIAN"?e.jsx(De,{}):e.jsx(Le,{})}export{He as default};
